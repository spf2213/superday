<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Superday — Land the offer.</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700&family=Geist+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
<style>
/* ─── RESET ─────────────────────────────── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{font-size:16px;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}
button,input,textarea,select{font:inherit;color:inherit}
a{color:inherit;text-decoration:none}

/* ─── TOKENS ─────────────────────────────── */
:root {
  /* Dark theme (default) */
  --bg:          #0A0A0B;
  --bg-1:        #111113;
  --bg-2:        #18181B;
  --bg-3:        #1F1F24;
  --bg-4:        #27272D;
  --bg-hover:    #2E2E35;
  --line:        rgba(255,255,255,0.06);
  --line-2:      rgba(255,255,255,0.10);
  --line-strong: rgba(255,255,255,0.18);
  --t:           #EDEDEF;
  --t-2:         #A0A0AB;
  --t-3:         #64646E;
  --t-inv:       #0A0A0B;
  --accent:      #5E6AD2;
  --accent-h:    #7B85E8;
  --accent-dim:  rgba(94,106,210,0.14);
  --accent-glow: rgba(94,106,210,0.25);
  --green:       #2CB67D;
  --green-dim:   rgba(44,182,125,0.12);
  --amber:       #E09A3B;
  --amber-dim:   rgba(224,154,59,0.12);
  --red:         #E05C5C;
  --red-dim:     rgba(224,92,92,0.12);
  --blue:        #4A9EF0;
  --blue-dim:    rgba(74,158,240,0.12);
  --r:           6px;
  --r-lg:        10px;
  --r-xl:        16px;
  --trans:       all 0.15s cubic-bezier(0.4,0,0.2,1);
}

[data-theme="light"] {
  --bg:          #FAFAFA;
  --bg-1:        #FFFFFF;
  --bg-2:        #F4F4F5;
  --bg-3:        #EBEBED;
  --bg-4:        #E1E1E5;
  --bg-hover:    #D8D8DC;
  --line:        rgba(0,0,0,0.06);
  --line-2:      rgba(0,0,0,0.10);
  --line-strong: rgba(0,0,0,0.18);
  --t:           #18181B;
  --t-2:         #52525B;
  --t-3:         #A1A1AA;
  --t-inv:       #FAFAFA;
  --accent:      #4F58C4;
  --accent-h:    #3A45B8;
  --accent-dim:  rgba(79,88,196,0.10);
  --accent-glow: rgba(79,88,196,0.20);
  --green:       #1A7A4A;
  --green-dim:   rgba(26,122,74,0.10);
  --amber:       #A06820;
  --amber-dim:   rgba(160,104,32,0.10);
  --red:         #C44040;
  --red-dim:     rgba(196,64,64,0.10);
  --blue:        #2874C8;
  --blue-dim:    rgba(40,116,200,0.10);
}

/* ─── BASE ─────────────────────────────── */
body {
  font-family:'Geist',system-ui,sans-serif;
  background:var(--bg);
  color:var(--t);
  min-height:100vh;
  transition:background 0.2s,color 0.2s;
  overflow-x:hidden;
}
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-track{background:var(--bg-1)}
::-webkit-scrollbar-thumb{background:var(--bg-4);border-radius:3px}

/* ─── SCREENS ─────────────────────────── */
.screen{display:none;min-height:100vh}
.screen.active{display:block}
#screen-landing.active{display:flex;flex-direction:column}
#screen-landing::before {
  content:'';
  position:fixed;top:0;left:0;right:0;height:180px;
  background:linear-gradient(to bottom,var(--bg) 0%,transparent 100%);
  pointer-events:none;z-index:1;
}
#screen-app.active{display:flex}
#screen-auth.active{display:flex;align-items:center;justify-content:center;min-height:100vh}

/* ─── AUTH SCREEN ─────────────────── */
.auth-wrap{width:100%;max-width:400px;padding:24px;display:flex;flex-direction:column;align-items:center}
.auth-logo{display:flex;align-items:center;gap:7px;font-size:16px;font-weight:600;letter-spacing:-0.02em;margin-bottom:32px}
.auth-card{
  width:100%;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.09);
  backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);
  border-radius:var(--r-xl);
  box-shadow:0 16px 48px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.06);
  padding:28px;
}
[data-theme="light"] .auth-card{background:rgba(255,255,255,0.75);border-color:rgba(0,0,0,0.09);box-shadow:0 8px 32px rgba(0,0,0,0.08)}
.auth-tabs{
  display:flex;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);
  border-radius:20px;padding:3px;gap:0;margin-bottom:24px;
}
[data-theme="light"] .auth-tabs{background:rgba(0,0,0,0.04);border-color:rgba(0,0,0,0.08)}
.auth-tab{flex:1;text-align:center;padding:6px 12px;border-radius:16px;font-size:13px;color:var(--t-3);cursor:pointer;transition:var(--trans)}
.auth-tab.active{background:rgba(255,255,255,0.10);color:var(--t);box-shadow:0 1px 4px rgba(0,0,0,0.2),inset 0 1px 0 rgba(255,255,255,0.10)}
[data-theme="light"] .auth-tab.active{background:rgba(255,255,255,0.85);box-shadow:0 1px 4px rgba(0,0,0,0.09)}
.auth-title{font-size:18px;font-weight:600;letter-spacing:-0.02em;margin-bottom:6px}
.auth-sub{font-size:13px;color:var(--t-3);margin-bottom:20px;line-height:1.5}
.auth-field{margin-bottom:12px}
.auth-label{font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.05em;text-transform:uppercase;margin-bottom:5px;display:block}
.auth-input{
  width:100%;padding:10px 13px;
  background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.10);
  border-radius:var(--r);font-size:14px;color:var(--t);outline:none;transition:var(--trans);
}
[data-theme="light"] .auth-input{background:rgba(255,255,255,0.7);border-color:rgba(0,0,0,0.12)}
.auth-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.auth-input::placeholder{color:var(--t-3)}
.auth-btn{
  width:100%;padding:11px;border-radius:var(--r);
  background:var(--accent);color:white;font-size:14px;font-weight:500;
  cursor:pointer;border:none;transition:var(--trans);margin-top:8px;
  box-shadow:0 0 0 1px rgba(94,106,210,0.4),0 4px 16px rgba(94,106,210,0.25);
}
.auth-btn:hover{background:var(--accent-h)}
.auth-btn:disabled{opacity:0.5;cursor:not-allowed}
.auth-msg{font-size:12.5px;text-align:center;margin-top:12px;padding:9px 12px;border-radius:var(--r);display:none}
.auth-msg.error{background:var(--red-dim);color:var(--red);border:1px solid rgba(224,92,92,0.2);display:block}
.auth-msg.success{background:var(--green-dim);color:var(--green);border:1px solid rgba(44,182,125,0.2);display:block}
.auth-back{margin-top:18px;font-size:12.5px;color:var(--t-3);cursor:pointer;transition:var(--trans);text-align:center}
.auth-back:hover{color:var(--t)}
.auth-back span{color:var(--accent)}

/* ─── GRID TEXTURE ───────────────────── */
.grid-bg { display:none; }

/* ═══════════════════════════════════════
   LANDING PAGE
═══════════════════════════════════════ */

/* NAV */
.land-nav {
  position:fixed;top:0;left:0;right:0;z-index:100;
  display:grid;grid-template-columns:1fr auto 1fr;
  align-items:center;
  padding:0 32px;height:56px;
  background:rgba(10,10,11,0.75);
  border-bottom:1px solid var(--line);
  backdrop-filter:blur(20px) saturate(1.4);
  -webkit-backdrop-filter:blur(20px) saturate(1.4);
}
[data-theme="light"] .land-nav{background:rgba(250,250,250,0.8)}

.nav-logo{
  display:flex;align-items:center;gap:8px;
  text-decoration:none;cursor:pointer;
}
.logo-mark{
  width:26px;height:26px;border-radius:7px;
  background:linear-gradient(135deg,#5E6AD2 0%,#8b8ff8 100%);
  display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:800;color:#fff;letter-spacing:-0.04em;
  box-shadow:0 2px 10px rgba(94,106,210,0.45);
  flex-shrink:0;
}
.logo-wordmark{
  font-size:16px;font-weight:700;letter-spacing:-0.04em;
  background:linear-gradient(90deg,#e8e8f4 0%,#a0a4e8 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
[data-theme="light"] .logo-wordmark{
  background:linear-gradient(90deg,#1a1a2e 0%,#5E6AD2 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.logo-dot{width:7px;height:7px;border-radius:50%;background:var(--accent);display:inline-block}

/* Glass pill toggle — center column */
.nav-links{
  display:flex;align-items:center;
  background:rgba(255,255,255,0.055);
  border:1px solid rgba(255,255,255,0.10);
  border-radius:24px;
  padding:3px;
  gap:0;
  backdrop-filter:blur(8px);
  -webkit-backdrop-filter:blur(8px);
  box-shadow:0 1px 12px rgba(0,0,0,0.18),inset 0 1px 0 rgba(255,255,255,0.06);
}
[data-theme="light"] .nav-links{
  background:rgba(0,0,0,0.04);
  border-color:rgba(0,0,0,0.09);
  box-shadow:0 1px 8px rgba(0,0,0,0.07),inset 0 1px 0 rgba(255,255,255,0.7);
}
.nav-link{
  padding:5px 16px;border-radius:20px;
  font-size:13px;color:var(--t-2);
  cursor:pointer;transition:var(--trans);
  white-space:nowrap;position:relative;
}
.nav-link:hover{color:var(--t)}
.nav-link.nav-active{
  background:rgba(255,255,255,0.10);
  color:var(--t);
  box-shadow:0 1px 4px rgba(0,0,0,0.18),inset 0 1px 0 rgba(255,255,255,0.12);
}
[data-theme="light"] .nav-link.nav-active{
  background:rgba(255,255,255,0.85);
  box-shadow:0 1px 4px rgba(0,0,0,0.10),inset 0 1px 0 rgba(255,255,255,1);
}

.nav-right{display:flex;align-items:center;gap:8px;justify-content:flex-end}
.theme-btn{
  width:34px;height:34px;border-radius:var(--r);
  border:1px solid var(--line-2);background:var(--bg-2);
  cursor:pointer;transition:var(--trans);
  display:flex;align-items:center;justify-content:center;
  font-size:14px;
}
.theme-btn:hover{background:var(--bg-3);border-color:var(--line-strong)}
.nav-cta{
  padding:7px 16px;border-radius:var(--r);
  background:var(--t);color:var(--t-inv);
  font-size:13.5px;font-weight:500;cursor:pointer;
  transition:var(--trans);border:none;
}
.nav-cta:hover{opacity:0.88}
.nav-login{
  padding:7px 14px;border-radius:var(--r);
  font-size:13.5px;color:var(--t-2);cursor:pointer;
  transition:var(--trans);border:none;background:none;
}
.nav-login:hover{color:var(--t)}

/* HERO */
.hero {
  flex:1;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  padding:120px 24px 60px;
  position:relative;text-align:center;
}
.hero-glow {
  position:absolute;top:-40px;left:50%;transform:translateX(-50%);
  width:900px;height:600px;
  background:radial-gradient(ellipse at 50% 0%,rgba(94,106,210,0.13) 0%,rgba(94,106,210,0.06) 35%,transparent 70%);
  pointer-events:none;
}
.hero-badge {
  display:inline-flex;align-items:center;gap:6px;
  padding:5px 14px 5px 9px;border-radius:20px;
  border:1px solid rgba(255,255,255,0.10);
  background:rgba(255,255,255,0.055);
  backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);
  box-shadow:0 1px 12px rgba(0,0,0,0.2),inset 0 1px 0 rgba(255,255,255,0.07);
  font-size:12px;color:var(--t-2);margin-bottom:28px;
  font-family:'Geist Mono',monospace;
}
[data-theme="light"] .hero-badge{
  border-color:rgba(0,0,0,0.09);
  background:rgba(255,255,255,0.7);
  box-shadow:0 1px 8px rgba(0,0,0,0.07),inset 0 1px 0 rgba(255,255,255,0.9);
}
.badge-dot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse-dot 2s ease infinite}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.6;transform:scale(0.85)}}

.hero h1 {
  font-size:clamp(42px,6vw,76px);font-weight:600;letter-spacing:-0.035em;
  line-height:1.05;max-width:820px;margin-bottom:22px;
}
.hero h1 .grad {
  background:linear-gradient(135deg,var(--t) 0%,var(--t-2) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.hero p {
  font-size:17px;color:var(--t-2);line-height:1.65;
  max-width:520px;margin-bottom:36px;font-weight:400;
}
.hero-actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:center}
.btn-primary{
  padding:11px 22px;border-radius:var(--r);
  background:var(--accent);color:white;
  font-size:14px;font-weight:500;cursor:pointer;
  border:none;transition:var(--trans);
  box-shadow:0 0 0 1px rgba(94,106,210,0.4),0 4px 20px rgba(94,106,210,0.25);
}
.btn-primary:hover{background:var(--accent-h);box-shadow:0 0 0 1px rgba(94,106,210,0.6),0 6px 28px rgba(94,106,210,0.35)}
.btn-ghost{
  padding:11px 20px;border-radius:var(--r);
  font-size:14px;font-weight:400;cursor:pointer;
  border:1px solid var(--line-2);background:var(--bg-2);color:var(--t-2);
  transition:var(--trans);
}
.btn-ghost:hover{background:var(--bg-3);color:var(--t);border-color:var(--line-strong)}

/* APP PREVIEW WINDOW */
.hero-preview {
  margin-top:60px;width:100%;max-width:960px;
  border-radius:var(--r-xl);
  border:1px solid rgba(255,255,255,0.10);
  background:rgba(255,255,255,0.04);
  backdrop-filter:blur(24px) saturate(1.3);
  -webkit-backdrop-filter:blur(24px) saturate(1.3);
  overflow:hidden;
  box-shadow:0 32px 80px rgba(0,0,0,0.45),inset 0 1px 0 rgba(255,255,255,0.07);
  position:relative;
}
[data-theme="light"] .hero-preview{
  background:rgba(255,255,255,0.65);
  border-color:rgba(0,0,0,0.09);
  box-shadow:0 24px 60px rgba(0,0,0,0.10),inset 0 1px 0 rgba(255,255,255,0.9);
}
.preview-bar{
  height:40px;
  background:rgba(255,255,255,0.04);
  border-bottom:1px solid rgba(255,255,255,0.07);
  display:flex;align-items:center;padding:0 16px;gap:6px;
}
[data-theme="light"] .preview-bar{
  background:rgba(0,0,0,0.03);
  border-bottom-color:rgba(0,0,0,0.07);
}
.pbar-dot{width:10px;height:10px;border-radius:50%}
.pbar-dot:nth-child(1){background:#FF5F57}
.pbar-dot:nth-child(2){background:#FEBC2E}
.pbar-dot:nth-child(3){background:#28C840}
.preview-title{
  margin-left:12px;font-size:11.5px;color:var(--t-3);
  font-family:'Geist Mono',monospace;flex:1;text-align:center;
}
.preview-body{display:flex;height:420px}
.prev-sidebar{
  width:168px;border-right:1px solid var(--line);
  background:var(--bg-2);flex-shrink:0;padding:12px 0;
}
.ps-brand{
  font-size:13px;font-weight:600;padding:8px 16px 16px;letter-spacing:-0.01em;
  display:flex;align-items:center;gap:6px;color:var(--t);
}
.ps-section{font-size:10px;color:var(--t-3);padding:4px 16px 4px;letter-spacing:0.08em;text-transform:uppercase;font-family:'Geist Mono',monospace}
.ps-item{
  display:flex;align-items:center;gap:8px;
  padding:6px 16px;font-size:12px;color:var(--t-2);cursor:pointer;
  transition:var(--trans);
}
.ps-item:hover{background:var(--bg-hover);color:var(--t)}
.ps-item.ps-active{color:var(--t);background:var(--bg-hover)}
.ps-item.ps-active .ps-icon{color:var(--accent)}
.ps-icon{font-size:12px;opacity:0.7}
.prev-main{flex:1;padding:20px 24px;overflow:hidden}
.pm-greeting{font-size:16px;font-weight:600;letter-spacing:-0.01em;margin-bottom:4px}
.pm-date{font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;margin-bottom:18px}
.pm-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:18px}
.pm-stat{
  background:var(--bg-2);border:1px solid var(--line);
  border-radius:8px;padding:12px 14px;
}
.pm-stat-label{font-size:9px;color:var(--t-3);text-transform:uppercase;letter-spacing:0.08em;font-family:'Geist Mono',monospace;margin-bottom:6px}
.pm-stat-val{font-size:22px;font-weight:600;letter-spacing:-0.02em;font-family:'Geist Mono',monospace}
.pm-stat-sub{font-size:9px;color:var(--t-3);margin-top:2px}
.pm-stat-bar{height:2px;background:var(--bg-4);border-radius:2px;margin-top:8px;overflow:hidden}
.pm-stat-fill{height:100%;border-radius:2px;background:var(--accent)}
.pm-section-title{font-size:11px;font-weight:500;color:var(--t-2);margin-bottom:8px;letter-spacing:-0.01em}
.pm-qlist{display:flex;flex-direction:column;gap:5px}
.pm-qitem{
  background:var(--bg-2);border:1px solid var(--line);
  border-radius:6px;padding:8px 12px;
  display:flex;align-items:center;gap:10px;
}
.pm-qpill{font-size:9px;padding:2px 7px;border-radius:4px;font-family:'Geist Mono',monospace;font-weight:500}
.pill-acc{background:rgba(94,106,210,0.12);color:var(--accent)}
.pill-val{background:rgba(44,182,125,0.12);color:var(--green)}
.pm-qtxt{font-size:11px;color:var(--t-2);flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* SOCIAL PROOF LOGOS */
.logos-row{
  display:flex;align-items:center;justify-content:center;gap:40px;
  padding:36px 40px;border-top:1px solid var(--line);
  flex-wrap:wrap;background:var(--bg);
}
.logos-section{display:flex;flex-direction:column;gap:12px;align-items:center}
.logos-label{font-size:10px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.08em;text-transform:uppercase;text-align:center}
.logos-strip{display:flex;align-items:center;gap:6px;flex-wrap:wrap;justify-content:center}
.logos-divider{width:1px;height:56px;background:var(--line);flex-shrink:0}
/* Each logo pill — wide for bank wordmarks, sq for university crests */
.wm-logo{
  display:flex;align-items:center;justify-content:center;
  height:34px;min-width:34px;padding:0 10px;border-radius:7px;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.08);
  transition:var(--trans);cursor:default;overflow:hidden;
}
.wm-logo.sq{width:34px;padding:0}
.wm-logo:hover{background:rgba(255,255,255,0.09);border-color:rgba(255,255,255,0.20);transform:translateY(-1px)}
[data-theme="light"] .wm-logo{background:rgba(0,0,0,0.04);border-color:rgba(0,0,0,0.10)}
[data-theme="light"] .wm-logo:hover{background:rgba(0,0,0,0.08);border-color:rgba(0,0,0,0.22)}
/* Dark mode: render white; light mode: render dark */
.wm-logo img{
  max-width:64px;max-height:20px;width:auto;height:auto;
  object-fit:contain;
  filter:brightness(0) invert(1);
  opacity:0.50;transition:opacity 0.15s;
}
.wm-logo.sq img{max-width:20px;max-height:20px}
.wm-logo:hover img{opacity:0.90}
[data-theme="light"] .wm-logo img{filter:brightness(0) invert(0);opacity:0.45}
[data-theme="light"] .wm-logo:hover img{opacity:0.85}
/* Fallback text badge if image 404s */
.wm-fb{
  display:none;align-items:center;justify-content:center;
  font-size:8px;font-weight:700;letter-spacing:0.04em;
  color:var(--t-3);font-family:'Geist Mono',monospace;
}

/* FEATURE SECTIONS */
.features{display:flex;flex-direction:column;gap:0}
.feat-section{
  padding:80px 40px;
  border-top:1px solid var(--line);
  max-width:1100px;margin:0 auto;width:100%;
}
.feat-tag{
  display:inline-flex;align-items:center;gap:6px;
  font-size:11px;font-family:'Geist Mono',monospace;
  color:var(--accent);letter-spacing:0.06em;text-transform:uppercase;
  margin-bottom:16px;
}
.feat-tag::before{content:'';width:16px;height:1px;background:var(--accent)}
.feat-h{font-size:clamp(26px,3.5vw,40px);font-weight:600;letter-spacing:-0.025em;line-height:1.15;margin-bottom:14px}
.feat-p{font-size:15.5px;color:var(--t-2);line-height:1.7;max-width:480px;margin-bottom:32px}
.feat-two{display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center}
.feat-two.rev{direction:rtl}
.feat-two.rev > *{direction:ltr}

/* INTERACTIVE DEMO CARD */
.demo-card {
  border:1px solid rgba(255,255,255,0.09);
  background:rgba(255,255,255,0.04);
  backdrop-filter:blur(20px) saturate(1.3);
  -webkit-backdrop-filter:blur(20px) saturate(1.3);
  border-radius:var(--r-xl);overflow:hidden;
  box-shadow:0 16px 48px rgba(0,0,0,0.28),inset 0 1px 0 rgba(255,255,255,0.06);
}
[data-theme="light"] .demo-card{
  background:rgba(255,255,255,0.60);
  border-color:rgba(0,0,0,0.08);
  box-shadow:0 8px 32px rgba(0,0,0,0.07),inset 0 1px 0 rgba(255,255,255,0.9);
}

/* FLASHCARD DEMO */
.fc-demo{padding:24px}
.fc-demo-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
.fc-demo-label{font-size:11px;font-family:'Geist Mono',monospace;color:var(--t-3)}
.fc-demo-progress{font-size:11px;font-family:'Geist Mono',monospace;color:var(--accent)}
.fc-card-wrap{perspective:800px}
.fc-card{
  background:var(--bg-2);border:1px solid var(--line-2);border-radius:var(--r-lg);
  padding:28px;min-height:160px;
  display:flex;flex-direction:column;justify-content:center;
  cursor:pointer;transition:var(--trans);
  position:relative;overflow:hidden;
}
.fc-card:hover{border-color:var(--line-strong)}
.fc-card::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse at 30% 50%,var(--accent-dim),transparent 70%);
  pointer-events:none;
}
.fc-cat{font-size:10px;font-family:'Geist Mono',monospace;color:var(--accent);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:10px}
.fc-q{font-size:15px;font-weight:500;letter-spacing:-0.01em;line-height:1.5;color:var(--t)}
.fc-hint{font-size:11px;color:var(--t-3);margin-top:12px;display:flex;align-items:center;gap:4px}
.fc-demo-btns{display:flex;justify-content:center;gap:8px;margin-top:14px}
.fc-btn-sm{
  padding:6px 16px;border-radius:var(--r);
  font-size:12px;border:1px solid var(--line-2);
  background:var(--bg-2);color:var(--t-2);cursor:pointer;transition:var(--trans);
}
.fc-btn-sm:hover{background:var(--bg-3);color:var(--t)}

/* Q BANK DEMO */
.qb-demo{padding:0;overflow:hidden}
.qb-toolbar{
  display:flex;gap:6px;padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,0.07);
  background:rgba(255,255,255,0.04);
  flex-wrap:wrap;
}
[data-theme="light"] .qb-toolbar{background:rgba(0,0,0,0.03);border-bottom-color:rgba(0,0,0,0.07)}
.qb-pill{
  padding:4px 11px;border-radius:20px;border:1px solid var(--line-2);
  font-size:11.5px;color:var(--t-3);cursor:pointer;font-family:'Geist Mono',monospace;
  transition:var(--trans);
}
.qb-pill.active{background:var(--accent-dim);color:var(--accent);border-color:rgba(94,106,210,0.3)}
.qb-list{padding:10px}
.qb-item{
  padding:11px 14px;border-radius:var(--r);border:1px solid transparent;
  cursor:pointer;transition:var(--trans);display:flex;align-items:center;gap:10px;
  margin-bottom:4px;
}
.qb-item:hover{background:var(--bg-2);border-color:var(--line)}
.qb-num{font-size:10px;color:var(--t-3);font-family:'Geist Mono',monospace;width:20px}
.qb-text{font-size:12.5px;color:var(--t-2);flex:1;line-height:1.4}
.qb-badge{
  font-size:9.5px;padding:2px 8px;border-radius:4px;
  font-family:'Geist Mono',monospace;flex-shrink:0;
}
.qb-badge.tech{background:var(--accent-dim);color:var(--accent)}
.qb-badge.beh{background:var(--green-dim);color:var(--green)}

/* TESTIMONIALS */
.testimonials{padding:80px 24px;border-top:1px solid var(--line)}
.test-inner{max-width:1100px;margin:0 auto}
.test-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:40px}
.test-card{
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.09);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  box-shadow:0 4px 24px rgba(0,0,0,0.18),inset 0 1px 0 rgba(255,255,255,0.06);
  border-radius:var(--r-xl);padding:24px;
  transition:var(--trans);
}
.test-card:hover{
  background:rgba(255,255,255,0.07);
  border-color:rgba(255,255,255,0.14);
}
[data-theme="light"] .test-card{
  background:rgba(255,255,255,0.60);
  border-color:rgba(0,0,0,0.08);
  box-shadow:0 4px 16px rgba(0,0,0,0.06),inset 0 1px 0 rgba(255,255,255,0.9);
}
[data-theme="light"] .test-card:hover{background:rgba(255,255,255,0.80)}
.test-stars{color:var(--accent);font-size:13px;margin-bottom:12px;letter-spacing:2px}
.test-text{font-size:14px;color:var(--t-2);line-height:1.7;margin-bottom:16px}
.test-author{display:flex;align-items:center;gap:10px}
.test-avatar{
  width:32px;height:32px;border-radius:50%;
  background:var(--accent-dim);border:1px solid var(--accent-glow);
  display:flex;align-items:center;justify-content:center;
  font-size:12px;font-weight:600;color:var(--accent);
}
.test-name{font-size:13px;font-weight:500}
.test-role{font-size:11.5px;color:var(--t-3)}

/* STATS ROW */
.stats-band{
  padding:64px 24px;border-top:1px solid var(--line);
  display:flex;justify-content:center;
  background:var(--bg);
}
.stats-inner{
  max-width:800px;width:100%;
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:0;
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.09);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  border-radius:var(--r-xl);
  box-shadow:0 4px 32px rgba(0,0,0,0.18),inset 0 1px 0 rgba(255,255,255,0.06);
  overflow:hidden;
}
[data-theme="light"] .stats-inner{
  background:rgba(255,255,255,0.65);
  border-color:rgba(0,0,0,0.08);
  box-shadow:0 4px 20px rgba(0,0,0,0.07),inset 0 1px 0 rgba(255,255,255,0.9);
}
.stat-block{
  padding:32px;text-align:center;
  border-right:1px solid rgba(255,255,255,0.07);
}
[data-theme="light"] .stat-block{border-right-color:rgba(0,0,0,0.07)}
.stat-block:last-child{border-right:none}
.stat-num{font-size:42px;font-weight:600;letter-spacing:-0.04em;line-height:1}
.stat-num span{color:var(--accent)}
.stat-desc{font-size:13px;color:var(--t-3);margin-top:6px}

/* CTA SECTION */
.cta-section{
  padding:100px 24px;border-top:1px solid var(--line);
  text-align:center;position:relative;overflow:hidden;
}
.cta-glow{
  position:absolute;top:0;left:50%;transform:translateX(-50%);
  width:600px;height:300px;
  background:radial-gradient(ellipse at 50% 0%,rgba(94,106,210,0.15),transparent 70%);
  pointer-events:none;
}
.cta-h{font-size:clamp(32px,4.5vw,56px);font-weight:600;letter-spacing:-0.03em;line-height:1.1;margin-bottom:16px}
.cta-p{font-size:16px;color:var(--t-2);margin-bottom:32px}
.cta-form{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;max-width:440px;margin:0 auto}
.cta-input{
  flex:1;min-width:220px;padding:10px 16px;
  background:var(--bg-2);border:1px solid var(--line-2);
  border-radius:var(--r);font-size:14px;color:var(--t);
  outline:none;transition:var(--trans);
}
.cta-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.cta-input::placeholder{color:var(--t-3)}

/* FOOTER */
.land-footer{
  padding:40px;border-top:1px solid var(--line);
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:16px;
}
.footer-copy{font-size:12.5px;color:var(--t-3)}
.footer-links{display:flex;gap:20px}
.footer-link{font-size:12.5px;color:var(--t-3);cursor:pointer;transition:var(--trans)}
.footer-link:hover{color:var(--t)}

/* ─── PRICING SECTION ────────────────── */
.pricing-section{
  padding:80px 24px;border-top:1px solid var(--line);
  max-width:1100px;margin:0 auto;width:100%;
}
.pricing-grid{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:12px;margin-top:40px;align-items:start;
}
.pricing-card{
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.09);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-radius:var(--r-xl);padding:28px;
  box-shadow:0 4px 24px rgba(0,0,0,0.18),inset 0 1px 0 rgba(255,255,255,0.06);
  transition:var(--trans);position:relative;
}
.pricing-card:hover{border-color:rgba(255,255,255,0.14);transform:translateY(-2px)}
.pricing-card.featured{
  border-color:rgba(94,106,210,0.4);
  background:rgba(94,106,210,0.07);
  box-shadow:0 4px 32px rgba(94,106,210,0.2),inset 0 1px 0 rgba(94,106,210,0.15);
}
[data-theme="light"] .pricing-card{background:rgba(255,255,255,0.65);border-color:rgba(0,0,0,0.09);box-shadow:0 4px 16px rgba(0,0,0,0.07)}
[data-theme="light"] .pricing-card.featured{background:rgba(94,106,210,0.06);border-color:rgba(94,106,210,0.35)}
.pricing-badge{
  position:absolute;top:-11px;left:50%;transform:translateX(-50%);
  background:var(--accent);color:white;
  font-size:10px;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;
  padding:3px 12px;border-radius:20px;white-space:nowrap;
  font-family:'Geist Mono',monospace;
}
.pricing-name{font-size:12px;font-family:'Geist Mono',monospace;color:var(--t-3);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:12px}
.pricing-price{display:flex;align-items:baseline;gap:4px;margin-bottom:4px}
.pricing-amount{font-size:42px;font-weight:600;letter-spacing:-0.04em;line-height:1}
.pricing-currency{font-size:18px;font-weight:500;color:var(--t-2);margin-bottom:4px}
.pricing-period{font-size:13px;color:var(--t-3)}
.pricing-desc{font-size:13px;color:var(--t-3);margin-bottom:20px;line-height:1.5;min-height:36px}
.pricing-btn{
  width:100%;padding:10px;border-radius:var(--r);
  font-size:13.5px;font-weight:500;cursor:pointer;
  transition:var(--trans);margin-bottom:20px;border:none;
}
.pricing-btn.primary{background:var(--accent);color:white;box-shadow:0 0 0 1px rgba(94,106,210,0.4),0 4px 16px rgba(94,106,210,0.25)}
.pricing-btn.primary:hover{background:var(--accent-h)}
.pricing-btn.ghost{background:transparent;color:var(--t-2);border:1px solid var(--line-2)}
.pricing-btn.ghost:hover{background:var(--bg-3);color:var(--t);border-color:var(--line-strong)}
.pricing-divider{height:1px;background:var(--line);margin-bottom:16px}
.pricing-features{display:flex;flex-direction:column;gap:9px}
.pf-item{display:flex;align-items:flex-start;gap:9px;font-size:13px;color:var(--t-2);line-height:1.4}
.pf-check{color:var(--green);font-size:13px;flex-shrink:0;margin-top:1px}
.pf-item.muted{color:var(--t-3)}
.pf-item.muted .pf-check{color:var(--t-3)}

/* ROI CALCULATOR */
.roi-section{
  padding:64px 24px;border-top:1px solid var(--line);
}
.roi-inner{max-width:900px;margin:0 auto}
.roi-card{
  background:rgba(255,255,255,0.04);
  border:1px solid rgba(255,255,255,0.09);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
  border-radius:var(--r-xl);padding:36px;
  box-shadow:0 8px 40px rgba(0,0,0,0.2),inset 0 1px 0 rgba(255,255,255,0.06);
}
[data-theme="light"] .roi-card{background:rgba(255,255,255,0.7);border-color:rgba(0,0,0,0.09)}
.roi-grid{display:grid;grid-template-columns:1fr 1fr;gap:40px;align-items:center}
.roi-controls{display:flex;flex-direction:column;gap:18px}
.roi-control-label{font-size:11px;font-family:'Geist Mono',monospace;color:var(--t-3);letter-spacing:0.07em;text-transform:uppercase;margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
.roi-val{color:var(--accent);font-weight:500}
.roi-slider{
  width:100%;height:4px;border-radius:2px;
  background:var(--bg-4);outline:none;cursor:pointer;
  -webkit-appearance:none;appearance:none;
}
.roi-slider::-webkit-slider-thumb{
  -webkit-appearance:none;width:16px;height:16px;border-radius:50%;
  background:var(--accent);cursor:pointer;
  box-shadow:0 0 0 3px var(--accent-dim);
}
.roi-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:var(--accent);cursor:pointer;border:none}
.roi-results{display:flex;flex-direction:column;gap:12px}
.roi-result-item{
  background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);
  border-radius:var(--r-lg);padding:16px 18px;
}
[data-theme="light"] .roi-result-item{background:rgba(0,0,0,0.03);border-color:rgba(0,0,0,0.07)}
.roi-result-label{font-size:10.5px;font-family:'Geist Mono',monospace;color:var(--t-3);text-transform:uppercase;letter-spacing:0.07em;margin-bottom:4px}
.roi-result-val{font-size:28px;font-weight:600;letter-spacing:-0.03em;line-height:1}
.roi-result-sub{font-size:11.5px;color:var(--t-3);margin-top:3px}
.roi-highlight{
  background:rgba(94,106,210,0.08);border:1px solid rgba(94,106,210,0.25);
  border-radius:var(--r-lg);padding:14px 18px;
  text-align:center;
}
.roi-highlight-label{font-size:11px;font-family:'Geist Mono',monospace;color:var(--accent);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:4px}
.roi-highlight-val{font-size:32px;font-weight:600;letter-spacing:-0.03em;color:var(--green)}
.roi-highlight-sub{font-size:12px;color:var(--t-3);margin-top:3px}

/* FAQ SECTION */
.faq-section{
  padding:80px 24px;border-top:1px solid var(--line);
  max-width:780px;margin:0 auto;width:100%;
}
.faq-list{display:flex;flex-direction:column;gap:0;margin-top:40px}
.faq-item{
  border-bottom:1px solid var(--line);
  overflow:hidden;
}
.faq-item:first-child{border-top:1px solid var(--line)}
.faq-q{
  display:flex;align-items:center;justify-content:space-between;
  padding:18px 0;cursor:pointer;transition:var(--trans);
  font-size:15px;font-weight:500;color:var(--t);gap:16px;
}
.faq-q:hover{color:var(--accent)}
.faq-caret{
  font-size:14px;color:var(--t-3);flex-shrink:0;
  transition:transform 0.25s cubic-bezier(0.4,0,0.2,1);
}
.faq-item.open .faq-caret{transform:rotate(180deg);color:var(--accent)}
.faq-item.open .faq-q{color:var(--accent)}
.faq-a{
  display:none;padding:0 0 18px;
  font-size:14px;color:var(--t-2);line-height:1.75;
}
.faq-item.open .faq-a{display:block}

/* ═══════════════════════════════════════
   APP SHELL
═══════════════════════════════════════ */
.app-sidebar {
  width:220px;flex-shrink:0;
  background:var(--bg-1);
  border-right:1px solid var(--line);
  display:flex;flex-direction:column;
  position:sticky;top:0;height:100vh;
  overflow-y:auto;
}
.sb-top{padding:16px 16px 8px}
.sb-brand{
  display:flex;align-items:center;gap:7px;
  font-size:14px;font-weight:600;letter-spacing:-0.02em;
  padding:6px 8px;border-radius:var(--r);
  margin-bottom:12px;color:var(--t);
}
.sb-section{
  font-size:10.5px;color:var(--t-3);letter-spacing:0.07em;
  text-transform:uppercase;padding:10px 8px 4px;
  font-family:'Geist Mono',monospace;
}
.sb-item{
  display:flex;align-items:center;gap:9px;
  padding:7px 8px;border-radius:var(--r);
  font-size:13.5px;color:var(--t-2);cursor:pointer;
  transition:var(--trans);user-select:none;
}
.sb-item:hover{color:var(--t);background:var(--bg-3)}
.sb-item.active{color:var(--t);background:var(--bg-3)}
.sb-item.active .sb-icon{color:var(--accent)}
.sb-icon{font-size:14px;opacity:0.7;width:18px;text-align:center;flex-shrink:0}
.sb-badge{
  margin-left:auto;font-size:9.5px;padding:1px 6px;
  border-radius:10px;background:var(--accent-dim);color:var(--accent);
  font-family:'Geist Mono',monospace;
}
.sb-spacer{flex:1}
.sb-bottom{padding:12px 16px;border-top:1px solid var(--line)}
.sb-theme{
  display:flex;align-items:center;justify-content:space-between;
  padding:6px 8px;border-radius:var(--r);cursor:pointer;
  margin-bottom:8px;transition:var(--trans);
}
.sb-theme:hover{background:var(--bg-3)}
.sb-theme-label{font-size:12px;color:var(--t-3);font-family:'Geist Mono',monospace}
.theme-track{
  width:30px;height:16px;border-radius:8px;
  background:var(--bg-4);border:1px solid var(--line-2);
  position:relative;transition:var(--trans);
}
.theme-thumb{
  position:absolute;top:2px;left:2px;
  width:10px;height:10px;border-radius:50%;
  background:var(--t-3);transition:var(--trans);
}
[data-theme="light"] .theme-track{background:var(--accent-dim);border-color:rgba(79,88,196,0.25)}
[data-theme="light"] .theme-thumb{background:var(--accent);transform:translateX(14px)}
.sb-user{display:flex;align-items:center;gap:9px}
.sb-avatar{
  width:26px;height:26px;border-radius:50%;
  background:var(--accent-dim);border:1px solid rgba(94,106,210,0.3);
  display:flex;align-items:center;justify-content:center;
  font-size:10.5px;font-weight:600;color:var(--accent);flex-shrink:0;
}
.sb-user-name{font-size:13px;font-weight:500;color:var(--t)}
.sb-user-plan{font-size:10.5px;color:var(--accent);font-family:'Geist Mono',monospace}

/* APP MAIN */
.app-main{flex:1;overflow-y:auto;background:var(--bg)}
.app-view{display:none;padding:40px 44px;animation:fadeUp 0.25s ease both}
.app-view.active{display:block}
@keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

/* VIEW HEADER */
.view-header{margin-bottom:32px}
.view-title{font-size:20px;font-weight:600;letter-spacing:-0.02em;margin-bottom:4px}
.view-sub{font-size:13.5px;color:var(--t-3)}

/* DASHBOARD */
.dash-welcome{
  display:flex;align-items:flex-start;justify-content:space-between;
  margin-bottom:28px;flex-wrap:wrap;gap:12px;
}
.dash-h{font-size:22px;font-weight:600;letter-spacing:-0.025em;line-height:1.2}
.dash-date{font-size:11.5px;color:var(--t-3);font-family:'Geist Mono',monospace;margin-top:4px}
.dash-today-btn{
  display:flex;align-items:center;gap:6px;
  padding:7px 14px;border-radius:var(--r);
  background:var(--bg-2);border:1px solid var(--line);
  font-size:12.5px;color:var(--t-2);cursor:pointer;
  transition:var(--trans);
}
.dash-today-btn:hover{background:var(--bg-3);color:var(--t)}

.kpi-row{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:24px}
.kpi-card{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-lg);padding:18px 20px;
  transition:var(--trans);
}
.kpi-card:hover{border-color:var(--line-2)}
.kpi-label{
  font-size:11px;color:var(--t-3);text-transform:uppercase;
  letter-spacing:0.07em;margin-bottom:10px;
  font-family:'Geist Mono',monospace;
}
.kpi-val{
  font-size:34px;font-weight:600;letter-spacing:-0.035em;
  font-family:'Geist Mono',monospace;margin-bottom:4px;
}
.kpi-sub{font-size:11.5px;color:var(--t-3)}
.kpi-bar{height:2px;background:var(--bg-4);border-radius:2px;margin-top:12px;overflow:hidden}
.kpi-fill{height:100%;border-radius:2px;background:var(--accent);transition:width 1s cubic-bezier(0.4,0,0.2,1) 0.3s}
.kpi-fill.green{background:var(--green)}
.streak-row{display:flex;gap:4px;margin-top:10px}
.s-dot{
  width:18px;height:18px;border-radius:4px;
  display:flex;align-items:center;justify-content:center;
  font-size:8px;font-weight:500;font-family:'Geist Mono',monospace;
}
.s-dot.done{background:var(--accent-dim);color:var(--accent);border:1px solid rgba(94,106,210,0.25)}
.s-dot.today{background:var(--accent);color:white}
.s-dot.empty{background:var(--bg-3);color:var(--t-3);border:1px solid var(--line)}

.dash-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:24px}
.dash-panel{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-lg);overflow:hidden;
}
.dp-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 18px;border-bottom:1px solid var(--line);
}
.dp-title{font-size:12.5px;font-weight:500;color:var(--t)}
.dp-action{font-size:11.5px;color:var(--accent);cursor:pointer;transition:var(--trans)}
.dp-action:hover{color:var(--accent-h)}

.cat-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:12px}
.cat-item{
  background:var(--bg-2);border:1px solid var(--line);
  border-radius:var(--r);padding:14px 16px;cursor:pointer;transition:var(--trans);
}
.cat-item:hover{border-color:var(--line-2);background:var(--bg-3)}
.cat-name{font-size:12.5px;font-weight:500;margin-bottom:4px}
.cat-pct{font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace}
.cat-bar{height:2px;background:var(--bg-4);border-radius:2px;margin-top:8px;overflow:hidden}
.cat-fill{height:100%;border-radius:2px;transition:width 1.2s cubic-bezier(0.4,0,0.2,1) 0.5s}
.fill-acc{background:var(--accent)}
.fill-grn{background:var(--green)}
.fill-amb{background:var(--amber)}
.fill-blu{background:var(--blue)}

.activity-list{padding:4px 8px}
.act-item{
  display:flex;align-items:center;gap:10px;
  padding:9px 10px;border-radius:var(--r);
  transition:var(--trans);cursor:default;
}
.act-item:hover{background:var(--bg-2)}
.act-icon{
  width:26px;height:26px;border-radius:6px;
  display:flex;align-items:center;justify-content:center;
  font-size:12px;flex-shrink:0;
}
.act-text{flex:1;font-size:12px;color:var(--t-2);line-height:1.3}
.act-time{font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace;flex-shrink:0}

/* NEWS */
.news-panel{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-lg);overflow:hidden;margin-bottom:24px;
}
.news-list-inner{padding:4px 8px}
.news-item-row{
  padding:10px 10px;border-radius:var(--r);cursor:pointer;
  transition:var(--trans);display:flex;gap:10px;align-items:flex-start;
}
.news-item-row:hover{background:var(--bg-2)}
.news-tag-pill{
  font-size:9px;font-family:'Geist Mono',monospace;letter-spacing:0.08em;
  text-transform:uppercase;padding:2px 7px;border-radius:4px;
  flex-shrink:0;margin-top:1px;
  background:var(--accent-dim);color:var(--accent);
}
.news-hl{font-size:12px;color:var(--t-2);line-height:1.45;flex:1}
.news-time-sm{font-size:10px;color:var(--t-3);font-family:'Geist Mono',monospace;flex-shrink:0;margin-top:1px}

/* QUESTION BANK */
.bank-toolbar{display:flex;align-items:center;gap:6px;flex-wrap:wrap;margin-bottom:16px}
.bank-search{
  flex:1;min-width:180px;padding:8px 13px;
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r);font-size:13px;color:var(--t);
  outline:none;transition:var(--trans);
}
.bank-search:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.bank-search::placeholder{color:var(--t-3)}
.bank-pill{
  padding:6px 13px;border-radius:20px;border:1px solid var(--line);
  font-size:12px;cursor:pointer;transition:var(--trans);
  background:var(--bg-1);color:var(--t-3);
  font-family:'Geist Mono',monospace;
}
.bank-pill:hover{border-color:var(--line-2);color:var(--t)}
.bank-pill.active{background:var(--accent-dim);color:var(--accent);border-color:rgba(94,106,210,0.3)}

.sub-row{display:none;gap:6px;flex-wrap:wrap;margin-bottom:12px;align-items:center}
.sub-row.show{display:flex}
.sub-label{font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.06em}

.q-group-header{
  display:flex;align-items:center;gap:10px;
  padding:16px 0 8px;margin-top:4px;
}
.q-group-title{font-size:11px;font-weight:500;color:var(--t-3);text-transform:uppercase;letter-spacing:0.08em;font-family:'Geist Mono',monospace}
.q-group-count{font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace}
.q-group-line{flex:1;height:1px;background:var(--line)}

.q-list{display:flex;flex-direction:column;gap:3px}
.q-row{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r);overflow:hidden;cursor:pointer;
  transition:var(--trans);
}
.q-row:hover{border-color:var(--line-2);background:var(--bg-2)}
.q-row.open{border-color:var(--line-2)}
.q-head{display:flex;align-items:center;gap:12px;padding:11px 15px}
.q-num{font-size:10px;color:var(--t-3);width:20px;flex-shrink:0;font-family:'Geist Mono',monospace}
.q-text{flex:1;font-size:13.5px;color:var(--t-2);line-height:1.45}
.q-pill{
  font-size:9.5px;padding:2px 8px;border-radius:4px;flex-shrink:0;
  font-family:'Geist Mono',monospace;font-weight:500;
}
.qp-tech{background:var(--accent-dim);color:var(--accent)}
.qp-beh{background:var(--green-dim);color:var(--green)}
.qp-brain{background:var(--amber-dim);color:var(--amber)}
.qp-deal{background:var(--blue-dim);color:var(--blue)}
.q-caret{color:var(--t-3);font-size:12px;transition:transform 0.2s;flex-shrink:0}
.q-row.open .q-caret{transform:rotate(180deg)}

.q-body{display:none;padding:0 15px 15px 47px;border-top:1px solid var(--line)}
.q-row.open .q-body{display:block;padding-top:12px}
.q-body-label{
  font-size:10px;font-family:'Geist Mono',monospace;color:var(--accent);
  letter-spacing:0.08em;text-transform:uppercase;margin-bottom:6px;
}
.q-body-answer{font-size:13px;color:var(--t-2);line-height:1.8;font-weight:400}
.q-body-tip{
  margin-top:10px;padding:10px 13px;
  background:var(--bg-2);border-left:2px solid var(--accent);
  border-radius:0 var(--r) var(--r) 0;
  font-size:12px;color:var(--t-3);line-height:1.65;
}
.q-body-tip strong{color:var(--t-2);font-weight:500}

/* FLASHCARDS */
.flash-wrap{max-width:580px;margin:0 auto}
.flash-toolbar{display:flex;gap:6px;justify-content:center;flex-wrap:wrap;margin-bottom:20px}
.flash-meta{text-align:center;font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;margin-bottom:10px}
.flash-bar{height:1px;background:var(--bg-4);margin-bottom:24px;overflow:hidden}
.flash-bar-fill{height:100%;background:var(--accent);transition:width 0.4s cubic-bezier(0.4,0,0.2,1)}
.card-scene{width:100%;height:300px;perspective:1200px;cursor:pointer;margin-bottom:20px}
.card-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform 0.5s cubic-bezier(0.4,0,0.2,1)}
.card-inner.flipped{transform:rotateY(180deg)}
.card-face{
  position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;
  border-radius:var(--r-xl);border:1px solid var(--line-2);
  display:flex;flex-direction:column;justify-content:center;align-items:center;
  padding:36px;text-align:center;
}
.card-front{
  background:var(--bg-1);
  background-image:radial-gradient(ellipse at 30% 40%,var(--accent-dim) 0%,transparent 65%);
}
.card-back{
  background:var(--bg-2);transform:rotateY(180deg);
  justify-content:flex-start;align-items:flex-start;text-align:left;
  overflow-y:auto;
}
.card-cat-label{font-size:10px;font-family:'Geist Mono',monospace;color:var(--accent);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:14px}
.card-q-text{font-size:18px;font-weight:500;letter-spacing:-0.015em;line-height:1.5;color:var(--t)}
.card-tap{font-size:10px;color:var(--t-3);margin-top:16px;font-family:'Geist Mono',monospace}
.card-back-label{font-size:10px;font-family:'Geist Mono',monospace;color:var(--accent);letter-spacing:0.08em;text-transform:uppercase;margin-bottom:10px}
.card-back-text{font-size:13px;line-height:1.75;color:var(--t-2)}
.flash-controls{display:flex;justify-content:center;gap:8px}
.flash-btn{
  padding:8px 22px;border-radius:var(--r);border:1px solid var(--line);
  background:var(--bg-1);color:var(--t-2);font-size:13px;cursor:pointer;transition:var(--trans);
}
.flash-btn:hover{background:var(--bg-2);color:var(--t);border-color:var(--line-2)}
.flash-btn:disabled{opacity:0.25;cursor:not-allowed}

/* STUDY MODES */
.study-mode-bar{display:flex;gap:6px;justify-content:center;margin-bottom:16px;flex-wrap:wrap}
.mode-btn{
  padding:6px 14px;border-radius:var(--r);border:1px solid var(--line);
  background:var(--bg-1);color:var(--t-3);font-size:12px;cursor:pointer;transition:var(--trans);
  display:flex;align-items:center;gap:6px;
}
.mode-btn:hover{background:var(--bg-2);color:var(--t);border-color:var(--line-2)}
.mode-btn.active{background:var(--accent-dim);color:var(--accent);border-color:rgba(94,106,210,0.3)}
.mode-btn .mode-icon{font-size:13px}
.mode-btn .mode-count{
  background:var(--bg-3);padding:1px 6px;border-radius:10px;font-size:10px;
  font-family:'Geist Mono',monospace;
}
.mode-btn.active .mode-count{background:rgba(94,106,210,0.2)}

/* CONFIDENCE BUTTONS */
.confidence-bar{
  display:flex;gap:8px;justify-content:center;margin-top:16px;
  opacity:0;pointer-events:none;transition:opacity 0.3s;
}
.confidence-bar.show{opacity:1;pointer-events:auto}
.conf-btn{
  padding:10px 20px;border-radius:var(--r);border:1px solid var(--line);
  background:var(--bg-1);font-size:13px;cursor:pointer;transition:var(--trans);
  display:flex;align-items:center;gap:6px;font-weight:500;
}
.conf-btn:hover{transform:translateY(-1px)}
.conf-btn.miss{color:var(--red);border-color:rgba(224,92,92,0.3)}
.conf-btn.miss:hover{background:var(--red-dim);border-color:rgba(224,92,92,0.5)}
.conf-btn.unsure{color:var(--amber);border-color:rgba(224,154,59,0.3)}
.conf-btn.unsure:hover{background:var(--amber-dim);border-color:rgba(224,154,59,0.5)}
.conf-btn.got{color:var(--green);border-color:rgba(44,182,125,0.3)}
.conf-btn.got:hover{background:var(--green-dim);border-color:rgba(44,182,125,0.5)}
.conf-key{
  font-size:10px;padding:2px 5px;border-radius:3px;
  background:var(--bg-3);color:var(--t-3);font-family:'Geist Mono',monospace;
}

/* KEYBOARD HINTS */
.kbd-hints{
  display:flex;gap:16px;justify-content:center;margin-top:12px;
  font-size:10px;color:var(--t-3);font-family:'Geist Mono',monospace;
}
.kbd-hint{display:flex;align-items:center;gap:4px}
.kbd{
  padding:2px 6px;border-radius:3px;
  background:var(--bg-3);border:1px solid var(--line);
  font-size:9px;min-width:18px;text-align:center;
}

/* MASTERY INDICATORS */
.mastery-dot{
  width:8px;height:8px;border-radius:50%;flex-shrink:0;
  border:1px solid var(--line);background:var(--bg-3);
}
.mastery-dot.new{background:var(--bg-3);border-color:var(--line)}
.mastery-dot.learning{background:var(--amber);border-color:var(--amber)}
.mastery-dot.mastered{background:var(--green);border-color:var(--green)}

/* MASTERY STATS */
.mastery-stats{
  display:flex;gap:16px;justify-content:center;margin-bottom:20px;
  padding:12px 16px;background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r);
}
.mastery-stat{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--t-2)}
.mastery-stat .mastery-dot{width:10px;height:10px}
.mastery-stat-val{font-family:'Geist Mono',monospace;font-weight:500}

/* DUE BADGE */
.due-badge{
  background:var(--red-dim);color:var(--red);
  padding:2px 8px;border-radius:10px;font-size:10px;
  font-family:'Geist Mono',monospace;font-weight:500;
  animation:pulse-due 2s ease infinite;
}
@keyframes pulse-due{0%,100%{opacity:1}50%{opacity:0.7}}

/* SESSION TIMER */
.session-timer{
  position:fixed;top:70px;right:24px;
  background:var(--bg-2);border:1px solid var(--line);
  border-radius:var(--r);padding:8px 14px;
  font-family:'Geist Mono',monospace;font-size:13px;
  color:var(--t);display:none;align-items:center;gap:8px;
  box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:50;
}
.session-timer.show{display:flex}
.timer-label{font-size:10px;color:var(--t-3);text-transform:uppercase;letter-spacing:0.05em}

/* MOCK INTERVIEW */
.mock-wrap{max-width:740px;margin:0 auto}

/* QUIZ MODE */
.quiz-wrap{max-width:640px;margin:0 auto}
.quiz-card{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-xl);padding:32px;margin-bottom:20px;
}
.quiz-progress{display:flex;align-items:center;gap:12px;margin-bottom:20px}
.quiz-progress-bar{flex:1;height:4px;background:var(--bg-4);border-radius:2px;overflow:hidden}
.quiz-progress-fill{height:100%;background:var(--accent);transition:width 0.3s}
.quiz-progress-text{font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace}
.quiz-cat{font-size:10px;color:var(--accent);font-family:'Geist Mono',monospace;letter-spacing:0.08em;text-transform:uppercase;margin-bottom:12px}
.quiz-question{font-size:18px;font-weight:500;line-height:1.5;margin-bottom:24px}
.quiz-answers{display:flex;flex-direction:column;gap:10px}
.quiz-answer{
  padding:14px 18px;border:1px solid var(--line);border-radius:var(--r);
  cursor:pointer;transition:var(--trans);font-size:14px;line-height:1.5;
  display:flex;align-items:flex-start;gap:12px;
}
.quiz-answer:hover{background:var(--bg-2);border-color:var(--line-2)}
.quiz-answer.selected{background:var(--accent-dim);border-color:var(--accent)}
.quiz-answer.correct{background:var(--green-dim);border-color:var(--green)}
.quiz-answer.incorrect{background:var(--red-dim);border-color:var(--red)}
.quiz-answer.disabled{pointer-events:none;opacity:0.7}
.quiz-letter{
  width:24px;height:24px;border-radius:50%;
  background:var(--bg-3);border:1px solid var(--line);
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:600;flex-shrink:0;
}
.quiz-answer.correct .quiz-letter{background:var(--green);color:white;border-color:var(--green)}
.quiz-answer.incorrect .quiz-letter{background:var(--red);color:white;border-color:var(--red)}
.quiz-feedback{
  margin-top:20px;padding:16px;border-radius:var(--r);
  font-size:13px;line-height:1.6;display:none;
}
.quiz-feedback.show{display:block}
.quiz-feedback.correct{background:var(--green-dim);border:1px solid rgba(44,182,125,0.3)}
.quiz-feedback.incorrect{background:var(--red-dim);border:1px solid rgba(224,92,92,0.3)}
.quiz-feedback-title{font-weight:600;margin-bottom:6px}
.quiz-feedback.correct .quiz-feedback-title{color:var(--green)}
.quiz-feedback.incorrect .quiz-feedback-title{color:var(--red)}
.quiz-actions{display:flex;gap:10px;margin-top:20px}
.quiz-btn{
  padding:10px 20px;border-radius:var(--r);font-size:13px;font-weight:500;
  cursor:pointer;transition:var(--trans);border:none;
}
.quiz-btn.primary{background:var(--accent);color:white}
.quiz-btn.primary:hover{background:var(--accent-h)}
.quiz-btn.ghost{background:var(--bg-2);color:var(--t-2);border:1px solid var(--line)}
.quiz-btn.ghost:hover{background:var(--bg-3);color:var(--t)}

/* QUIZ RESULTS */
.quiz-results{text-align:center;padding:40px 20px}
.quiz-results-score{font-size:64px;font-weight:600;margin-bottom:8px}
.quiz-results-label{font-size:14px;color:var(--t-2);margin-bottom:24px}
.quiz-results-breakdown{display:flex;justify-content:center;gap:32px;margin-bottom:32px}
.quiz-stat{text-align:center}
.quiz-stat-val{font-size:28px;font-weight:600;font-family:'Geist Mono',monospace}
.quiz-stat-label{font-size:11px;color:var(--t-3);text-transform:uppercase;letter-spacing:0.05em}
.quiz-stat.correct .quiz-stat-val{color:var(--green)}
.quiz-stat.incorrect .quiz-stat-val{color:var(--red)}

/* KNOWLEDGE MAP - Obsidian-style node graph */
.map-container{
  padding:20px;
  position:relative;
  min-height:calc(100vh - 200px);
  overflow:hidden;
}
.map-canvas{
  position:relative;
  width:100%;
  height:600px;
  background:
    radial-gradient(circle at 50% 50%, var(--accent-dim) 0%, transparent 50%),
    linear-gradient(var(--bg-2) 1px, transparent 1px),
    linear-gradient(90deg, var(--bg-2) 1px, transparent 1px);
  background-size: 100% 100%, 40px 40px, 40px 40px;
  border-radius:var(--r-xl);
  border:1px solid var(--line);
  overflow:hidden;
}
.map-svg{
  position:absolute;
  top:0;left:0;
  width:100%;height:100%;
  pointer-events:none;
}
.map-svg line{
  stroke:var(--line-2);
  stroke-width:2;
  stroke-dasharray:6,4;
  opacity:0.6;
}
.map-svg line.active{
  stroke:var(--accent);
  stroke-dasharray:none;
  opacity:1;
}
.map-node{
  position:absolute;
  padding:16px 20px;
  background:var(--bg-1);
  border:2px solid var(--line);
  border-radius:var(--r-lg);
  cursor:pointer;
  transition:all 0.2s ease;
  text-align:center;
  min-width:120px;
  box-shadow:0 4px 20px rgba(0,0,0,0.15);
  z-index:10;
}
.map-node:hover{
  transform:scale(1.05);
  border-color:var(--accent);
  box-shadow:0 8px 30px rgba(94,106,210,0.25);
  z-index:20;
}
.map-node.central{
  background:linear-gradient(135deg, var(--accent-dim) 0%, var(--bg-1) 100%);
  border-color:var(--accent);
  min-width:140px;
}
.map-node.mastered{border-color:var(--green);background:linear-gradient(135deg, var(--green-dim) 0%, var(--bg-1) 100%)}
.map-node.learning{border-color:var(--amber);background:linear-gradient(135deg, var(--amber-dim) 0%, var(--bg-1) 100%)}
.map-node-icon{font-size:24px;margin-bottom:6px}
.map-node-title{font-size:13px;font-weight:600;margin-bottom:4px}
.map-node-sub{font-size:10px;color:var(--t-3);font-family:'Geist Mono',monospace}
.map-node-progress{
  margin-top:8px;height:3px;background:var(--bg-4);border-radius:2px;overflow:hidden;
}
.map-node-progress-fill{height:100%;border-radius:2px;transition:width 0.3s}

/* Map Legend */
.map-legend{
  display:flex;gap:20px;margin-bottom:20px;font-size:12px;color:var(--t-2);
  justify-content:center;flex-wrap:wrap;
}
.map-legend-item{display:flex;align-items:center;gap:6px}

/* Map Controls */
.map-controls{
  display:flex;justify-content:center;gap:10px;margin-bottom:20px;
}
.map-zoom-btn{
  width:36px;height:36px;border-radius:var(--r);
  background:var(--bg-1);border:1px solid var(--line);
  cursor:pointer;font-size:16px;color:var(--t-2);
  display:flex;align-items:center;justify-content:center;
  transition:var(--trans);
}
.map-zoom-btn:hover{background:var(--bg-2);color:var(--t)}

/* Deadline Card */
.deadline-card{
  background:linear-gradient(135deg, var(--red-dim) 0%, var(--bg-1) 100%);
  border:1px solid rgba(224,92,92,0.3);
  border-radius:var(--r-lg);
  padding:16px 20px;
  margin-bottom:20px;
  display:flex;align-items:center;gap:16px;
}
.deadline-icon{font-size:28px}
.deadline-content{flex:1}
.deadline-title{font-size:14px;font-weight:600;color:var(--t);margin-bottom:2px}
.deadline-sub{font-size:12px;color:var(--t-2)}
.deadline-countdown{
  font-family:'Geist Mono',monospace;
  font-size:20px;font-weight:600;
  color:var(--red);
}

/* DIAGNOSTIC ASSESSMENT */
.diagnostic-overlay{
  position:fixed;inset:0;background:var(--bg);z-index:200;
  display:none;overflow-y:auto;
}
.diagnostic-overlay.show{display:block}
.diagnostic-wrap{max-width:600px;margin:0 auto;padding:40px 24px}
.diagnostic-header{text-align:center;margin-bottom:40px}
.diagnostic-icon{font-size:48px;margin-bottom:16px}
.diagnostic-title{font-size:28px;font-weight:600;margin-bottom:8px}
.diagnostic-sub{font-size:15px;color:var(--t-2);line-height:1.6}
.diagnostic-card{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-xl);padding:32px;margin-bottom:24px;
}
.diagnostic-progress{margin-bottom:24px}
.diagnostic-results{text-align:center}
.diagnostic-band{
  display:inline-block;padding:8px 20px;border-radius:20px;
  font-size:14px;font-weight:600;margin-bottom:16px;
}
.diagnostic-band.beginner{background:var(--red-dim);color:var(--red)}
.diagnostic-band.intermediate{background:var(--amber-dim);color:var(--amber)}
.diagnostic-band.advanced{background:var(--blue-dim);color:var(--blue)}
.diagnostic-band.expert{background:var(--green-dim);color:var(--green)}
.diagnostic-score-big{font-size:72px;font-weight:600;line-height:1}
.diagnostic-score-label{font-size:14px;color:var(--t-2);margin-bottom:24px}
.diagnostic-breakdown{
  display:grid;grid-template-columns:repeat(3,1fr);gap:16px;
  margin:24px 0;text-align:center;
}
.diagnostic-breakdown-item{
  padding:16px;background:var(--bg-2);border-radius:var(--r);
}
.diagnostic-breakdown-val{font-size:20px;font-weight:600;font-family:'Geist Mono',monospace}
.diagnostic-breakdown-label{font-size:10px;color:var(--t-3);text-transform:uppercase;letter-spacing:0.05em;margin-top:4px}
.mock-config{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:20px;align-items:center}
.app-select{
  padding:8px 14px;background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r);font-size:13px;color:var(--t);outline:none;cursor:pointer;
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%2364646e'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 10px center;
  padding-right:28px;transition:var(--trans);
}
.app-select:focus{border-color:var(--accent)}
.btn-start-mock{
  padding:8px 18px;border-radius:var(--r);
  background:var(--accent);color:white;
  border:none;font-size:13px;font-weight:500;cursor:pointer;transition:var(--trans);
}
.btn-start-mock:hover{background:var(--accent-h)}

.iv-card{
  background:var(--bg-1);border:1px solid var(--line);
  border-radius:var(--r-lg);overflow:hidden;
}
.iv-topbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:12px 18px;border-bottom:1px solid var(--line);background:var(--bg-2);
}
.iv-persona{display:flex;align-items:center;gap:10px}
.iv-av{
  width:28px;height:28px;border-radius:50%;
  background:var(--accent-dim);border:1px solid rgba(94,106,210,0.3);
  display:flex;align-items:center;justify-content:center;
  font-size:11px;font-weight:600;color:var(--accent);
}
.iv-name{font-size:13px;font-weight:500}
.iv-role{font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace}
.iv-badge{
  font-size:9.5px;padding:2px 8px;border-radius:4px;
  font-family:'Geist Mono',monospace;
}
.badge-live{background:var(--green-dim);color:var(--green);border:1px solid rgba(44,182,125,0.2)}
.badge-idle{background:var(--bg-3);color:var(--t-3);border:1px solid var(--line)}

.chat-body{min-height:280px;max-height:400px;overflow-y:auto;padding:20px 18px;display:flex;flex-direction:column;gap:14px}
.chat-start{padding:48px 24px;text-align:center}
.chat-start h3{font-size:18px;font-weight:600;letter-spacing:-0.01em;margin-bottom:8px}
.chat-start p{font-size:13.5px;color:var(--t-3);max-width:340px;margin:0 auto 24px;line-height:1.6}
.chat-msg{display:flex;gap:8px}
.chat-msg.user{flex-direction:row-reverse}
.cm-av{
  width:24px;height:24px;border-radius:50%;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:600;
  font-family:'Geist Mono',monospace;
}
.cm-av.ai{background:var(--accent-dim);border:1px solid rgba(94,106,210,0.25);color:var(--accent)}
.cm-av.usr{background:var(--bg-3);border:1px solid var(--line);color:var(--t-2)}
.cm-bubble{
  max-width:78%;padding:10px 14px;border-radius:10px;
  font-size:13px;line-height:1.7;font-weight:400;
}
.cm-bubble.ai{background:var(--bg-2);color:var(--t);border:1px solid var(--line);border-top-left-radius:2px}
.cm-bubble.usr{background:var(--accent-dim);color:var(--t);border:1px solid rgba(94,106,210,0.2);border-top-right-radius:2px}
.score-block{margin-top:8px;padding:8px 10px;background:var(--bg);border:1px solid var(--line);border-radius:var(--r);font-size:11px}
.score-line{display:flex;justify-content:space-between;padding:2px 0}
.sc-label{color:var(--t-3);font-family:'Geist Mono',monospace}
.sc-val{font-weight:500;font-family:'Geist Mono',monospace}
.sc-g{color:var(--green)}.sc-y{color:var(--amber)}.sc-r{color:var(--red)}

.typing-indicator{display:flex;gap:4px;align-items:center;padding:10px 14px;background:var(--bg-2);border:1px solid var(--line);border-radius:10px;border-top-left-radius:2px;width:fit-content}
.t-dot{width:5px;height:5px;border-radius:50%;background:var(--t-3);animation:tdot 1.4s ease infinite}
.t-dot:nth-child(2){animation-delay:0.18s}
.t-dot:nth-child(3){animation-delay:0.36s}
@keyframes tdot{0%,60%,100%{opacity:0.2;transform:scale(0.8)}30%{opacity:1;transform:scale(1)}}

.chat-input-bar{
  border-top:1px solid var(--line);padding:12px 16px;
  display:flex;gap:8px;align-items:flex-end;background:var(--bg-2);
}
.chat-ta{
  flex:1;padding:9px 13px;resize:none;
  background:var(--bg-3);border:1px solid var(--line);
  border-radius:var(--r);font-size:13px;color:var(--t);
  outline:none;min-height:40px;max-height:120px;
  line-height:1.5;transition:var(--trans);
}
.chat-ta:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.chat-ta::placeholder{color:var(--t-3)}
.chat-send{
  width:36px;height:36px;flex-shrink:0;
  background:var(--accent);border:none;border-radius:var(--r);
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  color:white;font-size:14px;transition:var(--trans);
}
.chat-send:hover{background:var(--accent-h)}
.chat-send:disabled{opacity:0.3;cursor:not-allowed}

/* MEDIA */
@media(max-width:1000px){
  .app-sidebar{width:180px}
  .feat-two{grid-template-columns:1fr;gap:32px}
  .feat-two.rev{direction:ltr}
  .test-grid{grid-template-columns:1fr}
  .stats-inner{grid-template-columns:1fr}
  .stat-block{border-right:none;border-bottom:1px solid var(--line);padding:20px 0}
  .stat-block:last-child{border-bottom:none}
}
@media(max-width:720px){
  .land-nav{padding:0 20px}
  .nav-links{display:none}
  .hero{padding:100px 20px 40px}
  .hero h1{font-size:36px}
  .kpi-row{grid-template-columns:1fr}
  .dash-grid{grid-template-columns:1fr}
  .app-main .app-view{padding:24px 20px}
  .feat-section{padding:48px 20px}
}
</style>
</head>
<body>
<div class="grid-bg"></div>

<!-- ══════════════════════════════════════
     AUTH SCREEN
══════════════════════════════════════ -->
<div class="screen" id="screen-auth">
  <div class="auth-wrap">
    <div class="auth-logo"><span class="logo-dot"></span>Superday</div>
    <div class="auth-card">
      <div class="auth-tabs">
        <div class="auth-tab active" id="tab-login" onclick="switchAuthTab('login')">Log in</div>
        <div class="auth-tab" id="tab-signup" onclick="switchAuthTab('signup')">Sign up</div>
      </div>

      <!-- LOGIN FORM -->
      <div id="auth-login-form">
        <div class="auth-title">Welcome back.</div>
        <div class="auth-sub">Log in to continue your prep.</div>
        <div class="auth-field">
          <label class="auth-label">Email</label>
          <input class="auth-input" type="email" id="login-email" placeholder="you@email.com"/>
        </div>
        <div class="auth-field">
          <label class="auth-label">Password</label>
          <input class="auth-input" type="password" id="login-password" placeholder="••••••••"
            onkeydown="if(event.key==='Enter')doLogin()"/>
        </div>
        <button class="auth-btn" id="login-btn" onclick="doLogin()">Log in →</button>
        <div class="auth-msg" id="login-msg"></div>
      </div>

      <!-- SIGNUP FORM -->
      <div id="auth-signup-form" style="display:none">
        <div class="auth-title">Create your account.</div>
        <div class="auth-sub">Free forever. No credit card required.</div>
        <div class="auth-field">
          <label class="auth-label">Full Name</label>
          <input class="auth-input" type="text" id="signup-name" placeholder="Alex Chen"/>
        </div>
        <div class="auth-field">
          <label class="auth-label">Email</label>
          <input class="auth-input" type="email" id="signup-email" placeholder="you@email.com"/>
        </div>
        <div class="auth-field">
          <label class="auth-label">Password</label>
          <input class="auth-input" type="password" id="signup-password" placeholder="Min. 8 characters"
            onkeydown="if(event.key==='Enter')doSignup()"/>
        </div>
        <button class="auth-btn" id="signup-btn" onclick="doSignup()">Create account →</button>
        <div class="auth-msg" id="signup-msg"></div>
      </div>
    </div>
    <div class="auth-back" onclick="showScreen('landing')">← <span>Back to homepage</span></div>
    <div style="margin-top:12px;text-align:center">
      <button onclick="guestLogin()" style="background:none;border:none;cursor:pointer;font-size:12.5px;color:var(--t-3);transition:var(--trans);padding:6px 12px;border-radius:var(--r)" onmouseover="this.style.color='var(--t)'" onmouseout="this.style.color='var(--t-3)'">
        Continue as guest →
      </button>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════
     LANDING PAGE
══════════════════════════════════════ -->
<div class="screen active" id="screen-landing">

  <nav class="land-nav">
    <div class="nav-logo">
      <span class="logo-dot"></span>Superday
    </div>
    <div class="nav-links" id="nav-links">
      <div class="nav-link nav-active" onclick="setNavActive(this)">Product</div>
      <div class="nav-link" onclick="setNavActive(this);navScrollTo('section-pricing')">Pricing</div>
      <div class="nav-link" onclick="setNavActive(this);navScrollTo('section-faq')">FAQ</div>
    </div>
    <div class="nav-right">
      <button class="theme-btn" onclick="toggleTheme()" title="Toggle theme">
        <span id="theme-icon">☽</span>
      </button>
      <button class="nav-login" onclick="showAuthTab('login')">Log in</button>
      <button class="nav-cta" onclick="showAuthTab('signup')">Start free →</button>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-glow"></div>
    <div class="hero-badge">
      <span class="badge-dot"></span>
      <span>Used by 500+ candidates this recruiting season</span>
    </div>
    <h1>Your competition is<br><span class="grad">already preparing.</span></h1>
    <p>62 real IB questions. Model answers. An AI that scores you like a banker. Free.</p>
    <div class="hero-actions">
      <button class="btn-primary" onclick="showAuthTab('signup')">Start for free — no card needed →</button>
      <button class="btn-ghost" onclick="document.getElementById('demo-section').scrollIntoView({behavior:'smooth'})">See it in action</button>
    </div>

    <!-- INTERACTIVE MINI APP PREVIEW -->
    <div class="hero-preview">
      <div class="preview-bar">
        <div class="pbar-dot"></div><div class="pbar-dot"></div><div class="pbar-dot"></div>
        <div class="preview-title" id="prev-title">superday.app — Dashboard</div>
      </div>
      <div class="preview-body">

        <!-- SIDEBAR -->
        <div class="prev-sidebar">
          <div class="ps-brand">
            <div class="logo-mark" style="width:18px;height:18px;border-radius:5px;font-size:9px;flex-shrink:0">S</div>
            Superday
          </div>
          <div class="ps-section">Prepare</div>
          <div class="ps-item ps-active" id="pnav-dashboard" onclick="prevNav('dashboard',this)">
            <span class="ps-icon">◈</span>Dashboard
          </div>
          <div class="ps-item" id="pnav-bank" onclick="prevNav('bank',this)">
            <span class="ps-icon">☰</span>Question Bank
          </div>
          <div class="ps-item" id="pnav-flash" onclick="prevNav('flash',this)">
            <span class="ps-icon">⧉</span>Flashcards
          </div>
          <div class="ps-item" id="pnav-mock" onclick="prevNav('mock',this)">
            <span class="ps-icon">◎</span>Mock Interview
          </div>
        </div>

        <!-- MAIN PANEL -->
        <div class="prev-main" style="overflow:hidden;display:flex;flex-direction:column">

          <!-- ── DASHBOARD ── -->
          <div id="pv-dashboard" style="display:flex;flex-direction:column;gap:0;height:100%">
            <div style="flex-shrink:0">
              <div class="pm-greeting">Good morning, Alex.</div>
              <div class="pm-date">Sunday · Feb 15, 2026</div>
            </div>
            <div class="pm-stats" style="flex-shrink:0">
              <div class="pm-stat">
                <div class="pm-stat-label">Answered</div>
                <div class="pm-stat-val" style="color:var(--accent)">14</div>
                <div class="pm-stat-sub">of 62 questions</div>
                <div class="pm-stat-bar"><div class="pm-stat-fill" style="width:22%"></div></div>
              </div>
              <div class="pm-stat">
                <div class="pm-stat-label">Streak</div>
                <div class="pm-stat-val" style="color:var(--green)">5</div>
                <div class="pm-stat-sub">days in a row</div>
                <div class="pm-stat-bar"><div class="pm-stat-fill" style="width:71%;background:var(--green)"></div></div>
              </div>
              <div class="pm-stat">
                <div class="pm-stat-label">Score</div>
                <div class="pm-stat-val">8.4</div>
                <div class="pm-stat-sub">avg across mocks</div>
                <div class="pm-stat-bar"><div class="pm-stat-fill" style="width:84%"></div></div>
              </div>
            </div>
            <div class="pm-section-title" style="flex-shrink:0">Up next</div>
            <div class="pm-qlist" style="overflow-y:auto">
              <div class="pm-qitem" style="cursor:pointer;transition:var(--trans)" onmouseover="this.style.background='var(--bg-hover)'" onmouseout="this.style.background=''">
                <span class="pm-qpill pill-acc">Accounting</span>
                <span class="pm-qtxt">How does a $10 D&amp;A increase flow through all 3 statements?</span>
                <span style="font-size:10px;color:var(--accent)">→</span>
              </div>
              <div class="pm-qitem" style="cursor:pointer;transition:var(--trans)" onmouseover="this.style.background='var(--bg-hover)'" onmouseout="this.style.background=''">
                <span class="pm-qpill pill-val">Valuation</span>
                <span class="pm-qtxt">Walk me through the three valuation methodologies.</span>
                <span style="font-size:10px;color:var(--accent)">→</span>
              </div>
              <div class="pm-qitem" style="cursor:pointer;transition:var(--trans)" onmouseover="this.style.background='var(--bg-hover)'" onmouseout="this.style.background=''">
                <span class="pm-qpill" style="background:rgba(240,180,40,0.12);color:#e0a820">Behavioral</span>
                <span class="pm-qtxt">Why investment banking? Why this firm?</span>
                <span style="font-size:10px;color:var(--accent)">→</span>
              </div>
            </div>
          </div>

          <!-- ── QUESTION BANK ── -->
          <div id="pv-bank" style="display:none;flex-direction:column;height:100%">
            <div style="flex-shrink:0;margin-bottom:8px">
              <div style="font-size:13px;font-weight:600;letter-spacing:-0.02em;color:var(--t);margin-bottom:8px">Question Bank</div>
              <div style="display:flex;gap:4px;flex-wrap:wrap">
                <span class="qb-pill active" onclick="pvBankFilter(this,'all')">All <span style="opacity:0.6;font-size:9px">62</span></span>
                <span class="qb-pill" onclick="pvBankFilter(this,'acc')">Accounting</span>
                <span class="qb-pill" onclick="pvBankFilter(this,'val')">Valuation</span>
                <span class="qb-pill" onclick="pvBankFilter(this,'beh')">Behavioral</span>
              </div>
            </div>
            <div id="pv-bank-list" style="display:flex;flex-direction:column;gap:4px;overflow-y:auto;flex:1">
              <div class="pm-qitem pv-q-item" data-cat="acc" style="flex-direction:column;align-items:stretch;cursor:pointer" onclick="pvToggleQ(this)">
                <div style="display:flex;align-items:center;gap:8px">
                  <span class="pm-qpill pill-acc">Accounting</span>
                  <span class="pm-qtxt">Walk me through the three financial statements.</span>
                  <span class="pv-caret" style="font-size:10px;color:var(--t-3);flex-shrink:0;transition:transform 0.2s">⌄</span>
                </div>
                <div class="pv-ans" style="display:none;padding:8px 0 2px;font-size:11px;color:var(--t-2);line-height:1.6;border-top:1px solid var(--line);margin-top:6px">
                  IS: revenue − expenses = net income. BS: assets = liabilities + equity, snapshot in time. CFS: reconciles net income to cash via operating, investing, financing activities. Net income flows into retained earnings on BS.
                  <div style="margin-top:5px;padding:5px 8px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:10.5px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Draw the linkages — examiners love candidates who can sketch this cold.</div>
                </div>
              </div>
              <div class="pm-qitem pv-q-item" data-cat="acc" style="flex-direction:column;align-items:stretch;cursor:pointer" onclick="pvToggleQ(this)">
                <div style="display:flex;align-items:center;gap:8px">
                  <span class="pm-qpill pill-acc">Accounting</span>
                  <span class="pm-qtxt">How does a $10 D&amp;A increase flow through all 3 statements?</span>
                  <span class="pv-caret" style="font-size:10px;color:var(--t-3);flex-shrink:0;transition:transform 0.2s">⌄</span>
                </div>
                <div class="pv-ans" style="display:none;padding:8px 0 2px;font-size:11px;color:var(--t-2);line-height:1.6;border-top:1px solid var(--line);margin-top:6px">
                  IS: pre-tax income ↓$10, tax ↓$3.50, net income ↓$6.50. CFS: add back D&amp;A (+$10), so OCF ↑$3.50. BS: PP&amp;E ↓$10; cash ↑$3.50; retained earnings ↓$6.50 — still balances.
                  <div style="margin-top:5px;padding:5px 8px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:10.5px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Memorise this cold — it's the single most tested question in IB technicals.</div>
                </div>
              </div>
              <div class="pm-qitem pv-q-item" data-cat="val" style="flex-direction:column;align-items:stretch;cursor:pointer" onclick="pvToggleQ(this)">
                <div style="display:flex;align-items:center;gap:8px">
                  <span class="pm-qpill pill-val">Valuation</span>
                  <span class="pm-qtxt">Walk me through the three valuation methodologies.</span>
                  <span class="pv-caret" style="font-size:10px;color:var(--t-3);flex-shrink:0;transition:transform 0.2s">⌄</span>
                </div>
                <div class="pv-ans" style="display:none;padding:8px 0 2px;font-size:11px;color:var(--t-2);line-height:1.6;border-top:1px solid var(--line);margin-top:6px">
                  (1) DCF — intrinsic value, discount projected FCF at WACC. (2) Comparable companies — EV multiples of similar public companies. (3) Precedent transactions — acquisition multiples from prior M&amp;A deals. Comps and precedents are relative; DCF is absolute.
                  <div style="margin-top:5px;padding:5px 8px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:10.5px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Always know which gives a higher/lower value and why — follow-ups are guaranteed.</div>
                </div>
              </div>
              <div class="pm-qitem pv-q-item" data-cat="beh" style="flex-direction:column;align-items:stretch;cursor:pointer" onclick="pvToggleQ(this)">
                <div style="display:flex;align-items:center;gap:8px">
                  <span class="pm-qpill" style="background:rgba(240,180,40,0.12);color:#e0a820;font-size:9px;padding:2px 7px;border-radius:4px;font-family:'Geist Mono',monospace;font-weight:500;white-space:nowrap">Behavioral</span>
                  <span class="pm-qtxt">Why investment banking? Why this firm specifically?</span>
                  <span class="pv-caret" style="font-size:10px;color:var(--t-3);flex-shrink:0;transition:transform 0.2s">⌄</span>
                </div>
                <div class="pv-ans" style="display:none;padding:8px 0 2px;font-size:11px;color:var(--t-2);line-height:1.6;border-top:1px solid var(--line);margin-top:6px">
                  Structure: (1) genuine interest in capital markets/deal-making, (2) specific experience that drew you here, (3) firm-specific reason tied to their culture, deal flow, or sector focus. Never give a generic answer — research the firm's recent deals.
                </div>
              </div>
            </div>
          </div>

          <!-- ── FLASHCARDS ── -->
          <div id="pv-flash" style="display:none;flex-direction:column;height:100%">
            <div style="flex-shrink:0;display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
              <span style="font-size:13px;font-weight:600;letter-spacing:-0.02em;color:var(--t)">Flashcards</span>
              <span id="pv-fc-prog" style="font-size:9.5px;font-family:'Geist Mono',monospace;color:var(--t-3)">1 / 4</span>
            </div>
            <!-- 3D flip card -->
            <div style="flex:1;perspective:800px;cursor:pointer" onclick="pvFlipCard()">
              <div id="pv-fc-inner" style="
                width:100%;height:100%;position:relative;
                transform-style:preserve-3d;
                transition:transform 0.5s cubic-bezier(0.4,0,0.2,1);
              ">
                <!-- Front -->
                <div style="
                  position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;
                  background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.09);
                  border-radius:10px;padding:14px;display:flex;flex-direction:column;gap:8px;
                ">
                  <div id="pv-fc-cat" style="font-size:9px;font-family:'Geist Mono',monospace;color:var(--accent);letter-spacing:0.06em">VALUATION</div>
                  <div id="pv-fc-q" style="font-size:12.5px;font-weight:500;color:var(--t);line-height:1.55;flex:1"></div>
                  <div style="font-size:10px;color:var(--t-3);margin-top:auto">↩ tap to flip</div>
                </div>
                <!-- Back -->
                <div style="
                  position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;
                  transform:rotateY(180deg);
                  background:rgba(94,106,210,0.08);border:1px solid rgba(94,106,210,0.25);
                  border-radius:10px;padding:14px;display:flex;flex-direction:column;gap:8px;overflow-y:auto;
                ">
                  <div style="font-size:9px;font-family:'Geist Mono',monospace;color:var(--green);letter-spacing:0.06em">ANSWER</div>
                  <div id="pv-fc-a" style="font-size:11px;color:var(--t-2);line-height:1.6;flex:1"></div>
                </div>
              </div>
            </div>
            <!-- Nav -->
            <div style="flex-shrink:0;display:flex;gap:6px;margin-top:10px;justify-content:center">
              <button onclick="pvFCNav(-1)" style="background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.10);border-radius:5px;padding:5px 12px;font-size:11px;color:var(--t-2);cursor:pointer;transition:var(--trans)" onmouseover="this.style.background='rgba(255,255,255,0.11)'" onmouseout="this.style.background='rgba(255,255,255,0.06)'">← Prev</button>
              <button onclick="pvFlipCard()" style="background:var(--accent);border:none;border-radius:5px;padding:5px 14px;font-size:11px;color:white;cursor:pointer">Flip</button>
              <button onclick="pvFCNav(1)"  style="background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.10);border-radius:5px;padding:5px 12px;font-size:11px;color:var(--t-2);cursor:pointer;transition:var(--trans)" onmouseover="this.style.background='rgba(255,255,255,0.11)'" onmouseout="this.style.background='rgba(255,255,255,0.06)'">Next →</button>
            </div>
          </div>

          <!-- ── MOCK INTERVIEW ── -->
          <div id="pv-mock" style="display:none;flex-direction:column;height:100%">
            <!-- Header -->
            <div style="flex-shrink:0;display:flex;align-items:center;gap:8px;padding-bottom:10px;border-bottom:1px solid var(--line);margin-bottom:10px">
              <div style="width:26px;height:26px;border-radius:50%;background:linear-gradient(135deg,#5E6AD2,#8b8ff8);display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;color:white;flex-shrink:0">AC</div>
              <div>
                <div style="font-size:12px;font-weight:600;color:var(--t);letter-spacing:-0.01em">Alex Chen</div>
                <div style="font-size:10px;color:var(--t-3)">VP, M&amp;A · Goldman Sachs</div>
              </div>
              <div style="margin-left:auto;display:flex;align-items:center;gap:4px;font-size:9.5px;font-family:'Geist Mono',monospace;color:var(--green)">
                <div style="width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite"></div>LIVE
              </div>
            </div>
            <!-- Chat log -->
            <div id="pv-mock-chat" style="flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;padding-right:2px;min-height:0">
              <div style="display:flex;gap:7px;align-items:flex-start">
                <div style="width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,#5E6AD2,#8b8ff8);display:flex;align-items:center;justify-content:center;font-size:7.5px;font-weight:700;color:white;flex-shrink:0;margin-top:1px">AC</div>
                <div style="background:rgba(255,255,255,0.05);border:1px solid var(--line);border-radius:0 8px 8px 8px;padding:8px 10px;font-size:11px;color:var(--t-2);line-height:1.55;max-width:88%">Walk me through a DCF. Which assumptions have the biggest impact on value?</div>
              </div>
            </div>
            <!-- Input -->
            <div style="flex-shrink:0;display:flex;gap:6px;margin-top:8px">
              <input id="pv-mock-input" type="text" placeholder="Type your answer and hit Enter…" onkeydown="if(event.key==='Enter')pvMockSend()"
                style="flex:1;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.09);border-radius:6px;padding:6px 10px;font-size:11px;color:var(--t);outline:none;min-width:0"
                onfocus="this.style.borderColor='var(--accent)'" onblur="this.style.borderColor='rgba(255,255,255,0.09)'"/>
              <button onclick="pvMockSend()" style="flex-shrink:0;background:var(--accent);border:none;border-radius:6px;padding:6px 12px;font-size:11px;color:white;cursor:pointer;white-space:nowrap;font-weight:500">Send →</button>
            </div>
          </div>

        </div><!-- /prev-main -->
      </div><!-- /preview-body -->
    </div><!-- /hero-preview -->
  </section>

  <!-- LOGOS -->
  <div class="logos-row">
    <div class="logos-section">
      <div class="logos-label">Candidates interviewing at</div>
      <div class="logos-strip">
        <div class="wm-logo" title="Goldman Sachs"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Goldman_Sachs_logo.svg" alt="Goldman Sachs" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">GS</span></div>
        <div class="wm-logo" title="J.P. Morgan"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/J_P_Morgan_Logo_2008_1.svg" alt="J.P. Morgan" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">JPM</span></div>
        <div class="wm-logo" title="Morgan Stanley"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Morgan_Stanley_Logo_1.svg" alt="Morgan Stanley" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">MS</span></div>
        <div class="wm-logo" title="Lazard"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Lazard_logo.svg" alt="Lazard" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">LAZ</span></div>
        <div class="wm-logo" title="Blackstone"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Blackstone_Inc._logo.svg" alt="Blackstone" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">BX</span></div>
        <div class="wm-logo" title="KKR"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/KKR_logo.svg" alt="KKR" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">KKR</span></div>
        <div class="wm-logo" title="Evercore"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Evercore_Logo.svg" alt="Evercore" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">EVR</span></div>
        <div class="wm-logo" title="Jefferies"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Jefferies_Financial_Group_Logo.svg" alt="Jefferies" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">JEF</span></div>
      </div>
    </div>
    <div class="logos-divider"></div>
    <div class="logos-section">
      <div class="logos-label">Students from</div>
      <div class="logos-strip">
        <div class="wm-logo sq" title="Harvard"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Harvard_University_logo.svg" alt="Harvard" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">H</span></div>
        <div class="wm-logo sq" title="Yale"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Yale_University_logo.svg" alt="Yale" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">Y</span></div>
        <div class="wm-logo sq" title="Princeton"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Princeton_seal.svg" alt="Princeton" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">P</span></div>
        <div class="wm-logo sq" title="Columbia"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Columbia_University_Logo.svg" alt="Columbia" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">C</span></div>
        <div class="wm-logo sq" title="Penn"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/University_of_Pennsylvania_logo.svg" alt="Penn" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">W</span></div>
        <div class="wm-logo sq" title="Brown"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Brown_University_logo.svg" alt="Brown" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">B</span></div>
        <div class="wm-logo sq" title="Dartmouth"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Dartmouth_College_wordmark.svg" alt="Dartmouth" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">D</span></div>
        <div class="wm-logo sq" title="Cornell"><img src="https://en.wikipedia.org/wiki/Special:Redirect/file/Cornell_University_logo.svg" alt="Cornell" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"/><span class="wm-fb">C</span></div>
      </div>
    </div>
  </div>


  <!-- FEATURES -->
  <div class="features" id="demo-section">

    <!-- FEAT 1: Question Bank -->
    <section class="feat-section">
      <div class="feat-two">
        <div>
          <div class="feat-tag">Question Bank</div>
          <h2 class="feat-h">Know what's coming before you walk in.</h2>
          <p class="feat-p">62 questions pulled from real IB interviews. Every answer written the way a banker wants to hear it.</p>
          <button class="btn-primary" onclick="showAuthTab('signup')">Explore all 62 questions →</button>
        </div>
        <div class="demo-card">
          <div class="qb-demo">
            <div class="qb-toolbar">
              <span class="qb-pill active" onclick="demoFilterBank(this,'all')">All</span>
              <span class="qb-pill" onclick="demoFilterBank(this,'tech')">Technical</span>
              <span class="qb-pill" onclick="demoFilterBank(this,'beh')">Behavioral</span>
              <span class="qb-pill" onclick="demoFilterBank(this,'brain')">Brain Teasers</span>
            </div>
            <div class="qb-list" id="demo-qb-list">
              <div class="qb-item" onclick="demoToggleQ(this)" style="flex-direction:column;align-items:stretch;cursor:pointer">
                <div style="display:flex;align-items:center;gap:10px">
                  <span class="qb-num">01</span>
                  <span class="qb-text">Walk me through the three financial statements.</span>
                  <span class="qb-badge tech">Accounting</span>
                  <span style="color:var(--t-3);font-size:11px;flex-shrink:0">⌄</span>
                </div>
                <div class="demo-q-ans" style="display:none;padding:10px 0 2px 22px;font-size:11.5px;color:var(--t-2);line-height:1.65;border-top:1px solid var(--line);margin-top:8px">
                  The Income Statement shows revenue and expenses. The Balance Sheet is a snapshot of assets, liabilities and equity. The Cash Flow Statement reconciles net income to actual cash flows. Net income flows into retained earnings and begins the CFS.
                  <div style="margin-top:6px;padding:6px 10px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:11px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Be ready to draw the linkages on a whiteboard.</div>
                </div>
              </div>
              <div class="qb-item" onclick="demoToggleQ(this)" style="flex-direction:column;align-items:stretch;cursor:pointer">
                <div style="display:flex;align-items:center;gap:10px">
                  <span class="qb-num">02</span>
                  <span class="qb-text">How does a $10 depreciation increase flow through all three statements?</span>
                  <span class="qb-badge tech">Accounting</span>
                  <span style="color:var(--t-3);font-size:11px;flex-shrink:0">⌄</span>
                </div>
                <div class="demo-q-ans" style="display:none;padding:10px 0 2px 22px;font-size:11.5px;color:var(--t-2);line-height:1.65;border-top:1px solid var(--line);margin-top:8px">
                  IS: Pre-tax income ↓$10, taxes ↓$3.50, net income ↓$6.50. CFS: Net income ↓$6.50 but D&A added back (+$10), so OCF ↑$3.50. BS: PP&E (net) ↓$10; cash ↑$3.50; retained earnings ↓$6.50 — still balances.
                  <div style="margin-top:6px;padding:6px 10px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:11px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Memorise this cold — it's the most common 3-statement question.</div>
                </div>
              </div>
              <div class="qb-item" onclick="demoToggleQ(this)" style="flex-direction:column;align-items:stretch;cursor:pointer">
                <div style="display:flex;align-items:center;gap:10px">
                  <span class="qb-num">21</span>
                  <span class="qb-text">Walk me through the three main valuation methodologies.</span>
                  <span class="qb-badge beh" style="background:var(--green-dim);color:var(--green)">Valuation</span>
                  <span style="color:var(--t-3);font-size:11px;flex-shrink:0">⌄</span>
                </div>
                <div class="demo-q-ans" style="display:none;padding:10px 0 2px 22px;font-size:11.5px;color:var(--t-2);line-height:1.65;border-top:1px solid var(--line);margin-top:8px">
                  (1) DCF — intrinsic value based on projected free cash flows discounted at WACC. (2) Comparable companies — EV multiples of similar public companies. (3) Precedent transactions — multiples paid in prior M&A deals. Comps and precedents are relative; DCF is absolute.
                  <div style="margin-top:6px;padding:6px 10px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0;font-size:11px;color:var(--t-3)"><strong style="color:var(--t-2)">Tip:</strong> Always know when each methodology gives a higher or lower value.</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FEAT 2: Flashcards -->
    <section class="feat-section">
      <div class="feat-two rev">
        <div>
          <div class="feat-tag">Flashcards</div>
          <h2 class="feat-h">Recall beats recognition. Every time.</h2>
          <p class="feat-p">Knowing the answer isn't enough. You need to deliver it cold, under pressure. Drill until it's automatic.</p>
          <button class="btn-primary" onclick="showAuthTab('signup')">Try the flashcards →</button>
        </div>
        <div class="demo-card">
          <div class="fc-demo">
            <div class="fc-demo-bar">
              <span class="fc-demo-label" id="demo-fc-label">VALUATION · Card 1 of 5</span>
              <span class="fc-demo-progress" id="demo-fc-prog">20% complete</span>
            </div>
            <div style="perspective:1000px">
              <div id="demo-fc-card" onclick="demoFlipCard()" style="
                position:relative;min-height:180px;cursor:pointer;
                transform-style:preserve-3d;transition:transform 0.5s cubic-bezier(0.4,0,0.2,1);
              ">
                <div style="position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;
                  background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.09);
                  border-radius:var(--r-lg);padding:24px;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden">
                  <div style="position:absolute;inset:0;background:radial-gradient(ellipse at 30% 50%,var(--accent-dim),transparent 70%);pointer-events:none"></div>
                  <div>
                    <div class="fc-cat" id="demo-fc-cat">Technical — Valuation</div>
                    <div id="demo-fc-q" style="font-size:15px;font-weight:500;line-height:1.5;color:var(--t);margin-top:8px">What is the difference between equity value and enterprise value?</div>
                  </div>
                  <div class="fc-hint">↩ Click to reveal answer</div>
                </div>
                <div style="position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden;
                  transform:rotateY(180deg);
                  background:rgba(94,106,210,0.08);border:1px solid rgba(94,106,210,0.3);
                  border-radius:var(--r-lg);padding:24px;display:flex;flex-direction:column;gap:10px;overflow:hidden">
                  <div style="font-size:10px;font-family:'Geist Mono',monospace;color:var(--accent);letter-spacing:0.08em;text-transform:uppercase">Answer</div>
                  <div id="demo-fc-a" style="font-size:13px;color:var(--t-2);line-height:1.65;flex:1"></div>
                  <div id="demo-fc-tip" style="font-size:11px;color:var(--t-3);padding:7px 10px;background:var(--accent-dim);border-left:2px solid var(--accent);border-radius:0 4px 4px 0"></div>
                </div>
              </div>
            </div>
            <div class="fc-demo-btns">
              <button class="fc-btn-sm" onclick="demoFCNav(-1)">← Prev</button>
              <button class="fc-btn-sm" onclick="demoFCShuffle()">⟳ Shuffle</button>
              <button class="fc-btn-sm" onclick="demoFCNav(1)">Next →</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FEAT 3: Mock Interview -->
    <section class="feat-section">
      <div class="feat-two">
        <div>
          <div class="feat-tag">Mock Interview</div>
          <h2 class="feat-h">The interviewer doesn't grade on effort.</h2>
          <p class="feat-p">Alex Chen, VP in M&A, scores every answer on Technical Accuracy, Structure, and Confidence. Then asks a harder follow-up. No flattery.</p>
          <button class="btn-primary" onclick="showAuthTab('signup')">Start your mock now →</button>
        </div>
        <div class="demo-card" style="display:flex;flex-direction:column">
          <div class="iv-topbar">
            <div class="iv-persona">
              <div class="iv-av">AC</div>
              <div><div class="iv-name" style="font-size:13px">Alex Chen</div><div class="iv-role">VP, M&A — Goldman Sachs</div></div>
            </div>
            <span class="iv-badge badge-live">● LIVE</span>
          </div>
          <div id="demo-chat-body" style="padding:14px 16px;display:flex;flex-direction:column;gap:10px;min-height:200px;max-height:240px;overflow-y:auto">
            <div class="chat-msg">
              <div class="cm-av ai">AC</div>
              <div class="cm-bubble ai">Walk me through a DCF. What are the key assumptions you'd make?</div>
            </div>
          </div>
          <div style="padding:10px 14px;border-top:1px solid var(--line);display:flex;gap:8px;align-items:center">
            <input id="demo-chat-input" type="text" placeholder="Type your answer…"
              style="flex:1;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.09);border-radius:var(--r);padding:8px 12px;font-size:13px;color:var(--t);outline:none;transition:var(--trans)"
              onfocus="this.style.borderColor='var(--accent)'" onblur="this.style.borderColor='rgba(255,255,255,0.09)'"
              onkeydown="if(event.key==='Enter')demoChatSend()"/>
            <button onclick="demoChatSend()" style="background:var(--accent);border:none;border-radius:var(--r);padding:8px 14px;font-size:13px;color:white;cursor:pointer;transition:var(--trans);white-space:nowrap" onmouseover="this.style.background='var(--accent-h)'" onmouseout="this.style.background='var(--accent)'">Send →</button>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- STATS -->
  <div class="stats-band">
    <div class="stats-inner">
      <div class="stat-block">
        <div class="stat-num">62<span>+</span></div>
        <div class="stat-desc">questions that actually get asked</div>
      </div>
      <div class="stat-block">
        <div class="stat-num">3<span>×</span></div>
        <div class="stat-desc">dimensions. scored like a banker scores you</div>
      </div>
      <div class="stat-block">
        <div class="stat-num">$0</div>
        <div class="stat-desc">to start. no card. no catch</div>
      </div>
    </div>
  </div>

  <!-- TESTIMONIALS -->
  <div class="testimonials">
    <div class="test-inner">
      <div class="feat-tag">Testimonials</div>
      <h2 class="feat-h" style="max-width:480px">They got the offer.</h2>
      <div class="test-grid">
        <div class="test-card">
          <div class="test-stars">★★★★★</div>
          <p class="test-text">"Question 14 about deferred revenue came up word for word in my Goldman first round. I'd drilled it the night before. That moment of recognition is everything."</p>
          <div class="test-author">
            <div class="test-avatar">MK</div>
            <div><div class="test-name">Maya K.</div><div class="test-role">Analyst, Goldman Sachs IBD</div></div>
          </div>
        </div>
        <div class="test-card">
          <div class="test-stars">★★★★★</div>
          <p class="test-text">"The AI mock pushed back on my WACC answer and asked me to justify my beta assumption. No prep course does that. I walked into JPM ready for the follow-ups."</p>
          <div class="test-author">
            <div class="test-avatar">JL</div>
            <div><div class="test-name">James L.</div><div class="test-role">Summer Analyst, J.P. Morgan M&A</div></div>
          </div>
        </div>
        <div class="test-card">
          <div class="test-stars">★★★★★</div>
          <p class="test-text">"I paid $600 for a prep course and used Superday the week before my Blackstone superday. Superday was more useful. Not close."</p>
          <div class="test-author">
            <div class="test-avatar">SR</div>
            <div><div class="test-name">Sofia R.</div><div class="test-role">PE Associate, Blackstone</div></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CTA -->
  <!-- PRICING -->
  <div class="pricing-section" id="section-pricing">
    <div class="feat-tag">Pricing</div>
    <h2 class="feat-h">Less than one coffee.</h2>
    <p class="feat-p" style="margin-bottom:0">Start free. Upgrade when you're ready to go all-in.</p>
    <div class="pricing-grid">

      <!-- WEEKLY -->
      <div class="pricing-card">
        <div class="pricing-name">Weekly</div>
        <div class="pricing-price">
          <span class="pricing-currency">$</span>
          <span class="pricing-amount">3.99</span>
        </div>
        <div class="pricing-period">per week</div>
        <div class="pricing-desc">One focused sprint. Everything you need for the week before interviews.</div>
        <button class="pricing-btn ghost" onclick="showAuthTab('signup')">Start sprinting</button>
        <div class="pricing-divider"></div>
        <div class="pricing-features">
          <div class="pf-item"><span class="pf-check">✓</span>Full question bank (62 questions)</div>
          <div class="pf-item"><span class="pf-check">✓</span>Flashcard mode</div>
          <div class="pf-item"><span class="pf-check">✓</span>Progress tracking</div>
          <div class="pf-item muted"><span class="pf-check">–</span>AI mock interviews</div>
          <div class="pf-item muted"><span class="pf-check">–</span>Market news feed</div>
        </div>
      </div>

      <!-- MONTHLY (featured) -->
      <div class="pricing-card featured">
        <div class="pricing-badge">Most popular</div>
        <div class="pricing-name">Monthly</div>
        <div class="pricing-price">
          <span class="pricing-currency">$</span>
          <span class="pricing-amount">10</span>
        </div>
        <div class="pricing-period">per month · cancel anytime</div>
        <div class="pricing-desc">The whole season. From first application to final round.</div>
        <button class="pricing-btn primary" onclick="showAuthTab('signup')">Get full access →</button>
        <div class="pricing-divider"></div>
        <div class="pricing-features">
          <div class="pf-item"><span class="pf-check">✓</span>Full question bank (62 questions)</div>
          <div class="pf-item"><span class="pf-check">✓</span>Flashcard mode</div>
          <div class="pf-item"><span class="pf-check">✓</span>Progress tracking</div>
          <div class="pf-item"><span class="pf-check">✓</span>AI mock interviews (unlimited)</div>
          <div class="pf-item"><span class="pf-check">✓</span>Live market news feed</div>
        </div>
      </div>

      <!-- LIFETIME -->
      <div class="pricing-card">
        <div class="pricing-name">Lifetime</div>
        <div class="pricing-price">
          <span class="pricing-currency">$</span>
          <span class="pricing-amount">100</span>
        </div>
        <div class="pricing-period">one-time · yours forever</div>
        <div class="pricing-desc">Pay once. Prep for every cycle, every lateral move, every promotion conversation.</div>
        <button class="pricing-btn ghost" onclick="showAuthTab('signup')">Own it forever</button>
        <div class="pricing-divider"></div>
        <div class="pricing-features">
          <div class="pf-item"><span class="pf-check">✓</span>Everything in Monthly</div>
          <div class="pf-item"><span class="pf-check">✓</span>All future question updates</div>
          <div class="pf-item"><span class="pf-check">✓</span>Priority support</div>
          <div class="pf-item"><span class="pf-check">✓</span>Early access to new features</div>
          <div class="pf-item"><span class="pf-check">✓</span>Never pay again</div>
        </div>
      </div>

    </div>
  </div>

  <!-- ROI CALCULATOR -->
  <div class="roi-section" id="section-roi">
    <div class="roi-inner">
      <div style="margin-bottom:32px">
        <div class="feat-tag">The Math</div>
        <h2 class="feat-h">Unlimited upside.</h2>
        <p class="feat-p" style="margin-bottom:0">First-year IB analysts earn $150k. Win that offer for $3.</p>
      </div>
      <div class="roi-card">
        <div class="roi-grid">
          <div class="roi-controls">
            <div>
              <div class="roi-control-label">
                <span>Starting salary</span>
                <span class="roi-val" id="roi-salary-label">$110,000</span>
              </div>
              <input class="roi-slider" type="range" min="80000" max="250000" step="5000" value="110000"
                id="roi-salary" oninput="calcROI()"/>
            </div>
            <div>
              <div class="roi-control-label">
                <span>Expected signing bonus</span>
                <span class="roi-val" id="roi-bonus-label">$20,000</span>
              </div>
              <input class="roi-slider" type="range" min="0" max="60000" step="2500" value="20000"
                id="roi-bonus" oninput="calcROI()"/>
            </div>
            <div>
              <div class="roi-control-label">
                <span>Years in IB before exit</span>
                <span class="roi-val" id="roi-years-label">2 years</span>
              </div>
              <input class="roi-slider" type="range" min="1" max="5" step="1" value="2"
                id="roi-years" oninput="calcROI()"/>
            </div>
            <div>
              <div class="roi-control-label">
                <span>Your Superday plan</span>
                <span class="roi-val" id="roi-plan-label">Monthly</span>
              </div>
              <input class="roi-slider" type="range" min="0" max="2" step="1" value="1"
                id="roi-plan" oninput="calcROI()"/>
            </div>
          </div>
          <div class="roi-results">
            <div class="roi-result-item">
              <div class="roi-result-label">Total earnings (est.)</div>
              <div class="roi-result-val" id="roi-total-earn">$220,000</div>
              <div class="roi-result-sub">salary + bonus over your IB tenure</div>
            </div>
            <div class="roi-result-item">
              <div class="roi-result-label">Cost of Superday</div>
              <div class="roi-result-val" id="roi-cost">$10</div>
              <div class="roi-result-sub">total investment in your prep</div>
            </div>
            <div class="roi-highlight">
              <div class="roi-highlight-label">Return on investment</div>
              <div class="roi-highlight-val" id="roi-multiple">22,000×</div>
              <div class="roi-highlight-sub" id="roi-sub">every $1 spent returns $22,000 in earnings</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- FAQ -->
  <div class="faq-section" id="section-faq">
    <div class="feat-tag">FAQ</div>
    <h2 class="feat-h">Quick answers.</h2>
    <div class="faq-list">
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">What types of questions are covered? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">Everything you'll face in a real IB interview: 40 technical questions (Accounting & Valuation), 10 Behaviorals, 7 Brain Teasers, and 5 Deals & Markets questions. Every single one comes with a model answer and an interviewer tip that tells you how a banker actually evaluates the response.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">How is the AI mock different from just reading answers? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">Reading builds knowledge. The mock builds performance. There's a real gap between knowing an answer and delivering it calmly under pressure — that gap is where most candidates lose offers. The AI scores you on three dimensions, follows up with harder questions, and doesn't let you off easy. It's the closest thing to a real first round you'll get without booking a flight.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">Is it actually free? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">Yes. The full question bank and flashcards are free, no credit card required. Paid plans unlock the AI mock interviewer, the live market news feed, and priority support. We'd rather have you prepared for free than unprepared because of a paywall.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">Are the questions actually up to date? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">The core technicals don't change — the three-statement model and DCF mechanics are the same as they were 20 years ago. What changes is emphasis and framing, which we update based on real interview reports. If Goldman starts asking a specific LBO structure question, it'll show up here.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">Which banks is this relevant for? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">All of them. The technical foundation — accounting, valuation, LBOs — is universal across Goldman, JPM, Morgan Stanley, Lazard, Evercore, Blackstone, KKR, and every other firm. The AI mock lets you pick your target bank and adjusts accordingly.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">Can I cancel anytime? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">Yes, with no questions and no friction. Monthly plans cancel instantly and you keep access until the end of your billing period. The lifetime plan has no recurring charges — ever.</div>
      </div>
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-q">Does my progress save across devices? <span class="faq-caret">⌄</span></div>
        <div class="faq-a">Yes. Create an account and your progress — questions answered, streaks, activity log — syncs to the cloud. Pick up on your laptop, continue on your phone, same state every time.</div>
      </div>
    </div>
  </div>

  <div class="cta-section">
    <div class="cta-glow"></div>
    <h2 class="cta-h">The offer is there.<br>Go get it.</h2>
    <p class="cta-p">First-year IB analysts earn $150k. Win that offer for $3.</p>
    <div class="cta-form">
      <input class="cta-input" type="email" placeholder="your@email.com" id="cta-email"/>
      <button class="btn-primary" onclick="ctaSignup()">Start preparing free →</button>
    </div>
  </div>

  <footer class="land-footer">
    <div class="nav-logo" onclick="showScreen('landing')">
      <div class="logo-mark">S</div>
      <span class="logo-wordmark">Superday</span>
    </div>
    <div class="footer-copy">© 2026 Superday. Built for candidates who don't leave things to chance.</div>
    <div class="footer-links">
      <span class="footer-link">Privacy</span>
      <span class="footer-link">Terms</span>
      <span class="footer-link" onclick="showAuthTab('login')">Sign in</span>
    </div>
  </footer>

</div><!-- /landing -->

<!-- ══════════════════════════════════════
     APP SHELL
══════════════════════════════════════ -->
<div class="screen" id="screen-app">

  <!-- SIDEBAR -->
  <aside class="app-sidebar">
    <div class="sb-top">
      <div class="sb-brand"><div class="logo-mark" style="width:20px;height:20px;border-radius:5px;font-size:10px">S</div>Superday</div>
      <div class="sb-section">Prepare</div>
      <div class="sb-item active" onclick="showView('dashboard')"><span class="sb-icon">◈</span>Dashboard</div>
      <div class="sb-item" onclick="showView('map')"><span class="sb-icon">◉</span>Knowledge Map</div>
      <div class="sb-item" onclick="showView('bank')"><span class="sb-icon">☰</span>Question Bank</div>
      <div class="sb-item" onclick="showView('quiz')"><span class="sb-icon">✓</span>Quiz Mode</div>
      <div class="sb-item" onclick="showView('flash')"><span class="sb-icon">⧉</span>Flashcards</div>
      <div class="sb-item" onclick="showView('mock')"><span class="sb-icon">◎</span>Mock Interview</div>
    </div>
    <div class="sb-spacer"></div>
    <div class="sb-bottom">
      <div class="sb-theme" onclick="toggleTheme()">
        <span class="sb-theme-label" id="theme-label-app">DARK</span>
        <div class="theme-track"><div class="theme-thumb"></div></div>
      </div>
      <div class="sb-user">
        <div class="sb-avatar" id="sb-avatar">J</div>
        <div style="flex:1;min-width:0">
          <div class="sb-user-name" id="sb-name">Jamie</div>
          <div class="sb-user-plan" id="sb-email-display" style="font-size:10px;color:var(--t-3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis"></div>
        </div>
        <div onclick="doSignOut()" title="Sign out"
          style="cursor:pointer;color:var(--t-3);font-size:13px;padding:4px;border-radius:4px;transition:var(--trans);flex-shrink:0"
          onmouseover="this.style.color='var(--t)'" onmouseout="this.style.color='var(--t-3)'">⏏</div>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="app-main">

    <!-- Session Timer (for Quick 10 mode) -->
    <div class="session-timer" id="session-timer">
      <span class="timer-label">Session</span>
      <span id="session-time">0:00</span>
    </div>

    <!-- ── DASHBOARD ── -->
    <div class="app-view active" id="view-dashboard">
      <div class="dash-welcome">
        <div>
          <div class="dash-h">Good morning, <span id="greeting-name">Jamie</span>.</div>
          <div class="dash-date" id="dash-date"></div>
        </div>
        <button class="dash-today-btn" id="dash-practice-btn" onclick="smartPractice()">
          <span>📋</span><span id="practice-btn-text">Practice today →</span>
        </button>
      </div>

      <!-- Deadline Alert -->
      <div class="deadline-card" id="deadline-card">
        <div class="deadline-icon">⏰</div>
        <div class="deadline-content">
          <div class="deadline-title">Summer 2025 Applications Closing Soon</div>
          <div class="deadline-sub">Goldman Sachs, Morgan Stanley, J.P. Morgan deadlines approaching</div>
        </div>
        <div class="deadline-countdown" id="deadline-countdown">14 days</div>
      </div>

      <div class="kpi-row">
        <div class="kpi-card">
          <div class="kpi-label">Questions Answered</div>
          <div class="kpi-val" id="kpi-answered">0</div>
          <div class="kpi-sub">of <span id="kpi-total">120</span> total</div>
          <div class="kpi-bar"><div class="kpi-fill" id="kpi-answered-fill" style="width:0%"></div></div>
        </div>
        <div class="kpi-card" style="cursor:pointer" onclick="goToDueReview()">
          <div class="kpi-label">Due for Review</div>
          <div class="kpi-val" id="kpi-due" style="color:var(--amber)">0</div>
          <div class="kpi-sub">cards ready to review</div>
          <div class="kpi-bar"><div class="kpi-fill" id="kpi-due-fill" style="width:0%;background:var(--amber)"></div></div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">Mastered</div>
          <div class="kpi-val" id="kpi-mastered" style="color:var(--green)">0</div>
          <div class="kpi-sub">of 120 questions</div>
          <div class="kpi-bar"><div class="kpi-fill green" id="kpi-mastered-fill" style="width:0%"></div></div>
        </div>
      </div>

      <!-- Market News First -->
      <div class="news-panel" id="news-panel" style="margin-bottom:20px">
        <div class="dp-header">
          <span class="dp-title">Market Pulse</span>
          <span style="display:flex;align-items:center;gap:5px;font-size:10.5px;color:var(--t-3);font-family:'Geist Mono',monospace">
            <span style="width:6px;height:6px;border-radius:50%;background:var(--green);display:inline-block;animation:pulse-dot 2s ease infinite"></span>LIVE
          </span>
        </div>
        <div class="news-list-inner" id="news-list">
          <div style="padding:28px;text-align:center;font-size:12.5px;color:var(--t-3)">Loading market news…</div>
        </div>
      </div>

      <div class="kpi-row" style="margin-top:0">
        <div class="kpi-card">
          <div class="kpi-label">Current Streak</div>
          <div class="kpi-val" id="kpi-streak">0</div>
          <div class="kpi-sub">days in a row</div>
          <div class="streak-row" id="streak-dots"></div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">Categories Practiced</div>
          <div class="kpi-val" id="kpi-cats">0</div>
          <div class="kpi-sub">of 4 categories</div>
          <div class="kpi-bar"><div class="kpi-fill green" id="kpi-cats-fill" style="width:0%"></div></div>
        </div>
      </div>

      <div class="dash-grid">
        <div class="dash-panel">
          <div class="dp-header">
            <span class="dp-title">Category Progress</span>
            <span class="dp-action" onclick="showView('bank')">View all →</span>
          </div>
          <div class="cat-grid">
            <div class="cat-item" onclick="filterBankNav('tech')">
              <div class="cat-name">Technical</div>
              <div class="cat-pct" id="pct-tech">0%</div>
              <div class="cat-bar"><div class="cat-fill fill-acc" id="fill-tech" style="width:0%"></div></div>
              <div style="font-size:10.5px;color:var(--t-3);margin-top:4px;font-family:'Geist Mono',monospace" id="count-tech">0 answered</div>
            </div>
            <div class="cat-item" onclick="filterBankNav('beh')">
              <div class="cat-name">Behavioral</div>
              <div class="cat-pct" id="pct-beh">0%</div>
              <div class="cat-bar"><div class="cat-fill fill-grn" id="fill-beh" style="width:0%"></div></div>
              <div style="font-size:10.5px;color:var(--t-3);margin-top:4px;font-family:'Geist Mono',monospace" id="count-beh">0 answered</div>
            </div>
            <div class="cat-item" onclick="filterBankNav('brain')">
              <div class="cat-name">Brain Teasers</div>
              <div class="cat-pct" id="pct-brain">0%</div>
              <div class="cat-bar"><div class="cat-fill fill-amb" id="fill-brain" style="width:0%"></div></div>
              <div style="font-size:10.5px;color:var(--t-3);margin-top:4px;font-family:'Geist Mono',monospace" id="count-brain">0 answered</div>
            </div>
            <div class="cat-item" onclick="filterBankNav('deal')">
              <div class="cat-name">Deals & Markets</div>
              <div class="cat-pct" id="pct-deal">0%</div>
              <div class="cat-bar"><div class="cat-fill fill-blu" id="fill-deal" style="width:0%"></div></div>
              <div style="font-size:10.5px;color:var(--t-3);margin-top:4px;font-family:'Geist Mono',monospace" id="count-deal">0 answered</div>
            </div>
          </div>
        </div>
        <div class="dash-panel">
          <div class="dp-header">
            <span class="dp-title">Recent Activity</span>
          </div>
          <div class="activity-list" id="activity-list">
            <div style="padding:32px 16px;text-align:center;font-size:12.5px;color:var(--t-3)">No activity yet — start practicing.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ── QUESTION BANK ── -->
    <div class="app-view" id="view-bank">
      <div class="view-header">
        <div class="view-title">Question Bank</div>
        <div class="view-sub">62 curated questions with model answers and interview tips</div>
      </div>
      <div class="bank-toolbar">
        <input class="bank-search" type="text" id="bank-search" placeholder="Search questions…" oninput="renderBank()"/>
        <button class="bank-pill active" data-cat="all" onclick="filterBank('all')">All</button>
        <button class="bank-pill" data-cat="tech" onclick="filterBank('tech')">Technical</button>
        <button class="bank-pill" data-cat="beh" onclick="filterBank('beh')">Behavioral</button>
        <button class="bank-pill" data-cat="brain" onclick="filterBank('brain')">Brain Teasers</button>
        <button class="bank-pill" data-cat="deal" onclick="filterBank('deal')">Deals &amp; Markets</button>
      </div>
      <div class="sub-row" id="subtopic-row">
        <span class="sub-label">Topic:</span>
        <button class="bank-pill active" data-sub="all" onclick="filterSub('all')">All Technical</button>
        <button class="bank-pill" data-sub="accounting" onclick="filterSub('accounting')">Accounting</button>
        <button class="bank-pill" data-sub="valuation" onclick="filterSub('valuation')">Valuation</button>
        <button class="bank-pill" data-sub="lbo" onclick="filterSub('lbo')">LBO</button>
      </div>
      <div class="q-list" id="q-list"></div>
    </div>

    <!-- ── FLASHCARDS ── -->
    <div class="app-view" id="view-flash">
      <div class="view-header">
        <div class="view-title">Flashcards</div>
        <div class="view-sub">Build recall under pressure. Rate your confidence to optimize review.</div>
      </div>
      <div class="flash-wrap">
        <!-- Study Modes -->
        <div class="study-mode-bar" id="study-mode-bar">
          <button class="mode-btn active" data-mode="all" onclick="setStudyMode('all')">
            <span class="mode-icon">📚</span>All Cards<span class="mode-count" id="mode-count-all">62</span>
          </button>
          <button class="mode-btn" data-mode="due" onclick="setStudyMode('due')">
            <span class="mode-icon">🔄</span>Due for Review<span class="mode-count" id="mode-count-due">0</span>
          </button>
          <button class="mode-btn" data-mode="weak" onclick="setStudyMode('weak')">
            <span class="mode-icon">🎯</span>Weak Spots<span class="mode-count" id="mode-count-weak">0</span>
          </button>
          <button class="mode-btn" data-mode="quick" onclick="setStudyMode('quick')">
            <span class="mode-icon">⚡</span>Quick 10
          </button>
        </div>

        <!-- Mastery Stats -->
        <div class="mastery-stats" id="mastery-stats">
          <div class="mastery-stat">
            <span class="mastery-dot new"></span>
            <span>New:</span>
            <span class="mastery-stat-val" id="stat-new">62</span>
          </div>
          <div class="mastery-stat">
            <span class="mastery-dot learning"></span>
            <span>Learning:</span>
            <span class="mastery-stat-val" id="stat-learning">0</span>
          </div>
          <div class="mastery-stat">
            <span class="mastery-dot mastered"></span>
            <span>Mastered:</span>
            <span class="mastery-stat-val" id="stat-mastered">0</span>
          </div>
        </div>

        <div class="flash-toolbar" id="flash-toolbar">
          <button class="bank-pill active" data-fcat="all" onclick="setFlashCat('all')">All</button>
          <button class="bank-pill" data-fcat="tech" onclick="setFlashCat('tech')">Technical</button>
          <button class="bank-pill" data-fcat="beh" onclick="setFlashCat('beh')">Behavioral</button>
          <button class="bank-pill" data-fcat="brain" onclick="setFlashCat('brain')">Brain Teasers</button>
          <button class="bank-pill" data-fcat="deal" onclick="setFlashCat('deal')">Deals &amp; Markets</button>
          <button class="bank-pill" onclick="shuffleFlash()">⟳ Shuffle</button>
        </div>
        <div class="flash-meta" id="flash-meta">Card 1 of 62</div>
        <div class="flash-bar"><div class="flash-bar-fill" id="flash-bar-fill" style="width:0%"></div></div>
        <div class="card-scene" onclick="flipCard()">
          <div class="card-inner" id="card-inner">
            <div class="card-face card-front">
              <div class="card-cat-label" id="card-cat-label">Technical</div>
              <div class="card-q-text" id="card-q-text">Loading…</div>
              <div class="card-tap">↩ Click or press Space to reveal</div>
            </div>
            <div class="card-face card-back">
              <div class="card-back-label">Model Answer</div>
              <div class="card-back-text" id="card-back-text"></div>
            </div>
          </div>
        </div>
        
        <!-- Confidence Rating Buttons (shown after flip) -->
        <div class="confidence-bar" id="confidence-bar">
          <button class="conf-btn miss" onclick="rateCard(1)">
            <span>✗ Missed</span><span class="conf-key">1</span>
          </button>
          <button class="conf-btn unsure" onclick="rateCard(2)">
            <span>◐ Unsure</span><span class="conf-key">2</span>
          </button>
          <button class="conf-btn got" onclick="rateCard(3)">
            <span>✓ Got it</span><span class="conf-key">3</span>
          </button>
        </div>

        <div class="flash-controls" id="flash-nav-controls">
          <button class="flash-btn" id="flash-prev" onclick="prevCard()">← Prev</button>
          <button class="flash-btn" id="flash-next" onclick="nextCard()">Next →</button>
        </div>

        <!-- Keyboard Hints -->
        <div class="kbd-hints">
          <div class="kbd-hint"><span class="kbd">Space</span> Flip</div>
          <div class="kbd-hint"><span class="kbd">←</span><span class="kbd">→</span> Navigate</div>
          <div class="kbd-hint"><span class="kbd">1</span><span class="kbd">2</span><span class="kbd">3</span> Rate</div>
        </div>
      </div>
    </div>

    <!-- ── KNOWLEDGE MAP ── -->
    <div class="app-view" id="view-map">
      <div class="view-header">
        <div class="view-title">Knowledge Map</div>
        <div class="view-sub">Your visual guide to IB interview mastery. Click any node to practice.</div>
      </div>
      <div class="map-container">
        <div class="map-legend">
          <div class="map-legend-item"><span class="mastery-dot new"></span> Not started</div>
          <div class="map-legend-item"><span class="mastery-dot learning"></span> Learning</div>
          <div class="map-legend-item"><span class="mastery-dot mastered"></span> Mastered</div>
          <div class="map-legend-item" style="margin-left:20px"><span style="font-size:11px;color:var(--t-3)">Click nodes to practice • Drag to explore</span></div>
        </div>
        <div class="map-canvas" id="map-canvas">
          <svg class="map-svg" id="map-svg"></svg>
          <!-- Nodes will be rendered by JS -->
        </div>
      </div>
    </div>

    <!-- ── QUIZ MODE ── -->
    <div class="app-view" id="view-quiz">
      <div class="view-header">
        <div class="view-title">Quiz Mode</div>
        <div class="view-sub">Test your knowledge with multiple choice questions. Choose wisely.</div>
      </div>
      <div class="quiz-wrap">
        <!-- Quiz Setup -->
        <div id="quiz-setup">
          <div class="quiz-card">
            <h3 style="font-size:18px;font-weight:600;margin-bottom:16px">Start a Quiz</h3>
            <p style="font-size:14px;color:var(--t-2);margin-bottom:20px;line-height:1.6">
              Test yourself with multiple choice questions. Select a category and number of questions to begin.
            </p>
            <div style="display:flex;flex-direction:column;gap:12px;margin-bottom:20px">
              <div>
                <label style="font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.05em;display:block;margin-bottom:6px">CATEGORY</label>
                <select class="app-select" id="quiz-cat-select" style="width:100%">
                  <option value="all">All Categories</option>
                  <option value="tech">Technical (Accounting, Valuation, LBO)</option>
                  <option value="beh">Behavioral</option>
                  <option value="deal">Deals & Markets</option>
                </select>
              </div>
              <div>
                <label style="font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.05em;display:block;margin-bottom:6px">NUMBER OF QUESTIONS</label>
                <select class="app-select" id="quiz-count-select" style="width:100%">
                  <option value="5">5 questions</option>
                  <option value="10" selected>10 questions</option>
                  <option value="20">20 questions</option>
                  <option value="all">All available</option>
                </select>
              </div>
              <div>
                <label style="font-size:11px;color:var(--t-3);font-family:'Geist Mono',monospace;letter-spacing:0.05em;display:block;margin-bottom:6px">DIFFICULTY</label>
                <select class="app-select" id="quiz-diff-select" style="width:100%">
                  <option value="all">All difficulties</option>
                  <option value="1">Easy</option>
                  <option value="2">Medium</option>
                  <option value="3">Hard</option>
                </select>
              </div>
            </div>
            <button class="quiz-btn primary" style="width:100%" onclick="startQuiz()">Start Quiz →</button>
          </div>
        </div>

        <!-- Active Quiz -->
        <div id="quiz-active" style="display:none">
          <div class="quiz-progress">
            <div class="quiz-progress-bar"><div class="quiz-progress-fill" id="quiz-progress-fill"></div></div>
            <div class="quiz-progress-text" id="quiz-progress-text">1 / 10</div>
          </div>
          <div class="quiz-card">
            <div class="quiz-cat" id="quiz-current-cat">ACCOUNTING</div>
            <div class="quiz-question" id="quiz-current-question">Loading...</div>
            <div class="quiz-answers" id="quiz-answers"></div>
            <div class="quiz-feedback" id="quiz-feedback">
              <div class="quiz-feedback-title"></div>
              <div class="quiz-feedback-text"></div>
            </div>
            <div class="quiz-actions" id="quiz-actions" style="display:none">
              <button class="quiz-btn primary" onclick="nextQuizQuestion()">Next Question →</button>
            </div>
          </div>
        </div>

        <!-- Quiz Results -->
        <div id="quiz-results" style="display:none">
          <div class="quiz-card">
            <div class="quiz-results">
              <div class="quiz-results-score" id="quiz-final-score">0%</div>
              <div class="quiz-results-label">Quiz Complete</div>
              <div class="quiz-results-breakdown">
                <div class="quiz-stat correct">
                  <div class="quiz-stat-val" id="quiz-correct-count">0</div>
                  <div class="quiz-stat-label">Correct</div>
                </div>
                <div class="quiz-stat incorrect">
                  <div class="quiz-stat-val" id="quiz-incorrect-count">0</div>
                  <div class="quiz-stat-label">Incorrect</div>
                </div>
                <div class="quiz-stat">
                  <div class="quiz-stat-val" id="quiz-total-count">0</div>
                  <div class="quiz-stat-label">Total</div>
                </div>
              </div>
              <div style="display:flex;gap:10px;justify-content:center">
                <button class="quiz-btn ghost" onclick="showQuizSetup()">New Quiz</button>
                <button class="quiz-btn primary" onclick="reviewQuizMistakes()">Review Mistakes</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ── MOCK INTERVIEW ── -->
    <div class="app-view" id="view-mock">
      <div class="view-header">
        <div class="view-title">Mock Interview</div>
        <div class="view-sub">Practice with Alex Chen, VP in M&A. Get scored on every answer.</div>
      </div>
      <div class="mock-wrap">
        <div class="mock-config">
          <select class="app-select" id="mock-cat">
            <option value="tech">Technical</option>
            <option value="beh">Behavioral</option>
            <option value="brain">Brain Teasers</option>
            <option value="deal">Deals &amp; Markets</option>
          </select>
          <select class="app-select" id="mock-firm">
            <option>Goldman Sachs</option>
            <option>J.P. Morgan</option>
            <option>Morgan Stanley</option>
            <option>Evercore</option>
            <option>Lazard</option>
            <option>Blackstone</option>
          </select>
          <button class="btn-start-mock" onclick="startMock()">Start Interview</button>
        </div>
        <div class="iv-card">
          <div class="iv-topbar">
            <div class="iv-persona">
              <div class="iv-av">AC</div>
              <div>
                <div class="iv-name">Alex Chen</div>
                <div class="iv-role">VP, M&A · Goldman Sachs</div>
              </div>
            </div>
            <span class="iv-badge badge-idle" id="iv-badge">● IDLE</span>
          </div>
          <div class="chat-body" id="chat-body">
            <div class="chat-start">
              <h3>Ready when you are.</h3>
              <p>Select a category and firm above, then start the interview. Alex will ask you questions and score your answers in real time.</p>
              <button class="btn-primary" onclick="startMock()">Begin Interview →</button>
            </div>
          </div>
          <div class="chat-input-bar">
            <textarea class="chat-ta" id="chat-input" placeholder="Type your answer…" rows="1" onkeydown="if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMsg()}" oninput="this.style.height='auto';this.style.height=this.scrollHeight+'px'"></textarea>
            <button class="chat-send" id="chat-send" onclick="sendMsg()">↑</button>
          </div>
        </div>
      </div>
    </div>

  </main>
</div><!-- /app -->

<!-- DIAGNOSTIC ASSESSMENT OVERLAY -->
<div class="diagnostic-overlay" id="diagnostic-overlay">
  <div class="diagnostic-wrap">
    <!-- Welcome Screen -->
    <div id="diagnostic-welcome">
      <div class="diagnostic-header">
        <div class="diagnostic-icon">🎯</div>
        <div class="diagnostic-title">Let's calibrate your prep</div>
        <div class="diagnostic-sub">Answer 10 quick questions so we can personalize your experience and focus on what you need most.</div>
      </div>
      <div class="diagnostic-card">
        <div style="text-align:center">
          <p style="font-size:14px;color:var(--t-2);margin-bottom:20px;line-height:1.6">
            This 2-minute assessment covers accounting, valuation, LBO, behavioral, and market concepts. 
            We'll place you in the right difficulty band and customize your learning path.
          </p>
          <button class="quiz-btn primary" style="width:100%" onclick="startDiagnostic()">Start Assessment →</button>
          <button class="quiz-btn ghost" style="width:100%;margin-top:10px" onclick="skipDiagnostic()">Skip for now</button>
        </div>
      </div>
    </div>

    <!-- Active Assessment -->
    <div id="diagnostic-active" style="display:none">
      <div class="diagnostic-card">
        <div class="quiz-progress" style="margin-bottom:20px">
          <div class="quiz-progress-bar"><div class="quiz-progress-fill" id="diag-progress-fill"></div></div>
          <div class="quiz-progress-text" id="diag-progress-text">1 / 10</div>
        </div>
        <div class="quiz-cat" id="diag-cat">ACCOUNTING</div>
        <div class="quiz-question" id="diag-question">Loading...</div>
        <div class="quiz-answers" id="diag-answers"></div>
      </div>
    </div>

    <!-- Results -->
    <div id="diagnostic-results" style="display:none">
      <div class="diagnostic-header">
        <div class="diagnostic-icon">✨</div>
        <div class="diagnostic-title">Assessment Complete</div>
      </div>
      <div class="diagnostic-card">
        <div class="diagnostic-results">
          <div class="diagnostic-band" id="diag-band">INTERMEDIATE</div>
          <div class="diagnostic-score-big" id="diag-score">70%</div>
          <div class="diagnostic-score-label">Overall Score</div>
          <div class="diagnostic-breakdown">
            <div class="diagnostic-breakdown-item">
              <div class="diagnostic-breakdown-val" id="diag-tech-score">0%</div>
              <div class="diagnostic-breakdown-label">Technical</div>
            </div>
            <div class="diagnostic-breakdown-item">
              <div class="diagnostic-breakdown-val" id="diag-beh-score">0%</div>
              <div class="diagnostic-breakdown-label">Behavioral</div>
            </div>
            <div class="diagnostic-breakdown-item">
              <div class="diagnostic-breakdown-val" id="diag-deal-score">0%</div>
              <div class="diagnostic-breakdown-label">Markets</div>
            </div>
          </div>
          <p style="font-size:13px;color:var(--t-2);margin-bottom:20px;line-height:1.6" id="diag-recommendation">
            Based on your results, we recommend focusing on technical accounting concepts.
          </p>
          <button class="quiz-btn primary" style="width:100%" onclick="closeDiagnostic()">Start Learning →</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ─── QUESTIONS DATA ─────────────────── */
</script>
<script>

const QUESTIONS = [
  // ══════════════════════════════════════
  // QUESTIONS WITH MCQ SUPPORT (120)
  // ══════════════════════════════════════

  {id:100,cat:'tech',sub:'accounting',q:"What are the three main financial statements?",a:"The Income Statement, Balance Sheet, and Cash Flow Statement.",wrong:["Income Statement, Balance Sheet, and Statement of Shareholders\u2019 Equity.", "Profit & Loss Statement, Balance Sheet, and Trial Balance.", "Balance Sheet, Cash Flow Statement, and Budget Report."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:101,cat:'tech',sub:'accounting',q:"How are the three financial statements linked together?",a:"Net income from the Income Statement flows into the Cash Flow Statement (as operating cash flow) and into retained earnings on the Balance Sheet; the Cash Flow Statement\u2019s ending cash balance becomes cash on the Balance Sheet.",wrong:["They are not connected at all; each statement is independent.", "Only the Income Statement and Balance Sheet are linked, the Cash Flow Statement is separate.", "Net income from the Cash Flow Statement updates the Income Statement directly."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:102,cat:'tech',sub:'accounting',q:"What is working capital and how is it calculated?",a:"Working capital is the difference between a company\u2019s current assets and its current liabilities.",wrong:["It\u2019s the company\u2019s total assets minus total liabilities.", "It equals cash on hand plus inventory.", "It\u2019s current assets plus current liabilities."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:103,cat:'tech',sub:'accounting',q:"If depreciation increases by $10 (40% tax rate), how does it affect the financial statements?",a:"Net income falls by $6 (because $10 depreciation reduces EBIT, saving $4 in taxes at 40%), cash increases by $4 (adding back depreciation), and on the Balance Sheet cash is up $4, PP&E is down $10, and retained earnings is down $6.",wrong:["Net income increases by $4 and cash flow is unchanged.", "Net income drops by $10 and cash drops by $10.", "Only the Balance Sheet is affected: PP&E down $10 and equity down $10."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:104,cat:'tech',sub:'accounting',q:"What is the difference between cash accounting and accrual accounting?",a:"Cash accounting recognizes revenue and expenses only when cash is received or paid, whereas accrual accounting recognizes revenue when earned and expenses when incurred, matching them to the period (even if cash hasn\u2019t changed hands).",wrong:["There is no difference \u2013 both record transactions the same way.", "Cash accounting records only cash transactions; accrual accounting records only credit transactions.", "Accrual accounting waits for cash collection, unlike cash accounting."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:105,cat:'tech',sub:'accounting',q:"How can a company have positive net income but go bankrupt?",a:"This can happen if net income is not translating to cash \u2013 for example, working capital deterioration (revenues tied up in accounts receivable or high inventory) or large debt obligations can drain cash despite accounting profits.",wrong:["That\u2019s impossible \u2013 positive net income always means the company is fine.", "Only if the accounting is incorrect; otherwise it cannot happen.", "This only happens if the company spends too much on advertising."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:106,cat:'tech',sub:'accounting',q:"What is EBITDA and why is it important?",a:"EBITDA stands for Earnings Before Interest, Taxes, Depreciation, and Amortization. It is a measure of a company\u2019s operating performance, serving as a proxy for operating cash flow by excluding interest, taxes, and non-cash charges.",wrong:["EBITDA is the same as net income for the company.", "EBITDA equals net income plus all expenses.", "EBITDA is a company\u2019s earnings after all expenses including interest and taxes."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:107,cat:'tech',sub:'accounting',q:"How does an increase in accounts receivable affect cash flow?",a:"If accounts receivable rises (from sales on credit), reported revenue and net income increase, but no cash is received \u2013 it uses cash (reducing operating cash flow) because cash collection is delayed.",wrong:["It increases both net income and cash immediately.", "It has no impact on cash flow.", "It only affects the Balance Sheet by moving cash into receivables."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:108,cat:'tech',sub:'accounting',q:"What is the difference between accounts payable and accrued expenses?",a:"Both are current liabilities, but accounts payable is typically a one-time liability with an invoice (e.g. purchases on credit), while accrued expenses are incurred expenses (often recurring, like salaries or utilities) that have been recognized but not yet paid.",wrong:["They mean exactly the same thing with no distinction.", "Accounts payable are long-term debts, accrued expenses are short-term.", "Accrued expenses are already paid in cash, whereas accounts payable are not."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:109,cat:'tech',sub:'accounting',q:"If you could only use one financial statement to evaluate a company, which would you choose and why?",a:"The Cash Flow Statement \u2013 because it shows actual cash generation and usage, providing a true picture of liquidity. It\u2019s more telling of a company\u2019s financial health than the Income Statement (which can include non-cash items) or Balance Sheet (a snapshot).",wrong:["The Income Statement, because it shows the company\u2019s profit directly.", "The Balance Sheet, because it shows the company\u2019s net worth at a glance.", "It doesn\u2019t matter; all statements give the same information."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:110,cat:'tech',sub:'accounting',q:"What is goodwill and how is it created?",a:"Goodwill is an intangible asset that represents the excess amount paid in an acquisition over the fair market value of the target\u2019s net assets.",wrong:["Goodwill is the value of a company\u2019s reputation recorded on the balance sheet without any specific transaction.", "Goodwill arises when you pay less than the fair value of a company\u2019s assets.", "Goodwill is created whenever a company\u2019s market value exceeds its book value in the stock market."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:111,cat:'tech',sub:'accounting',q:"What is a deferred tax liability, and why might one be created?",a:"A deferred tax liability (DTL) is a tax expense amount that has been recognized on the Income Statement but not yet paid in cash. It arises when a company\u2019s accounting profit is higher than its taxable profit (for example, due to different depreciation methods), so taxes are owed in the future.",wrong:["It\u2019s when a company overpays taxes and expects a refund later.", "It\u2019s essentially the same as accounts payable for taxes.", "It means the company hasn\u2019t paid taxes for several years."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:112,cat:'tech',sub:'accounting',q:"Why is debt often considered a cheaper source of financing than equity?",a:"Because interest on debt is tax-deductible (creating a tax shield) and debt investors have priority in repayment (lower risk), debt usually has a lower required return than equity.",wrong:["Actually, equity is cheaper since dividends are optional.", "Debt is cheaper because you never have to pay it back.", "Equity financing always lowers the company\u2019s WACC compared to debt."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:113,cat:'tech',sub:'accounting',q:"What is net working capital?",a:"Net working capital = Current Assets \u2013 Current Liabilities. It indicates how much short-term resources the company has tied up in operations (like inventory and receivables) versus short-term obligations.",wrong:["It\u2019s just the cash available on hand for operations.", "It\u2019s total assets minus total liabilities.", "It\u2019s current assets plus current liabilities on the balance sheet."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:114,cat:'tech',sub:'accounting',q:"How do you calculate enterprise value (EV)?",a:"Enterprise Value = Equity Value (market cap) + total debt + preferred stock + minority interest \u2013 cash.",wrong:["EV = Equity Value minus total debt.", "EV = Total assets minus total liabilities.", "EV = Equity Value + cash \u2013 debt (you add cash to market cap)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:115,cat:'tech',sub:'accounting',q:"What is the difference between enterprise value and equity value?",a:"Equity value (market cap) represents the value of the shareholders\u2019 stake, whereas enterprise value represents the company\u2019s total value to all investors (equity plus net debt and other obligations), reflecting the full cost to acquire the business\u2019s operations.",wrong:["They are the same in all cases for a company.", "Equity value includes debt while enterprise value does not.", "Equity value is always smaller than enterprise value for any company."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:116,cat:'tech',sub:'accounting',q:"How do the financial statements reflect an equity issuance of $50?",a:"No impact on the Income Statement. On the Cash Flow Statement, cash increases by $50 from financing. On the Balance Sheet, cash (asset) increases by $50 and Shareholders\u2019 Equity increases by $50.",wrong:["Net income increases by $50 since cash is received.", "Liabilities increase by $50 because new shares are like debt.", "It decreases existing shareholders\u2019 equity by $50 due to dilution."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:117,cat:'tech',sub:'accounting',q:"If a company raises $100 in new debt, what is the impact on the financial statements?",a:"Immediately, no change to net income. Cash increases by $100 from the financing inflow, and on the Balance Sheet cash is up $100 and debt (liability) is up $100.",wrong:["Net income goes up because the company has more cash.", "Liabilities don\u2019t change since debt brings in cash.", "Equity increases by $100 because the company has more funds."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:118,cat:'tech',sub:'accounting',q:"Why are capital expenditures (CapEx) treated differently from operating expenses?",a:"Capital expenditures are capitalized (recorded as assets on the Balance Sheet) because they provide benefit over multiple periods (e.g., equipment used for years), whereas operating expenses (like salaries or taxes) benefit only the current period and are expensed immediately.",wrong:["They aren\u2019t treated differently \u2013 CapEx and operating costs are both expensed immediately.", "CapEx is expensed later to save on taxes, unlike operating costs.", "Operating expenses can be capitalized if the company wants, there\u2019s no rule."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:119,cat:'tech',sub:'accounting',q:"What is retained earnings?",a:"Retained earnings is the cumulative net income of the company minus any dividends that have been paid to shareholders. It represents the portion of profit reinvested in the business over time.",wrong:["It is the company\u2019s cash balance available for dividends.", "It\u2019s the initial capital that founders invested in the company.", "Retained earnings reset to zero every year after dividends are paid."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:120,cat:'tech',sub:'accounting',q:"What is the basic accounting equation?",a:"Assets = Liabilities + Shareholders\u2019 Equity (this must always hold true on the Balance Sheet).",wrong:["Revenue = Expenses + Profits.", "Cash = Income + Expenses.", "Assets = Liabilities \u2013 Equity."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:121,cat:'tech',sub:'accounting',q:"How do changes in working capital affect cash flow?",a:"Increases in current assets (like inventory or AR) are uses of cash (decreasing cash flow), while increases in current liabilities (like AP) are sources of cash (increasing cash flow).",wrong:["They don\u2019t affect cash flow at all.", "If inventory goes up, it increases cash available.", "Paying off payables early will increase operating cash flow."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:122,cat:'tech',sub:'accounting',q:"If inventory increases by $10 (paid in cash), how do the financial statements change?",a:"No change to the Income Statement (inventory purchase isn\u2019t expensed until sold). Cash Flow from Operations decreases by $10 (use of cash for inventory). On the Balance Sheet, inventory is up $10 and cash is down $10 (no net change in total assets).",wrong:["Inventory expense of $10 reduces net income by $10 immediately.", "Cash flow is unchanged because inventory isn\u2019t on the Cash Flow Statement.", "Assets increase by $10 with inventory, and equity increases $10 to balance."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:123,cat:'tech',sub:'accounting',q:"How does an increase in accounts payable affect the financial statements?",a:"If accounts payable increases (meaning the company is delaying payment), there is no expense on the Income Statement, cash flow from operations increases (cash is conserved), and on the Balance Sheet cash increases while accounts payable (a liability) increases by the same amount.",wrong:["It decreases cash because bills are piling up.", "It has no effect on cash since no revenue is involved.", "Net income drops because the company hasn\u2019t paid its expenses."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:124,cat:'tech',sub:'accounting',q:"What is deferred revenue?",a:"Deferred revenue is cash received by a company for goods or services it has yet to deliver. It\u2019s recorded as a liability on the Balance Sheet until the company fulfills the obligation (earns the revenue).",wrong:["Revenue that the company has earned but not collected in cash yet (essentially accounts receivable).", "An expense that has been paid in advance.", "An asset representing services the company will receive from suppliers."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:125,cat:'tech',sub:'valuation',q:"What are the three main valuation methodologies used to value a company?",a:"The three primary valuation methods are Comparable Companies Analysis (trading comps), Precedent Transaction Analysis, and Discounted Cash Flow (DCF) analysis.",wrong:["NPV (Net Present Value), IRR, and CAPM.", "Technical analysis, fundamental analysis, and quantitative analysis.", "EV/EBITDA, Price/Earnings, and Price/Book ratios."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:126,cat:'tech',sub:'valuation',q:"Why would you use multiple methods to value a company?",a:"Different valuation methods rely on different assumptions and may yield different values, so using multiple methods provides a range and cross-check. For example, precedent transactions and DCF often produce higher values than comparables.",wrong:["It isn\u2019t necessary \u2013 one method is enough if done correctly.", "To confuse the valuation and hope one method gives a desired number.", "Because no valuation method is reliable, so you try many at random."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:127,cat:'tech',sub:'valuation',q:"What is discounted cash flow (DCF) analysis?",a:"A DCF analysis estimates a company\u2019s intrinsic value by projecting its future free cash flows and discounting them to present value using a discount rate (usually WACC). The sum of the present values of projected cash flows and the terminal value gives the enterprise value.",wrong:["Calculating a company\u2019s value based only on its past profits with no assumptions about the future.", "Valuing a company by multiplying its earnings by the P/E ratio.", "It\u2019s a method to value stock options using cash flow models."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:128,cat:'tech',sub:'valuation',q:"How do you calculate the weighted average cost of capital (WACC)?",a:"WACC is calculated by weighting the cost of each capital component (debt, equity, preferred) by its proportion of total capital. Formula: WACC = Cost of Equity \u00d7 (% Equity) + Cost of Debt \u00d7 (% Debt) \u00d7 (1 \u2013 Tax Rate) + Cost of Preferred \u00d7 (% Preferred).",wrong:["It\u2019s just the average interest rate on all the company\u2019s loans.", "It\u2019s equal to the cost of equity since that\u2019s most expensive.", "By taking the average of the company\u2019s past stock returns."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:129,cat:'tech',sub:'valuation',q:"How do you calculate the cost of equity?",a:"Typically using the Capital Asset Pricing Model (CAPM): Cost of Equity = Risk-free rate + Beta \u00d7 (Market risk premium).",wrong:["It\u2019s just the dividend yield of the stock.", "By looking at the company\u2019s interest rate on debt and using the same number.", "There is no way to calculate it \u2013 it\u2019s just guessed."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:130,cat:'tech',sub:'valuation',q:"What is Beta in finance?",a:"Beta (\u03b2) measures a stock\u2019s volatility relative to the market. For example, a beta of 1.3 means the stock is 30% more volatile than the overall market.",wrong:["Beta is the company\u2019s cost of debt capital.", "Beta is an absolute measure of bankruptcy risk.", "If a stock has negative beta, it means its price can\u2019t go down."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:131,cat:'tech',sub:'valuation',q:"What is enterprise value (EV) and how is it calculated?",a:"Enterprise value is the total value of the firm\u2019s core operations to all capital providers. EV = Equity Value (market cap) + Debt + Preferred Stock + Minority Interest \u2013 Cash.",wrong:["EV is just another term for equity market capitalization.", "EV = Total Assets \u2013 Total Liabilities, exactly as on the balance sheet.", "EV = Equity Value plus cash plus debt."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:132,cat:'tech',sub:'valuation',q:"What is equity value (market value of equity)?",a:"Equity value (market cap) is the total market value of the shareholders\u2019 ownership: share price multiplied by the number of diluted shares outstanding.",wrong:["It\u2019s the book value of the company\u2019s equity on the balance sheet.", "It\u2019s the amount you\u2019d get if you sold all the company\u2019s assets and paid off debts.", "It is always equal to enterprise value minus debt."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:133,cat:'tech',sub:'valuation',q:"How do you get from equity value to enterprise value?",a:"Starting with Equity Value, you add debt, add preferred stock, add minority interest, and subtract cash to arrive at Enterprise Value.",wrong:["Add cash and subtract debt from equity value.", "There is no formula; enterprise value and equity value are unrelated.", "Multiply equity value by the P/E ratio."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:134,cat:'tech',sub:'valuation',q:"What are some other valuation techniques beyond the main three?",a:"Other methods include Liquidation Value, Replacement Cost, Leveraged Buyout (LBO) Analysis, Sum-of-the-Parts (valuing each division separately), and future share price analysis, among others.",wrong:["There are none; only DCF, comps, and precedents exist.", "Using the CAPM model or the Gordon Growth formula alone as a valuation.", "Only looking at financial ratios like ROE or ROA as valuations."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:135,cat:'tech',sub:'valuation',q:"What is the purpose of the terminal value in a DCF?",a:"The terminal value represents the company\u2019s value beyond the projection period. It can be calculated using the Gordon Growth method (TV = Final Year FCF * (1+g) / (WACC \u2013 g)) or using an exit multiple on a final year metric. It often constitutes a large portion of DCF value.",wrong:["It\u2019s just an arbitrary plug number to make the DCF math work.", "It\u2019s the amount of cash on hand at the end of the projection.", "It is the sum of the free cash flows during the projection period."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:136,cat:'tech',sub:'valuation',q:"How are unlevered free cash flows calculated for a DCF?",a:"Unlevered Free Cash Flow (UFCF) = EBIT * (1 \u2013 Tax Rate) + Depreciation & Amortization \u2013 Change in Net Working Capital \u2013 Capital Expenditures.",wrong:["Take net income and add back interest expense.", "Operating Cash Flow plus interest income minus dividends.", "EBITDA minus taxes and all financing costs."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:137,cat:'tech',sub:'valuation',q:"What is the difference between market value and book value of equity?",a:"Book value of equity is the shareholders\u2019 equity on the balance sheet (based on historical costs of assets and liabilities). Market value of equity is the company\u2019s value according to investors (current stock price * shares), which factors in future growth potential and can differ substantially from book value.",wrong:["They are always the same number for any given company.", "Market value is usually lower than book value in a healthy company.", "Book value includes intangible assets\u2019 market value, whereas market value does not."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:138,cat:'tech',sub:'valuation',q:"What does the P/E ratio tell you?",a:"The Price/Earnings ratio = Equity Value / Net Income (or price per share / earnings per share). It indicates how much investors are willing to pay per dollar of earnings. A higher P/E can suggest high growth expectations (or overvaluation), while a lower P/E might indicate lower growth or undervaluation.",wrong:["P/E is calculated as earnings per share divided by price \u2013 it measures earnings yield.", "A high P/E always means a stock is overvalued.", "The P/E accounts for a company\u2019s debt and is the same as EV/EBITDA."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:139,cat:'tech',sub:'valuation',q:"Why might two companies with the same earnings have different P/E ratios?",a:"Because of differences in expected growth, risk, and quality of earnings. Investors will pay a higher P/E for a company with higher growth prospects or lower risk, whereas a company with lower growth or higher risk will have a lower P/E.",wrong:["They shouldn\u2019t \u2013 if earnings are the same, the P/E must be the same.", "One of them must have misreported its earnings.", "It would only happen if one company\u2019s stock price is temporarily wrong."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:140,cat:'tech',sub:'valuation',q:"What is EV/EBITDA and why is it used?",a:"EV/EBITDA is Enterprise Value divided by EBITDA, a common valuation multiple used to compare companies\u2019 overall value relative to their operating earnings, independent of capital structure and taxes.",wrong:["EV/EBITDA is the same concept as the P/E ratio, just using EBITDA.", "It isn\u2019t used much because it accounts for debt, which is not useful.", "A higher EV/EBITDA is always better for a company\u2019s valuation."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:141,cat:'tech',sub:'valuation',q:"How do interest rates affect a company\u2019s valuation?",a:"Higher interest rates increase discount rates (and the cost of capital), which typically lowers the present value of future cash flows \u2013 reducing valuations. They also make debt financing more expensive and can shift investors towards bonds, generally putting downward pressure on stock valuations.",wrong:["They don\u2019t \u2013 valuations are independent of interest rate changes.", "Rising interest rates always increase company valuations because banks pay more interest.", "If interest rates rise, it has no effect on DCF calculations."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:142,cat:'tech',sub:'valuation',q:"What is an IPO?",a:"An Initial Public Offering (IPO) is the first time a private company offers its shares to the public in a new stock issuance. It allows the company to raise equity capital from public investors.",wrong:["It\u2019s a type of bond issued by a private company.", "It\u2019s the process of a public company going private.", "IPO stands for Instant Profit Opportunity, a guaranteed stock gain."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:143,cat:'tech',sub:'valuation',q:"How would you value a private company?",a:"You would use the same methods (comps, precedents, DCF) but need to account for the lack of market liquidity and transparency. You often apply a discount for lack of marketability, and you rely on comparables and fundamentals since there\u2019s no market price for reference.",wrong:["It cannot be done since there is no stock price.", "Only by using the company\u2019s book value of equity.", "Simply assume it has the same P/E as a public peer with no adjustments."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:144,cat:'tech',sub:'valuation',q:"What does the term \u201ccost of capital\u201d mean?",a:"Cost of capital is the required return that investors demand for providing capital to a company. It represents the company\u2019s overall \u201cprice\u201d for funding \u2013 for debt it\u2019s the interest rate (adjusted for tax), and for equity it\u2019s the expected return (e.g., via CAPM). WACC is the blend of these costs.",wrong:["It refers to the literal cost the company paid to build its offices and infrastructure.", "It\u2019s just another term for the interest rate on debt.", "It\u2019s the price a company pays to buy capital goods (like equipment)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:145,cat:'tech',sub:'valuation',q:"What is the Capital Asset Pricing Model (CAPM)?",a:"CAPM is a model used to estimate the expected return (cost of equity) of an asset. It\u2019s given by: Expected Return = Risk-free Rate + Beta \u00d7 (Market Return \u2013 Risk-free Rate). It links an asset\u2019s systematic risk (beta) to its expected return.",wrong:["It\u2019s a method to price options using assets as collateral.", "It calculates the cost of debt capital for a company.", "It\u2019s a model that values a company by its asset prices plus a premium."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:146,cat:'tech',sub:'valuation',q:"Which valuation methods generally yield higher versus lower valuations?",a:"Precedent transaction analysis (and often DCF) typically produces higher valuation estimates (due to control premiums and optimistic forecasts), while comparable company analysis tends to give lower valuations.",wrong:["All valuation methods should produce the same value if done correctly.", "Comparable companies usually show the highest values, and precedents the lowest.", "DCF always yields the lowest valuation outcome among the methods."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:147,cat:'tech',sub:'valuation',q:"What is minority interest and why is it added in enterprise value?",a:"Minority interest (non-controlling interest) is the portion of a subsidiary that the parent company doesn\u2019t own. It\u2019s added to enterprise value so that EV reflects 100% of the subsidiary\u2019s value when the financial metrics (like EBITDA) include 100% of that subsidiary\u2019s earnings.",wrong:["It\u2019s an irrelevant line item and is not included in enterprise value calculations.", "It refers to small shareholders of the company, and it should be subtracted in EV.", "It\u2019s the portion of equity owned by management; it\u2019s added as a form of goodwill in EV."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:148,cat:'tech',sub:'valuation',q:"Which is typically higher: a company\u2019s cost of debt or cost of equity?",a:"The cost of equity is higher than the cost of debt because equity investors require a greater return for higher risk (and unlike equity, debt interest is tax-deductible, making debt cheaper).",wrong:["Cost of debt is higher since lenders demand more return than equity holders.", "They are usually equal in a balanced capital structure.", "Cost of debt is always higher because interest rates exceed equity returns."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:149,cat:'tech',sub:'valuation',q:"How would you value a company using multiples (relative valuation)?",a:"By looking at comparable companies or transactions and applying their valuation multiples to the target. For example, take the median EV/EBITDA of peer companies and multiply it by the target\u2019s EBITDA to estimate the target\u2019s enterprise value.",wrong:["By multiplying the company\u2019s EBITDA by its growth rate.", "Just use the overall market P/E ratio for the company\u2019s earnings with no adjustments.", "There is no standard approach \u2013 using multiples is purely guessing the value."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:150,cat:'tech',sub:'lbo',q:"What is a leveraged buyout (LBO)?",a:"A leveraged buyout is the acquisition of a company using a significant amount of borrowed money (debt) to finance the purchase. Typically, the LBO capital structure might be around 60\u201390% debt financing.",wrong:["Any acquisition of a company without using any debt financing.", "A buyout of a company by issuing a lot of new equity to the public.", "When a company is taken over by another using only cash on hand, with no borrowing."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:151,cat:'tech',sub:'lbo',q:"Why would a private equity firm use leverage when buying a company?",a:"Using leverage (debt) amplifies returns on equity \u2013 it allows the PE firm to put in less of its own money and potentially earn a higher return on that equity investment. Debt also provides a tax shield (interest is tax-deductible).",wrong:["Because debt is free money with no downsides.", "In order to avoid having any skin in the game (no equity at risk at all).", "It doesn\u2019t \u2013 PE firms actually prefer to use all equity but banks force them to use debt."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:152,cat:'tech',sub:'lbo',q:"Which variables have the biggest impact on LBO returns?",a:"The exit multiple (and purchase price) has the largest impact on IRR. Next, the amount of leverage (debt) used significantly affects returns, followed by the company\u2019s operational performance (revenue growth and EBITDA margins).",wrong:["Mostly just the interest rate on the debt \u2013 other factors don\u2019t matter much.", "Only the company\u2019s revenue growth rate determines the IRR in an LBO.", "The choice of legal entity for the company is the most critical factor for returns."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:153,cat:'tech',sub:'lbo',q:"Can you walk me through a basic LBO model?",a:"In a simple LBO: (1) Make assumptions about purchase price, debt/equity mix, interest rates, and projections. (2) Create a Sources & Uses schedule to show financing and uses of capital. (3) Adjust the balance sheet for the new debt and equity and goodwill from the purchase. (4) Project the company\u2019s financials and determine debt paydown over the holding period. (5) At exit, assume an exit EBITDA multiple, calculate the sale price, repay remaining debt, and the rest is the equity return to the PE firm.",wrong:["\u201cWalk through\u201d means describe the steps of due diligence the PE firm does before a deal.", "First, decide a purchase price, then immediately sell off assets to pay debt, then exit the company in a year \u2013 that\u2019s it.", "Just project the company\u2019s cash flows and assume the debt magically pays itself off; an LBO model doesn\u2019t need any balance sheet adjustments."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:154,cat:'tech',sub:'lbo',q:"How do you choose the purchase price and exit multiple in an LBO model?",a:"Typically by looking at comparable companies and precedent transactions \u2013 what multiples they trade at. You might also work backward from a target IRR to solve for the exit price. In practice, a range of purchase/exit multiples is analyzed with sensitivity tables.",wrong:["These values are arbitrary \u2013 you pick whatever makes the model give a good return.", "Always assume the exit multiple is the same as the entry multiple with no justification.", "PE firms always just pay 10x EBITDA and also exit at 10x EBITDA regardless of the industry or company."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:155,cat:'tech',sub:'lbo',q:"What is an \"ideal\" LBO candidate?",a:"Ideal LBO candidates have stable and predictable cash flows, low ongoing capital expenditure needs, not too much existing debt, and an opportunity for efficiency improvements. They also often have strong management and assets that can be collateralized.",wrong:["Any company experiencing high volatility and unpredictable earnings is ideal for an LBO.", "Businesses that require very large capital expenditures constantly (so you can invest more) are the best LBO targets.", "Companies with extremely low margins and negative cash flow are preferred for LBOs because debt can turn them around."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:156,cat:'tech',sub:'lbo',q:"How can you use an LBO model to value a company (as in a \"floor valuation\")?",a:"You can determine the valuation a PE firm could pay by setting a targeted IRR (for example, 25%) and back-solving in Excel to find the maximum purchase price the firm could pay to achieve that return. Because PE firms usually pay less than strategic buyers, the LBO model gives a \u201cfloor\u201d valuation (the lowest reasonable value).",wrong:["By looking at the company\u2019s book value and using that as the floor value.", "It\u2019s not possible to value a company with an LBO model \u2013 it\u2019s only used for internal rate of return calculations.", "Simply take the DCF valuation and subtract the debt \u2013 that\u2019s the floor value from an LBO perspective."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:157,cat:'tech',sub:'lbo',q:"Give an example of a real-life LBO.",a:"A common example is buying a house with a mortgage: The down payment is the equity, the mortgage is the debt, mortgage interest payments are like LBO interest, and mortgage repayments are debt paydown. Eventually selling the house at a higher price and paying off the mortgage yields a return on the initial equity.",wrong:["Taking out a personal loan to buy groceries \u2013 it\u2019s similar to an LBO in daily life.", "Leasing a car is the same as doing an LBO on the car.", "Winning a lottery using borrowed money \u2013 because you pay back the debt after winning."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:158,cat:'tech',sub:'lbo',q:"How is the Balance Sheet adjusted in an LBO model?",a:"The new debt is added on the Liabilities side, and the old shareholders\u2019 equity is replaced by the new equity from the PE sponsor. Also, goodwill (or intangibles) is created on the Assets side to balance any excess purchase price over the book value of net assets.",wrong:["No major changes occur on the Balance Sheet except cash is updated; everything else stays the same.", "Assets are all marked to market and liabilities are ignored.", "Only the income statement is adjusted in an LBO; the balance sheet isn\u2019t used in LBO models."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:159,cat:'tech',sub:'lbo',q:"Why are goodwill and other intangibles created in an LBO?",a:"They act as \u201cplugs\u201d to balance the Balance Sheet. In an LBO, if the purchase price exceeds the book value of the company\u2019s net assets, that difference is recorded as goodwill (an intangible asset) so that Assets = Liabilities + Equity after the transaction.",wrong:["They represent the \u2018extra cash\u2019 that the PE firm gets as a discount in the deal.", "Goodwill is created to account for deferred tax liabilities only.", "No new goodwill is ever created in buyouts \u2013 it only appears in mergers, not LBOs."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:160,cat:'tech',sub:'lbo',q:"Why might a PE firm prefer to use as much debt as possible in an LBO, whereas a strategic buyer often uses cash?",a:"Because the PE firm intends to sell the company in a few years and wants to maximize its return on equity \u2013 using debt (which the company will later repay) boosts equity IRR. A strategic buyer plans to own long-term and is more conservative about leverage, plus can realize synergies using cash.",wrong:["Actually, strategic buyers always use more debt than PE firms do.", "PE firms use debt because they don\u2019t care if the company goes bankrupt \u2013 they have no money at risk.", "Strategic buyers can\u2019t use debt financing in acquisitions, only PE firms can."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:161,cat:'tech',sub:'lbo',q:"Do you need to build all three financial statements in an LBO model?",a:"Not necessarily. You usually project at least the Income Statement and some cash flow schedule to track debt repayment, but you can simplify the Balance Sheet (e.g., assume a percent change in working capital) instead of a full three-statement build.",wrong:["Yes \u2013 an LBO model must always include fully projected Income, Balance, and Cash Flow statements in detail.", "No \u2013 you only project the Balance Sheet because debt is on it; the other statements aren\u2019t needed at all.", "You only need the Income Statement since IRR is based on earnings growth alone."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:162,cat:'tech',sub:'lbo',q:"How would you determine how much debt a company can take on in an LBO?",a:"You\u2019d look at comparable LBOs and the company\u2019s own ability to service debt. You\u2019d examine leverage ratios (Debt/EBITDA) and interest coverage to ensure the company can handle the debt. Typically, during a boom lenders might allow ~5-6\u00d7 EBITDA debt. In short, you determine debt capacity by seeing what similar companies have carried and if the company\u2019s cash flow can cover interest and principal.",wrong:["It\u2019s solely based on the PE firm\u2019s preference \u2013 they decide an arbitrary debt amount.", "The company should always take the maximum debt offered by lenders without any analysis.", "Set debt equal to the company\u2019s total assets \u2013 that\u2019s the general rule for maximum leverage."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:163,cat:'tech',sub:'lbo',q:"What is the difference between bank debt and high-yield debt in an LBO?",a:"Bank debt (loans) usually has lower interest rates (often floating) and may amortize (principal paid down over time) and comes with maintenance covenants. High-yield debt has higher fixed interest, bullet maturity (no amortization), and incurrence covenants (fewer ongoing constraints but restrictions on things like new debt).",wrong:["There\u2019s no real difference \u2013 debt is debt, only the names differ.", "Bank debt always has higher interest rates than high-yield bonds.", "High-yield debt must be repaid early, whereas bank debt is usually only due at maturity."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:164,cat:'tech',sub:'lbo',q:"When might a PE firm use bank debt rather than high-yield debt, and vice versa?",a:"If the PE firm or company is concerned about interest payments and wants lower cost and stricter covenants, they\u2019ll use bank debt. They might prefer high-yield debt if they want more flexibility (fewer covenants) and can handle the higher interest, especially if they don\u2019t plan major expansions that covenants could restrict.",wrong:["PE firms always use all types of debt equally; there\u2019s no strategic choice involved.", "They would use bank debt only if high-yield markets are closed \u2013 otherwise high-yield is always better.", "High-yield is used for short-term loans and bank debt for long-term \u2013 that\u2019s the only distinction."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:165,cat:'tech',sub:'lbo',q:"Why might a PE firm buy a company in a \u201crisky\u201d industry such as technology?",a:"Even in risky industries, there are often mature, cash-flow-stable companies. Also, some PE firms specialize in specific strategies (industry roll-ups, turnarounds, carve-outs). They may identify a tech company that, despite the industry, has stable earnings or assets to borrow against, or they see potential to improve operations and generate high returns.",wrong:["They generally would not \u2013 PE firms strictly avoid all tech companies.", "Only if no other deals are available; otherwise they never touch risky sectors.", "PE firms rely on getting bank loans, and banks never lend for tech companies."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:166,cat:'tech',sub:'lbo',q:"What are some ways a PE firm can increase returns (IRR) on an LBO?",a:"Key ways include: negotiating a lower purchase price, achieving a higher exit multiple/price, using more leverage (debt) to reduce equity input, increasing the company\u2019s EBITDA growth or profit margins, and generating extra cash flow to pay down debt faster.",wrong:["Primarily by increasing the company\u2019s cash balance at closing.", "There\u2019s no way to influence returns \u2013 the IRR is fixed once the deal is done.", "By choosing not to use any debt at all so the equity grows faster (more equity = higher IRR)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:167,cat:'tech',sub:'lbo',q:"What is the tax shield in an LBO?",a:"The tax shield refers to the reduction in taxable income (and taxes) due to the interest expense on the LBO debt. The interest is tax-deductible, which increases the company\u2019s cash flow compared to having no debt (though interest expense still reduces net income).",wrong:["It\u2019s a special tax credit PE firms get for doing buyouts.", "It refers to depreciation deductions, not interest, in an LBO context.", "It\u2019s the fact that after an LBO the company doesn\u2019t pay taxes until the debt is repaid."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:168,cat:'tech',sub:'lbo',q:"What is a dividend recapitalization (dividend recap)?",a:"In a dividend recap, the company takes on new debt (or refinances) specifically to pay a cash dividend to the equity owners (usually the PE firm). It\u2019s a way for the PE firm to extract returns early without selling the company.",wrong:["It\u2019s when the PE firm issues new equity to pay off debt.", "It\u2019s a required debt repayment schedule set by lenders (paying a \u201cdividend\u201d to debt holders).", "It refers to the company defaulting and giving equity to debt holders as a \u2018recap\u2019."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:169,cat:'tech',sub:'lbo',q:"Why would a PE firm do a dividend recap of one of its portfolio companies?",a:"To return capital to itself (its investors) earlier and boost its realized IRR. A dividend recap allows the PE firm to take some money off the table before exit, increasing overall returns if done at the right timefinexecutive.com.",wrong:["Because the company is in financial distress and needs to raise equity.", "To reduce the equity value of the company so management can buy more shares.", "There is no benefit \u2013 dividend recaps are done due to lender requirements, not the PE firm\u2019s choice."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:170,cat:'tech',sub:'lbo',q:"How is the internal rate of return (IRR) calculated in an LBO?",a:"IRR is the annualized rate of return that the PE firm earns on its equity investment. It\u2019s calculated based on the equity cash flows \u2013 for example, if Initial Equity = X and Final Equity = Y after N years, IRR is the discount rate that makes the net present value zero (approximately (Y/X)^(1/N) \u2013 1).",wrong:["It\u2019s simply the average annual EBITDA growth rate of the company during the holding period.", "The IRR is just the interest rate on the LBO debt \u2013 that\u2019s why it\u2019s called internal rate of return.", "IRR is calculated by dividing the total profit by the number of years (linear approximation)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:171,cat:'tech',sub:'lbo',q:"What are typical exit strategies for a private equity investment in an LBO?",a:"Common exits include: selling the company to a strategic buyer (trade sale), selling to another sponsor (secondary buyout), or taking the company public through an IPO. Sometimes a PE firm might also recapitalize or break the company up and sell the pieces.",wrong:["PE firms generally hold onto LBO investments permanently and do not exit.", "The only exit is bankruptcy \u2013 if the LBO works, the company just stays private forever.", "They usually just refinance the debt continuously and don\u2019t actually sell the company to exit."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:172,cat:'tech',sub:'lbo',q:"How do strategic (corporate) buyers differ from financial sponsors in acquisitions?",a:"Strategic buyers are operating companies \u2013 they often can pay more because of synergies and a long-term outlook, and they usually use less debt. Financial sponsors (PE firms) focus on achieving a target return, heavily use leverage, and plan to exit in a few years, often paying a lower price than strategics for the same business.",wrong:["They don\u2019t differ \u2013 both strategics and PE firms approach valuation and deal financing the same way.", "Strategic buyers always use more debt financing than PE firms in acquisitions.", "Financial sponsors typically intend to own and operate the company for the very long term, just like strategic buyers, so there is no difference in approach."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:173,cat:'tech',sub:'lbo',q:"What IRR do PE firms typically target on an LBO investment?",a:"PE firms often target around a 20-25%+ annual IRR on an LBO. The exact target depends on the firm and environment, but generally they seek a high-teens or above-20% IRR to compensate for the risk and illiquidity.",wrong:["They are usually happy with a return similar to government bond yields (~2-3%).", "They typically target exactly 10% IRR, aligning with historical market averages.", "PE firms don\u2019t have specific return targets \u2013 any positive return is considered sufficient."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:174,cat:'tech',sub:'lbo',q:"What is a management buyout (MBO)?",a:"An MBO is a type of leveraged buyout where the company\u2019s own management team partners with a sponsor to buy the company from its owners. Management often co-invests and continues to run the company post-buyout, with the deal financed by debt and sponsor equity.",wrong:["It\u2019s when a PE firm buys out the management team and replaces them as part of the acquisition.", "It refers to management buying a small number of shares on the stock market (unrelated to a full buyout).", "It\u2019s a scenario where a company\u2019s management forces an acquisition by another company (management-initiated sale)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:175,cat:'beh',q:"Why do you want to work in investment banking?",a:"Explain your genuine interest and motivation, e.g., a passion for finance and deals, the fast-paced learning environment, and the opportunity to work on major transactions \u2013 and link it to your background/skills.",wrong:["\u201cBecause I heard the pay and bonuses are great.\u201d", "\u201cI\u2019m not really sure; I just applied because everyone else did.\u201d", "\u201cI eventually want to go into consulting, but I need a job for now.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:176,cat:'beh',q:"Why do you want to join our bank specifically?",a:"Mention specific qualities of the firm that attract you \u2013 for example, its strong industry group or culture, recent deals it led, and how those align with your interests and values. Show that you\u2019ve done your research on the bank.",wrong:["\u201cYour office is close to my house, which is convenient for me.\u201d", "\u201cI actually don\u2019t know much about your bank\u2019s differences.\u201d", "\u201cBecause I got rejected by all the other banks; this is my backup.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:177,cat:'beh',q:"What qualities make a good investment banker (or good analyst)?",a:"Key qualities include: strong analytical and quantitative skills, attention to detail, excellent communication, ability to handle pressure and long hours, teamwork, time management, and a solid work ethic.",wrong:["Being strictly a lone wolf \u2013 not needing to communicate with anyone.", "Preferring a strict 9-to-5 work-life balance above all else.", "Having a low attention to detail but being good at delegating all work to others."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:178,cat:'beh',q:"How do you handle stress and long working hours?",a:"Explain your approach to managing stress \u2013 for example, prioritizing tasks, staying organized, and maintaining a positive attitude. You might mention using short breaks or exercise to stay focused. Emphasize that you\u2019ve handled intense workloads successfully in the past.",wrong:["\u201cI never feel stress \u2013 I just ignore deadlines and hope for the best.\u201d", "\u201cI usually get very anxious and have trouble coping when under pressure.\u201d", "\u201cI don\u2019t handle it well at all \u2013 I tend to burn out quickly.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:179,cat:'beh',q:"Tell me about a time you had a conflict with a team member and how you resolved it.",a:"Use the STAR method (Situation, Task, Action, Result): describe the context, the disagreement, and how you addressed it constructively (through communication or compromise) to achieve a positive result. Emphasize teamwork and listening.",wrong:["\u201cI got into a big argument, and I let someone else or my boss deal with it.\u201d", "\u201cI ignored the person entirely until the project was over.\u201d", "\u201cWe never resolved it \u2013 the conflict derailed the project.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:180,cat:'beh',q:"What is your greatest weakness?",a:"Mention a genuine weakness but one that isn\u2019t a core requirement for the job, and crucially, discuss how you are actively working to improve it. For example, you might say you used to struggle with delegation, but you\u2019ve been overcoming it by consciously assigning tasks and trusting team members.",wrong:["\u201cI don\u2019t really have any weaknesses.\u201d", "\u201cI work too hard \u2013 I\u2019m a total perfectionist and workaholic.\u201d (a clich\u00e9 answer)", "\u201cI\u2019m bad at accounting and Excel.\u201d (a critical skill area for the job)"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:181,cat:'beh',q:"What is your greatest strength (or why should we hire you)?",a:"Highlight 2-3 strengths that are relevant \u2013 for example, strong analytical skills, a relentless work ethic, and ability to learn quickly \u2013 and back them up with brief examples. Connect your strengths to the demands of the analyst role to show you\u2019re a great fit.",wrong:["\u201cI\u2019m basically better than anyone here at everything \u2013 that\u2019s my strength.\u201d", "\u201cI will bring in a lot of business immediately.\u201d (unrealistic for a new analyst)", "\u201cI don\u2019t really know \u2013 maybe just that I need a job very badly.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:182,cat:'beh',q:"Describe a failure or mistake you\u2019ve made and what you learned from it.",a:"Discuss a specific example where something went wrong due to your error. Take responsibility, explain why it happened, and focus on what you learned and how you\u2019ve improved since. Emphasize the positive outcome or change that resulted from the failure.",wrong:["\u201cI\u2019ve never made any significant mistake.\u201d", "Describe a failure but blame others or circumstances for it entirely.", "Give an example of a huge failure but with no real lesson learned from it."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:183,cat:'beh',q:"Where do you see yourself in 5 years?",a:"Show that you\u2019re committed to the career path. For example, you might say, \u201cIn five years I aim to have developed deep expertise as an associate in investment banking, possibly taking on leadership responsibilities \u2013 hopefully at this firm \u2013 or leveraging the skills I\u2019ve built in a buy-side role.\u201d This shows ambition but also some flexibility.",wrong:["\u201cHonestly, probably doing something completely different because I don\u2019t plan to stay in finance.\u201d", "\u201cI haven\u2019t thought about it at all.\u201d", "\u201cRetired on a beach after making a lot of money quickly.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:184,cat:'beh',q:"Tell me about a time you disagreed with a superior (or were given an instruction you questioned).",a:"Choose a situation where you had a respectful disagreement with a boss or senior team member. Explain how you approached it diplomatically \u2013 for example, by gathering supporting data and politely suggesting an alternative. Emphasize respect and the positive outcome (maybe your suggestion was adopted or you reached a compromise).",wrong:["\u201cI openly told my boss he was wrong in front of everyone \u2013 it didn\u2019t go well.\u201d", "\u201cI ignored what my manager said and did it my way secretly.\u201d", "\u201cI never voice disagreements with superiors, even if I think they\u2019re making a mistake.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:185,cat:'beh',q:"Describe a time you demonstrated leadership.",a:"Provide an example where you took initiative and led a team or project \u2013 for instance, in a school project or internship. Explain the situation, actions you took (organizing the team, motivating others, delegating tasks), and the successful result (project completed, problem solved).",wrong:["\u201cI don\u2019t really like taking leadership roles, so I avoid them.\u201d", "Describe a situation where you tried to lead but focus on how others didn\u2019t listen and it failed, with no positive takeaway.", "\u201cI haven\u2019t had any opportunity to lead anyone in anything.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:186,cat:'beh',q:"Give an example of a time you had to meet a tight deadline.",a:"Explain the context (e.g., multiple assignments due the same week or a last-minute client request). Describe how you prioritized tasks, put in the necessary time (maybe late nights), and leveraged help or resources to meet the deadline successfully, highlighting your work ethic and organization.",wrong:["\u201cI missed the deadline, but it wasn\u2019t my fault.\u201d", "\u201cI panicked and wasn\u2019t able to complete the work on time.\u201d", "\u201cI\u2019ve never really been in a high-pressure deadline situation.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:187,cat:'beh',q:"What do you do for fun outside of work?",a:"Mention a couple of genuine hobbies or interests (sports, music, travel, etc.) that show you\u2019re a well-rounded person. It\u2019s good if you can highlight interests that involve challenge or commitment (e.g., playing on a team, learning an instrument) and briefly talk about them enthusiastically.",wrong:["\u201cNothing \u2013 I pretty much only eat, sleep, and work, nothing else.\u201d", "\u201cI like to party \u2013 that\u2019s basically it.\u201d", "\u201cI don\u2019t have any interests; I just browse social media all day.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:188,cat:'beh',q:"What achievement are you most proud of?",a:"Choose an accomplishment that is meaningful \u2013 it could be academic (like graduating top of class), professional (like completing a difficult internship project), or personal. Describe why it was challenging and the impact of that achievement, and why it matters to you, demonstrating passion and drive.",wrong:["\u201cI haven\u2019t really achieved much of note.\u201d", "\u201cGetting this interview, honestly \u2013 I haven\u2019t done anything else yet.\u201d", "Something completely unrelated and inappropriate (and not actually an achievement)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:189,cat:'beh',q:"Can you give an example of a time you went above and beyond what was asked of you?",a:"Yes. For instance, discuss a time during an internship or project where you proactively took on additional tasks or worked extra hours to ensure success. Describe what you did beyond the expectation and how it benefited the outcome or earned praise from a supervisor.",wrong:["\u201cI stick exactly to my job description, so I can\u2019t think of an example.\u201d", "\u201cI once stayed late, but nothing really got done \u2013 it didn\u2019t matter.\u201d", "\u201cI don\u2019t believe in going beyond what\u2019s required unless I\u2019m paid more.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:190,cat:'beh',q:"How would your coworkers or teammates describe you?",a:"They\u2019d likely say I\u2019m very dependable and hard-working. For example, in my last team project, I took on extra work to ensure we met our deadline, and my teammates appreciated that. They\u2019d also mention I\u2019m positive and calm under pressure, which helped keep the group on track.",wrong:["\u201cThey\u2019d probably say I like to take all the credit \u2013 but hey, I do a lot.\u201d", "\u201cI think they\u2019d say I prefer to work alone and not communicate much.\u201d", "\u201cThey\u2019d likely mention I\u2019m not very reliable with my tasks.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:191,cat:'beh',q:"Describe a time you had to manage multiple tasks or priorities simultaneously.",a:"Talk about a period (perhaps during school or an internship) where you balanced several commitments \u2013 explain how you organized your time, set priorities, and perhaps delegated or asked for help to handle everything successfully. Emphasize your time management and work ethic.",wrong:["\u201cWhen I have multiple tasks, I tend to get overwhelmed and miss deadlines.\u201d", "\u201cI usually focus on one thing and ignore the others until later, even if it means some tasks don\u2019t get done.\u201d", "\u201cI\u2019ve never really multitasked before, so I\u2019m not sure how I\u2019d handle it.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:192,cat:'beh',q:"Tell me about a time you received constructive criticism. How did you respond?",a:"For example: \u201cIn my last internship, my manager pointed out errors in my financial model. I listened carefully, acknowledged the mistakes, and took it as a learning opportunity. I asked for tips to improve, and then I double-checked all my work going forward. As a result, my accuracy improved and my manager noted the progress.\u201d",wrong:["\u201cI got defensive and argued with the feedback at first.\u201d", "\u201cI generally ignore criticism because I believe I know the best way to do things.\u201d", "\u201cI haven\u2019t really received any criticism because everything I do is perfect.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:193,cat:'beh',q:"Do you prefer to work independently or in a team?",a:"Say that you\u2019re comfortable with both. For instance, \u201cI enjoy working in a team \u2013 I\u2019ve had great team experiences and I find complex projects benefit from collaboration. But I\u2019m also self-driven and can tackle independent tasks efficiently. In banking you need both: teamwork on deals but also autonomy in analyses.\u201d",wrong:["\u201cI only like working alone \u2013 teams just slow me down.\u201d", "\u201cI prefer team work so I can rely on others to do the heavy lifting.\u201d", "\u201cIt doesn\u2019t matter \u2013 I\u2019m indifferent and don\u2019t have any preference or experience with either.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:194,cat:'beh',q:"How do you handle mistakes in your work?",a:"I take responsibility and address them immediately. I would notify the team if it\u2019s significant, and work to correct the error. For example, in a past project I found a mistake in our analysis before sending it out; I double-checked everything, fixed the error, and then implemented a new checklist to prevent similar mistakes. I treat mistakes as lessons to improve.",wrong:["\u201cI usually try to cover it up or fix it quietly so no one finds out.\u201d", "\u201cIf I make a mistake, I tend to get very flustered and it affects my work negatively.\u201d", "\u201cI haven\u2019t made any mistakes in my work so far.\u201d"],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:195,cat:'deal',q:"What is inflation?",a:"Inflation is a general increase in the price level of goods and services, which corresponds to a decrease in the purchasing power of money.",wrong:["A one-time jump in the price of a single good.", "A general decrease in prices economy-wide.", "Another term for economic growth."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:196,cat:'deal',q:"What is deflation?",a:"Deflation is a general decline in prices for goods and services, often associated with reduced money supply or demand. It\u2019s the opposite of inflation, with increased purchasing power of money.",wrong:["When prices rise at a faster rate than normal (hyperinflation).", "A temporary drop in the price of a specific item like oil.", "The situation when inflation exists but is very low (near 0%)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:197,cat:'deal',q:"What is Gross Domestic Product (GDP)?",a:"GDP is the total monetary value of all final goods and services produced within a country\u2019s borders in a given time period (usually yearly or quarterly)",wrong:["A measure of a country\u2019s income tax collections each year.", "The total value of a country\u2019s exports minus imports.", "The total money supply in an economy at a given time."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:198,cat:'deal',q:"What is monetary policy?",a:"Monetary policy refers to the actions by a nation\u2019s central bank to control the money supply and influence interest rates in order to achieve economic goals like stable prices and growth",wrong:["Any government spending and taxation decisions by Congress.", "Policies that involve printing money to pay off government debt only.", "The central bank\u2019s policy of issuing stocks and bonds to the public."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:199,cat:'deal',q:"What is fiscal policy?",a:"Fiscal policy is the use of government spending and taxation by the government (not the central bank) to influence economic conditions \u2013 for example, increasing spending or cutting taxes to stimulate the economy",wrong:["Actions by the central bank to set interest rates and print money.", "Any policy related to the financial industry\u2019s regulations.", "Policies to control inflation by adjusting the money supply."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:200,cat:'deal',q:"How do rising interest rates set by the Fed affect the economy?",a:"Raising interest rates increases borrowing costs for consumers and businesses, which tends to reduce spending and investment, slowing economic growth and helping to curb inflation.",wrong:["Higher interest rates always cause the economy to grow faster because savers earn more.", "They have no significant impact on overall economic activity.", "Rising rates primarily affect only the stock market and not the broader economy."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:201,cat:'deal',q:"How do interest rates affect bond prices?",a:"Interest rates and bond prices move inversely: when interest rates rise, existing bond prices fall; when rates fall, bond prices rise",wrong:["Higher interest rates cause existing bond prices to rise as well.", "They don\u2019t affect bonds, since bond coupons are fixed.", "Bond prices move in the same direction as interest rates (rate up, price up)."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:202,cat:'deal',q:"What is a yield curve, and what does an inverted yield curve indicate?",a:"The yield curve is a graph showing interest rates (yields) for bonds of different maturities (e.g., 3-month vs 10-year Treasuries). An inverted yield curve (short-term rates higher than long-term rates) often signals expectations of an economic downturn or recession",wrong:["The yield curve shows stock market returns over time; an inversion means stock prices will rise.", "It\u2019s a curve that shows inflation rates; an inversion means deflation is happening.", "It graphs a country\u2019s GDP growth; an inverted curve indicates hypergrowth."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:1},
  {id:203,cat:'deal',q:"How does a strong U.S. dollar affect U.S. companies and the economy?",a:"A stronger dollar makes U.S. exports more expensive abroad (hurting exporters) and reduces the dollar value of foreign earnings for U.S. companies. However, it makes imports cheaper for U.S. consumers, which can help keep inflation low",wrong:["A strong dollar helps all exporters because it means they earn more in foreign currency.", "It causes import prices to rise for U.S. consumers.", "It has virtually no impact on multinational companies\u2019 financial results."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:204,cat:'deal',q:"What is the U.S. Federal Reserve\u2019s dual mandate?",a:"The Fed\u2019s dual mandate is to achieve maximum employment and stable prices (low, stable inflation) in the economy",wrong:["To balance the federal budget and finance government debt.", "To devalue the currency and create inflation intentionally.", "To control both stock prices and housing prices."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:205,cat:'deal',q:"What is quantitative easing (QE)?",a:"Quantitative easing is a monetary policy where a central bank purchases government bonds and other securities to inject liquidity and increase the money supply, aiming to lower long-term interest rates and stimulate the economy",wrong:["It\u2019s when the government eases tax rates during a recession.", "A policy of raising interest rates quickly to combat inflation.", "A type of fiscal stimulus involving direct payments to citizens."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:206,cat:'deal',q:"What is the difference between nominal and real interest rates?",a:"The nominal interest rate is the stated rate not adjusted for inflation, whereas the real interest rate equals the nominal rate minus the inflation rate, reflecting the true purchasing power of the return",wrong:["They are the same thing; real and nominal rates have no difference.", "Nominal is after inflation adjustment, real is before inflation.", "Nominal rates are always lower than real rates in practice."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:207,cat:'deal',q:"What is stagflation?",a:"Stagflation is a situation of stagnant economic growth (or recession) combined with high inflation. In other words, the economy faces high unemployment and high inflation at the same time.",wrong:["It refers to hyperinflation during an economic boom.", "It\u2019s another term for a standard recession (normal business cycle).", "It describes an economy with deflation and high growth simultaneously."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:208,cat:'deal',q:"How is a recession defined?",a:"A recession is commonly defined as two consecutive quarters of decline in GDP (negative GDP growth). It\u2019s a significant economic downturn in activity",wrong:["When the stock market falls by over 20% from a peak.", "Any single quarter of GDP decline is labeled a recession.", "A period of high inflation combined with high unemployment."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:209,cat:'deal',q:"What is the unemployment rate?",a:"The unemployment rate is the percentage of the labor force that is jobless but actively seeking employment. It is a lagging indicator of economic health.",wrong:["The percentage of the population that doesn\u2019t have a job (including children and retirees).", "The percentage of working-age people not working, regardless of job search.", "It\u2019s the number of people unemployed divided by the total population."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:210,cat:'deal',q:"What is the Consumer Price Index (CPI)?",a:"The CPI is an index that measures the average change over time in the prices paid by consumers for a basket of goods and services \u2013 it\u2019s a key indicator used to track inflation.",wrong:["It\u2019s the index of prices that producers pay for raw materials.", "An index of stock market prices for consumer goods companies.", "A measure of consumer confidence levels in the economy."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:2},
  {id:211,cat:'deal',q:"What is a government budget deficit?",a:"A budget deficit occurs when a government\u2019s expenditures exceed its revenues in a given period, so the government is spending more money than it takes in",wrong:["When a government\u2019s exports are greater than its imports in a year.", "Any time government debt increases, regardless of revenues.", "It refers to the trade gap when imports exceed exports."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:212,cat:'deal',q:"What is the national debt?",a:"The national debt is the total amount of money the government owes \u2013 essentially the accumulation of all past budget deficits (net of any surpluses).",wrong:["The amount of money the country currently prints each year.", "The total value of money circulating in the economy.", "It\u2019s the debt of all citizens combined rather than the government."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:213,cat:'deal',q:"What is hyperinflation?",a:"Hyperinflation is extremely rapid, out-of-control inflation \u2013 prices rising so fast that money loses value almost daily. For example, inflation rates above 50% per month would qualify as hyperinflation",wrong:["Any inflation rate above 5% per year.", "A period of deflation followed by inflation, alternating quickly.", "When prices double over a decade \u2013 a very high long-term inflation."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:214,cat:'deal',q:"How can central banks reduce high inflation?",a:"Central banks can combat inflation by adopting contractionary monetary policy: for example, raising interest rates and reducing the money supply (e.g., selling bonds) to cool down spending and price increases",wrong:["By lowering interest rates to encourage more production and lower prices.", "By printing more money so people can afford higher prices.", "They cannot influence inflation at all; it\u2019s solely driven by fiscal policy."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:215,cat:'deal',q:"What is an exchange rate?",a:"An exchange rate is the price of one currency in terms of another currency. For example, an exchange rate of 1 USD = 0.90 EUR means one U.S. dollar can be exchanged for 0.9 euros.",wrong:["It\u2019s the rate at which goods exchange in barter within an economy.", "It\u2019s the interest rate parity between two countries.", "The rate of converting commodities into money within one country."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:216,cat:'deal',q:"What is a trade deficit?",a:"A trade deficit occurs when a country\u2019s imports of goods and services exceed its exports. In other words, the country is buying more from abroad than it sells, causing net money outflow to other countries.",wrong:["When a country\u2019s exports are greater than its imports.", "It\u2019s the government budget deficit related to international trade.", "When a country\u2019s currency is weaker than other currencies."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:217,cat:'deal',q:"What are emerging markets?",a:"Emerging markets are economies that are in the process of rapid growth and industrialization and have some characteristics of developed markets but are not yet fully developed. Examples include countries like China, India, Brazil, etc.",wrong:["All countries that are not in North America or Europe.", "Any market that is currently going up in value is an \u201cemerging market.\u201d", "It refers to new industries emerging within a developed country\u2019s economy."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:218,cat:'deal',q:"What is an economic depression, and how is it different from a recession?",a:"A depression is a severe, prolonged economic downturn, much worse than a typical recession. For example, it involves a very sharp fall in GDP (often 10% or more) and high unemployment lasting for years (e.g., the Great Depression of the 1930s).",wrong:["There is no difference \u2013 a depression and recession are the same thing.", "A depression is when stock markets crash, whereas a recession is GDP-related.", "A depression is simply any recession that occurs in a developing country."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
  {id:219,cat:'deal',q:"How do tariffs on imports affect the economy?",a:"Tariffs (import taxes) make imported goods more expensive. They can protect domestic industries by reducing foreign competition, but consumers pay higher prices and other countries may retaliate. In general, high tariffs can slow trade and potentially hurt economic efficiency.",wrong:["Tariffs only generate government revenue without affecting prices.", "Tariffs always help an economy by guaranteeing domestic jobs with no downsides.", "Tariffs mainly affect exports, not imports, so they have little impact on domestic consumers."],tip:"Focus on understanding the core concept and why common misconceptions are incorrect.",difficulty:3},
];

</script>

<script>
/* ─── THEME ──────────────────────────── */
function setNavActive(el) {
  document.querySelectorAll('#nav-links .nav-link').forEach(l => l.classList.remove('nav-active'));
  el.classList.add('nav-active');
}

function toggleTheme() {
  const html = document.documentElement;
  const isDark = html.getAttribute('data-theme') === 'dark';
  html.setAttribute('data-theme', isDark ? 'light' : 'dark');
  const icon = document.getElementById('theme-icon');
  const label = document.getElementById('theme-label-app');
  if (icon) icon.textContent = isDark ? '☀' : '☽';
  if (label) label.textContent = isDark ? 'LIGHT' : 'DARK';
}

/* ─── GUEST LOGIN (testing bypass) ───── */
function guestLogin() {
  document.getElementById('greeting-name').textContent = 'there';
  document.getElementById('sb-name').textContent = 'Guest';
  document.getElementById('sb-avatar').textContent = 'G';
  const emailEl = document.getElementById('sb-email-display');
  if (emailEl) emailEl.textContent = 'guest mode';
  showScreen('app');
}

/* ─── SCROLL HELPERS ─────────────────── */
function navScrollTo(id) {
  const el = document.getElementById(id);
  if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

/* ════════════════════════════════════════
   INTERACTIVE HERO PREVIEW — FULL MIRROR
════════════════════════════════════════ */
const PV_VIEWS = ['dashboard','bank','flash','mock'];
const PV_TITLES = {
  dashboard: 'superday.app — Dashboard',
  bank:      'superday.app — Question Bank',
  flash:     'superday.app — Flashcards',
  mock:      'superday.app — Mock Interview · Goldman Sachs',
};

/* ── Nav switching ── */
function prevNav(view, el) {
  PV_VIEWS.forEach(v => {
    const pane = document.getElementById('pv-' + v);
    if (pane) pane.style.display = 'none';
    const nav = document.getElementById('pnav-' + v);
    if (nav) nav.classList.remove('ps-active');
  });
  const target = document.getElementById('pv-' + view);
  if (target) target.style.display = 'flex';
  if (el) el.classList.add('ps-active');
  const titleEl = document.getElementById('prev-title');
  if (titleEl) titleEl.textContent = PV_TITLES[view] || 'superday.app';
  if (view === 'flash' && !pvFCInit) { pvFCRender(); pvFCInit = true; }
}

/* ── Question Bank filter ── */
function pvBankFilter(el, cat) {
  document.querySelectorAll('#pv-bank-list .pv-q-item').forEach(row => {
    row.style.display = (cat === 'all' || row.dataset.cat === cat) ? 'flex' : 'none';
  });
  document.querySelectorAll('#pv-bank .qb-pill').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
}

/* ── Question Bank expand/collapse ── */
function pvToggleQ(row) {
  const ans   = row.querySelector('.pv-ans');
  const caret = row.querySelector('.pv-caret');
  const open  = ans.style.display !== 'none';
  // close all
  document.querySelectorAll('#pv-bank-list .pv-q-item').forEach(r => {
    r.querySelector('.pv-ans').style.display = 'none';
    r.querySelector('.pv-caret').style.transform = '';
    r.style.background = '';
  });
  if (!open) {
    ans.style.display = 'block';
    caret.style.transform = 'rotate(180deg)';
    row.style.background = 'var(--bg-hover)';
  }
}

/* ── Flashcards ── */
const PV_FC = [
  { cat:'VALUATION',
    q:'What is the difference between equity value and enterprise value?',
    a:'Equity value = market cap (what belongs to shareholders). EV = equity value + net debt + minority interest − associates. EV is the total acquisition cost. Use EV for unlevered multiples (EV/EBITDA, EV/Revenue), equity value for levered multiples (P/E, P/B).' },
  { cat:'ACCOUNTING',
    q:'Walk me through a $10 D&A increase across all three statements.',
    a:'IS: pre-tax income ↓$10, taxes ↓$3.50, net income ↓$6.50. CFS: NI ↓$6.50 but D&A added back +$10, so OCF ↑$3.50. BS: PP&E (net) ↓$10; cash ↑$3.50; retained earnings ↓$6.50 — balances.' },
  { cat:'WACC',
    q:'What is WACC and how do you calculate each component?',
    a:'WACC = (E/V × Ke) + (D/V × Kd × (1−t)). Ke via CAPM: Rf + β(Rm−Rf). Kd = pre-tax cost of debt × (1 − tax rate). Use market values not book. Re-lever beta if using a comparable\'s beta.' },
  { cat:'LBO',
    q:'What makes a good LBO candidate?',
    a:'Stable, predictable FCF to service debt. Low capex (asset-light). Defensive market position with pricing power. Identifiable operational improvements. Clean balance sheet. Clear exit path (strategic buyer or IPO) in 3–7 years.' },
];
let pvFCIdx = 0, pvFCFlipped = false, pvFCInit = false;

function pvFCRender() {
  const c = PV_FC[pvFCIdx];
  const inner = document.getElementById('pv-fc-inner');
  if (inner) inner.style.transform = '';
  pvFCFlipped = false;
  setTimeout(() => {
    const qEl = document.getElementById('pv-fc-q');
    const aEl = document.getElementById('pv-fc-a');
    const cEl = document.getElementById('pv-fc-cat');
    const pEl = document.getElementById('pv-fc-prog');
    if (qEl) qEl.textContent = c.q;
    if (aEl) aEl.textContent = c.a;
    if (cEl) cEl.textContent = c.cat;
    if (pEl) pEl.textContent = (pvFCIdx + 1) + ' / ' + PV_FC.length;
  }, pvFCFlipped ? 250 : 0);
}
function pvFlipCard() {
  const inner = document.getElementById('pv-fc-inner');
  pvFCFlipped = !pvFCFlipped;
  if (inner) inner.style.transform = pvFCFlipped ? 'rotateY(180deg)' : '';
}
function pvFCNav(dir) {
  pvFCIdx = (pvFCIdx + dir + PV_FC.length) % PV_FC.length;
  const inner = document.getElementById('pv-fc-inner');
  if (inner) inner.style.transform = '';
  pvFCFlipped = false;
  setTimeout(pvFCRender, 0);
}

/* ── Mock Interview ── */
let pvMockRound = 0;
const PV_MOCK_REPLIES = [
  { t:8, s:9, c:7, text:'Good structure. Terminal value assumptions — especially the growth rate — have the biggest impact. Now: what discount rate would you use, and how do you derive it?' },
  { t:7, s:8, c:8, text:'Solid. Beta is the trickiest part of CAPM. Follow-up: what happens to DCF value if you increase the terminal growth rate by 100bps?' },
  { t:9, s:8, c:8, text:'Strong. WACC sensitivity is something interviewers love. One more: how do precedent transactions typically compare to comps in value, and why?' },
];
function pvMockSend() {
  const input = document.getElementById('pv-mock-input');
  const chat  = document.getElementById('pv-mock-chat');
  const text  = (input.value || '').trim();
  if (!text) return;
  input.value = '';

  // User bubble
  chat.innerHTML += `
    <div style="display:flex;gap:7px;flex-direction:row-reverse;align-items:flex-start">
      <div style="width:20px;height:20px;border-radius:50%;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;font-size:7.5px;font-weight:700;color:var(--t-2);flex-shrink:0;margin-top:1px">Y</div>
      <div style="background:var(--accent);opacity:0.88;border-radius:8px 0 8px 8px;padding:8px 10px;font-size:11px;color:white;line-height:1.55;max-width:88%">${text.replace(/</g,'&lt;')}</div>
    </div>`;
  chat.scrollTop = chat.scrollHeight;

  // Typing indicator
  const typId = 'pvtyp_' + Date.now();
  chat.innerHTML += `
    <div id="${typId}" style="display:flex;gap:7px;align-items:flex-start">
      <div style="width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,#5E6AD2,#8b8ff8);display:flex;align-items:center;justify-content:center;font-size:7.5px;font-weight:700;color:white;flex-shrink:0;margin-top:1px">AC</div>
      <div style="background:rgba(255,255,255,0.05);border:1px solid var(--line);border-radius:0 8px 8px 8px;padding:8px 12px;font-size:13px;color:var(--t-3);letter-spacing:2px">···</div>
    </div>`;
  chat.scrollTop = chat.scrollHeight;

  setTimeout(() => {
    const typ = document.getElementById(typId);
    if (typ) typ.remove();
    const r = PV_MOCK_REPLIES[pvMockRound % PV_MOCK_REPLIES.length];
    pvMockRound++;
    const sc = (n) => `<span style="color:${n>=8?'var(--green)':'#e0a820'};font-weight:600">${n}/10</span>`;
    const scores = `<div style="display:flex;gap:10px;margin-top:5px;font-size:10px;color:var(--t-3)">Technical ${sc(r.t)} · Structure ${sc(r.s)} · Confidence ${sc(r.c)}</div>`;
    chat.innerHTML += `
      <div style="display:flex;gap:7px;align-items:flex-start">
        <div style="width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,#5E6AD2,#8b8ff8);display:flex;align-items:center;justify-content:center;font-size:7.5px;font-weight:700;color:white;flex-shrink:0;margin-top:1px">AC</div>
        <div style="background:rgba(255,255,255,0.05);border:1px solid var(--line);border-radius:0 8px 8px 8px;padding:8px 10px;font-size:11px;color:var(--t-2);line-height:1.55;max-width:88%">
          ${r.text}${scores}
        </div>
      </div>`;
    chat.scrollTop = chat.scrollHeight;
  }, 1000);
}

/* ─── ROI CALCULATOR ─────────────────── */
const PLANS = [{ name:'Weekly', cost:3.99 }, { name:'Monthly', cost:10 }, { name:'Lifetime', cost:100 }];
function calcROI() {
  const salary = parseInt(document.getElementById('roi-salary').value);
  const bonus  = parseInt(document.getElementById('roi-bonus').value);
  const years  = parseInt(document.getElementById('roi-years').value);
  const planI  = parseInt(document.getElementById('roi-plan').value);
  const plan   = PLANS[planI];

  document.getElementById('roi-salary-label').textContent = '$' + salary.toLocaleString();
  document.getElementById('roi-bonus-label').textContent  = '$' + bonus.toLocaleString();
  document.getElementById('roi-years-label').textContent  = years + (years === 1 ? ' year' : ' years');
  document.getElementById('roi-plan-label').textContent   = plan.name;

  const totalEarn = salary * years + bonus;
  const cost = plan.cost;
  const multiple = Math.round(totalEarn / cost);

  document.getElementById('roi-total-earn').textContent = '$' + totalEarn.toLocaleString();
  document.getElementById('roi-cost').textContent = '$' + cost.toLocaleString();
  document.getElementById('roi-multiple').textContent = multiple.toLocaleString() + '×';
  document.getElementById('roi-sub').textContent =
    'every $1 spent on Superday returns $' + Math.round(totalEarn / cost).toLocaleString() + ' in earnings';
}

/* ─── FAQ ────────────────────────────── */
function toggleFaq(el) {
  const isOpen = el.classList.contains('open');
  document.querySelectorAll('.faq-item').forEach(f => f.classList.remove('open'));
  if (!isOpen) el.classList.add('open');
}

/* ─── LANDING DEMO: QUESTION BANK ─────── */
function demoToggleQ(el) {
  const ans = el.querySelector('.demo-q-ans');
  const caret = el.querySelector('span[style*="font-size:11px"]');
  const isOpen = ans.style.display !== 'none';
  // close all
  document.querySelectorAll('#demo-qb-list .demo-q-ans').forEach(a => a.style.display = 'none');
  document.querySelectorAll('#demo-qb-list .qb-item').forEach(i => i.style.background = '');
  if (!isOpen) {
    ans.style.display = 'block';
    el.style.background = 'rgba(94,106,210,0.06)';
  }
}
function demoFilterBank(pill, cat) {
  document.querySelectorAll('.qb-toolbar .qb-pill').forEach(p => p.classList.remove('active'));
  pill.classList.add('active');
}

/* ─── LANDING DEMO: FLASHCARDS ─────────── */
const DEMO_CARDS = [
  { cat:'Technical — Valuation', q:'What is the difference between equity value and enterprise value?',
    a:'Equity value (market cap) = what belongs to shareholders. Enterprise value = equity value + net debt (debt minus cash). EV represents the full cost to acquire the business. EV is used in operating multiples (EV/EBITDA) because EBITDA is pre-debt; equity value in equity multiples (P/E) because net income is post-debt.',
    tip:'A company can have a higher EV than equity value (net debt > 0) or lower (net cash position).' },
  { cat:'Technical — Accounting', q:'Walk me through the three financial statements.',
    a:'Income Statement: revenue minus expenses = net income. Balance Sheet: snapshot of assets = liabilities + equity. Cash Flow Statement: starts with net income, adjusts for non-cash items and working capital changes to show actual cash movement. Net income flows into retained earnings on the BS.',
    tip:'Always be ready to draw the linkages — this is the most fundamental IB concept.' },
  { cat:'Technical — Valuation', q:'Walk me through a DCF analysis.',
    a:'(1) Project unlevered FCF for 5–10 years. (2) Calculate terminal value using Gordon Growth or exit multiple. (3) Discount all cash flows at WACC. (4) Sum to get enterprise value. (5) Subtract net debt to get equity value. (6) Divide by diluted shares for implied share price.',
    tip:'Be prepared to discuss WACC components and why you pick a specific terminal growth rate.' },
  { cat:'Technical — Accounting', q:'If depreciation increases by $10, walk through the impact.',
    a:'IS: Pre-tax income ↓$10, tax expense ↓$3.50 (35% rate), net income ↓$6.50. CFS: Net income ↓$6.50 but D&A is added back (+$10), so OCF ↑$3.50. BS: PP&E ↓$10 (net of depreciation), cash ↑$3.50, retained earnings ↓$6.50 — still balances.',
    tip:'Memorise this cold — it appears in almost every technical interview.' },
  { cat:'Technical — Valuation', q:'What is WACC and how do you calculate it?',
    a:'WACC = (E/V × Ke) + (D/V × Kd × (1-t)). E = equity, D = debt, V = E+D. Ke = cost of equity via CAPM (Rf + β × ERP). Kd = cost of debt (yield to maturity). The (1-t) tax shield reflects that interest is tax-deductible. Use market values, not book values.',
    tip:'Higher beta = higher WACC = lower DCF value. Know why each component moves.' },
];
let demoFCIndex = 0, demoFCFlipped = false, demoFCOrder = [0,1,2,3,4];

function demoFCRender() {
  const i = demoFCOrder[demoFCIndex];
  const c = DEMO_CARDS[i];
  document.getElementById('demo-fc-cat').textContent = c.cat;
  document.getElementById('demo-fc-q').textContent = c.q;
  document.getElementById('demo-fc-a').textContent = c.a;
  document.getElementById('demo-fc-tip').textContent = '💡 ' + c.tip;
  const pct = Math.round((demoFCIndex / DEMO_CARDS.length) * 100);
  document.getElementById('demo-fc-label').textContent = c.cat.split('—')[1]?.trim().toUpperCase() + ' · Card ' + (demoFCIndex+1) + ' of ' + DEMO_CARDS.length;
  document.getElementById('demo-fc-prog').textContent = pct + '% complete';
  // reset flip
  demoFCFlipped = false;
  const card = document.getElementById('demo-fc-card');
  if (card) card.style.transform = 'rotateY(0deg)';
}
function demoFlipCard() {
  demoFCFlipped = !demoFCFlipped;
  const card = document.getElementById('demo-fc-card');
  if (card) card.style.transform = demoFCFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
}
function demoFCNav(dir) {
  demoFCIndex = (demoFCIndex + dir + DEMO_CARDS.length) % DEMO_CARDS.length;
  demoFCRender();
}
function demoFCShuffle() {
  for (let i = demoFCOrder.length-1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i+1));
    [demoFCOrder[i], demoFCOrder[j]] = [demoFCOrder[j], demoFCOrder[i]];
  }
  demoFCIndex = 0;
  demoFCRender();
}

/* ─── LANDING DEMO: MOCK INTERVIEW ──────── */
const DEMO_RESPONSES = [
  { score: { tech: 8, struct: 9, conf: 7 }, follow: 'Good. Now — what discount rate would you use, and why? Walk me through how you\'d derive your WACC.' },
  { score: { tech: 7, struct: 8, conf: 8 }, follow: 'Solid. Let\'s push further — what happens to your DCF valuation if the terminal growth rate increases by 1%?' },
  { score: { tech: 9, struct: 8, conf: 7 }, follow: 'Strong technical answer. One more — how do precedent transactions typically compare to public comps in terms of valuation, and why?' },
];
let demoChatRound = 0;
function demoChatSend() {
  const input = document.getElementById('demo-chat-input');
  const body = document.getElementById('demo-chat-body');
  const text = input.value.trim();
  if (!text) return;
  input.value = '';
  // Add user message
  body.innerHTML += `<div class="chat-msg user"><div class="cm-av usr">Y</div><div class="cm-bubble usr">${text}</div></div>`;
  body.scrollTop = body.scrollHeight;
  // Typing indicator
  const typingId = 'demo-typing-' + Date.now();
  body.innerHTML += `<div class="chat-msg" id="${typingId}"><div class="cm-av ai">AC</div><div class="cm-bubble ai"><span class="tdot"></span><span class="tdot"></span><span class="tdot"></span></div></div>`;
  body.scrollTop = body.scrollHeight;
  setTimeout(() => {
    const typing = document.getElementById(typingId);
    if (typing) typing.remove();
    const r = DEMO_RESPONSES[demoChatRound % DEMO_RESPONSES.length];
    demoChatRound++;
    const scoreHtml = `<div class="score-block" style="margin-top:6px">
      <div class="score-line"><span class="sc-label">Technical Accuracy</span><span class="sc-val ${r.score.tech>=8?'sc-g':'sc-y'}">${r.score.tech}/10</span></div>
      <div class="score-line"><span class="sc-label">Structure & Clarity</span><span class="sc-val ${r.score.struct>=8?'sc-g':'sc-y'}">${r.score.struct}/10</span></div>
      <div class="score-line"><span class="sc-label">Confidence</span><span class="sc-val ${r.score.conf>=8?'sc-g':'sc-y'}">${r.score.conf}/10</span></div>
    </div>`;
    body.innerHTML += `<div class="chat-msg"><div class="cm-av ai">AC</div><div class="cm-bubble ai">Good answer. ${scoreHtml}</div></div>`;
    body.innerHTML += `<div class="chat-msg"><div class="cm-av ai">AC</div><div class="cm-bubble ai">${r.follow}</div></div>`;
    body.scrollTop = body.scrollHeight;
  }, 1200);
}

/* ─── SUPABASE ────────────────────────── */
const SUPABASE_URL = 'https://tetpqitwoprytartedxy.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRldHBxaXR3b3ByeXRhcnRlZHh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzExMTI4NDgsImV4cCI6MjA4NjY4ODg0OH0.DOHqrfIaOlUROyZCDDISZfmTSfXOjfYu3cDYijAY44E';
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

let currentUser = null;

/* ─── AUTH HELPERS ───────────────────── */
function showAuthTab(tab) {
  switchAuthTab(tab);
  showScreen('auth');
}

function switchAuthTab(tab) {
  document.getElementById('tab-login').classList.toggle('active', tab === 'login');
  document.getElementById('tab-signup').classList.toggle('active', tab === 'signup');
  document.getElementById('auth-login-form').style.display = tab === 'login' ? 'block' : 'none';
  document.getElementById('auth-signup-form').style.display = tab === 'signup' ? 'block' : 'none';
}

async function doLogin() {
  const email = document.getElementById('login-email').value.trim();
  const password = document.getElementById('login-password').value;
  const btn = document.getElementById('login-btn');
  const msg = document.getElementById('login-msg');
  msg.className = 'auth-msg'; msg.textContent = '';
  if (!email || !password) { showMsg(msg, 'error', 'Please fill in all fields.'); return; }
  btn.disabled = true; btn.textContent = 'Logging in…';
  const { data, error } = await sb.auth.signInWithPassword({ email, password });
  btn.disabled = false; btn.textContent = 'Log in →';
  if (error) { showMsg(msg, 'error', error.message); return; }
  await onSignedIn(data.user);
}

async function doSignup() {
  const name = document.getElementById('signup-name').value.trim();
  const email = document.getElementById('signup-email').value.trim();
  const password = document.getElementById('signup-password').value;
  const btn = document.getElementById('signup-btn');
  const msg = document.getElementById('signup-msg');
  msg.className = 'auth-msg'; msg.textContent = '';
  if (!name || !email || !password) { showMsg(msg, 'error', 'Please fill in all fields.'); return; }
  if (password.length < 8) { showMsg(msg, 'error', 'Password must be at least 8 characters.'); return; }
  btn.disabled = true; btn.textContent = 'Creating account…';
  const { data, error } = await sb.auth.signUp({
    email, password,
    options: { data: { full_name: name } }
  });
  btn.disabled = false; btn.textContent = 'Create account →';
  if (error) { showMsg(msg, 'error', error.message); return; }
  if (data.user && !data.session) {
    showMsg(msg, 'success', 'Check your email to confirm your account, then log in.');
    return;
  }
  await onSignedIn(data.user);
}

async function doSignOut() {
  await sb.auth.signOut();
  currentUser = null;
  progress = { answered: new Set(), activityLog: [] };
  showScreen('landing');
}

function showMsg(el, type, text) {
  el.className = 'auth-msg ' + type;
  el.textContent = text;
}

async function onSignedIn(user) {
  currentUser = user;
  const name = user.user_metadata?.full_name || user.email.split('@')[0];
  const cap = capitalize(name);
  document.getElementById('greeting-name').textContent = cap;
  document.getElementById('sb-name').textContent = cap;
  document.getElementById('sb-avatar').textContent = cap[0].toUpperCase();
  const emailEl = document.getElementById('sb-email-display');
  if (emailEl) emailEl.textContent = user.email;
  await loadProgress();
  showScreen('app');
}

/* ─── PROGRESS PERSISTENCE ───────────────── */
async function loadProgress() {
  if (!currentUser) return;
  try {
    const { data } = await sb.from('progress').select('*').eq('user_id', currentUser.id).single();
    if (data) {
      progress.answered = new Set(JSON.parse(data.answered || '[]'));
      progress.activityLog = JSON.parse(data.activity_log || '[]');
      progress.mastery = JSON.parse(data.mastery || '{}');
      progress.diagnosticDone = data.diagnostic_done || false;
      progress.userBand = data.user_band || 'intermediate';
      progress.diagnosticScores = data.diagnostic_scores ? JSON.parse(data.diagnostic_scores) : null;
    }
  } catch(e) { /* first time user, no progress yet */ }
  updateDashStats();
  updateMasteryStats();
  
  // Check if we should show diagnostic
  if (!progress.diagnosticDone) {
    setTimeout(checkFirstVisit, 500);
  }
}

async function saveProgress() {
  if (!currentUser) return;
  try {
    await sb.from('progress').upsert({
      user_id: currentUser.id,
      answered: JSON.stringify([...progress.answered]),
      activity_log: JSON.stringify(progress.activityLog),
      mastery: JSON.stringify(progress.mastery),
      diagnostic_done: progress.diagnosticDone,
      user_band: progress.userBand,
      diagnostic_scores: progress.diagnosticScores ? JSON.stringify(progress.diagnosticScores) : null,
      updated_at: new Date().toISOString()
    }, { onConflict: 'user_id' });
  } catch(e) { /* silent fail */ }
}

/* ─── SCREENS ────────────────────────── */
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + id).classList.add('active');
  if (id === 'app') {
    const d = new Date();
    const el = document.getElementById('dash-date');
    if (el) el.textContent = d.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
    updateDashStats();
    loadNews();
  }
}

function ctaSignup() {
  const email = document.getElementById('cta-email').value.trim();
  if (email) {
    const signupEmail = document.getElementById('signup-email');
    if (signupEmail) signupEmail.value = email;
  }
  showAuthTab('signup');
}

function capitalize(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

/* ─── VIEWS ──────────────────────────── */
function showView(id) {
  document.querySelectorAll('.app-view').forEach(v => v.classList.remove('active'));
  document.querySelectorAll('.sb-item').forEach(n => n.classList.remove('active'));
  const view = document.getElementById('view-' + id);
  if (view) view.classList.add('active');
  const labels = {dashboard:'Dashboard',bank:'Question Bank',flash:'Flashcards',mock:'Mock Interview',quiz:'Quiz Mode',map:'Knowledge Map'};
  document.querySelectorAll('.sb-item').forEach(n => {
    if (n.textContent.trim().toLowerCase().includes((labels[id]||id).toLowerCase()))
      n.classList.add('active');
  });
  if (id === 'bank') renderBank();
  if (id === 'flash') initFlash();
  if (id === 'map') renderKnowledgeMap();
  if (id === 'quiz') showQuizSetup();
}

function filterBankNav(cat) {
  showView('bank');
  setTimeout(() => filterBank(cat), 50);
}

/* ─── PROGRESS ───────────────────────── */
// Mastery levels: 0 = new, 1 = missed, 2 = unsure, 3 = got it (mastered after 3 consecutive)
// SRS intervals in minutes: [1, 10, 60, 360, 1440, 4320, 10080] (1min to 1 week)
const SRS_INTERVALS = [1, 10, 60, 360, 1440, 4320, 10080];

let progress = { 
  answered: new Set(), 
  activityLog: [],
  mastery: {},
  diagnosticDone: false,
  userBand: 'intermediate',
  diagnosticScores: null
};

let studyMode = 'all'; // 'all', 'due', 'weak', 'quick'
let sessionTimer = null;
let sessionStartTime = null;

function getMastery(id) {
  if (!progress.mastery[id]) {
    progress.mastery[id] = { level: 0, streak: 0, lastSeen: null, nextDue: null };
  }
  return progress.mastery[id];
}

function getMasteryClass(id) {
  const m = getMastery(id);
  if (m.level === 0 && m.streak === 0) return 'new';
  if (m.level >= 3 || m.streak >= 3) return 'mastered';
  return 'learning';
}

function isDue(id) {
  const m = getMastery(id);
  if (!m.nextDue) return false;
  return Date.now() >= m.nextDue;
}

function isWeak(id) {
  const m = getMastery(id);
  return m.level === 1 || m.level === 2;
}

function getDueCount() {
  return QUESTIONS.filter(q => isDue(q.id)).length;
}

function getWeakCount() {
  return QUESTIONS.filter(q => isWeak(q.id)).length;
}

function updateMasteryStats() {
  let newCount = 0, learningCount = 0, masteredCount = 0;
  QUESTIONS.forEach(q => {
    const cls = getMasteryClass(q.id);
    if (cls === 'new') newCount++;
    else if (cls === 'learning') learningCount++;
    else masteredCount++;
  });
  
  const sn = document.getElementById('stat-new');
  const sl = document.getElementById('stat-learning');
  const sm = document.getElementById('stat-mastered');
  if (sn) sn.textContent = newCount;
  if (sl) sl.textContent = learningCount;
  if (sm) sm.textContent = masteredCount;
  
  // Update mode counts
  const mca = document.getElementById('mode-count-all');
  const mcd = document.getElementById('mode-count-due');
  const mcw = document.getElementById('mode-count-weak');
  if (mca) mca.textContent = QUESTIONS.length;
  if (mcd) mcd.textContent = getDueCount();
  if (mcw) mcw.textContent = getWeakCount();
}

function markAnswered(id) {
  progress.answered.add(id);
  const q = QUESTIONS.find(x => x.id === id);
  if (q) {
    progress.activityLog.unshift({ cat: q.cat, title: q.q, time: 'Just now' });
    if (progress.activityLog.length > 6) progress.activityLog.pop();
  }
  updateDashStats();
  saveProgress();
}

function updateDashStats() {
  const total = QUESTIONS.length;
  const ans = progress.answered.size;
  const ka = document.getElementById('kpi-answered');
  const kt = document.getElementById('kpi-total');
  const kaf = document.getElementById('kpi-answered-fill');
  if (ka) ka.textContent = ans;
  if (kt) kt.textContent = total;
  if (kaf) kaf.style.width = (ans/total*100) + '%';

  const cats = ['tech','beh','brain','deal'];
  const done = cats.filter(c => QUESTIONS.filter(q=>q.cat===c).some(q=>progress.answered.has(q.id)));
  const kc = document.getElementById('kpi-cats');
  const kcf = document.getElementById('kpi-cats-fill');
  if (kc) kc.textContent = done.length;
  if (kcf) kcf.style.width = (done.length/4*100) + '%';

  // Due for review
  const dueCount = getDueCount();
  const kd = document.getElementById('kpi-due');
  const kdf = document.getElementById('kpi-due-fill');
  if (kd) kd.textContent = dueCount;
  if (kdf) kdf.style.width = (dueCount/total*100) + '%';

  // Mastered count
  const masteredCount = QUESTIONS.filter(q => getMasteryClass(q.id) === 'mastered').length;
  const km = document.getElementById('kpi-mastered');
  const kmf = document.getElementById('kpi-mastered-fill');
  if (km) km.textContent = masteredCount;
  if (kmf) kmf.style.width = (masteredCount/total*100) + '%';

  // Update practice button text
  const practiceBtn = document.getElementById('practice-btn-text');
  if (practiceBtn) {
    if (dueCount > 0) {
      practiceBtn.textContent = 'Review ' + dueCount + ' due cards →';
    } else if (masteredCount < total) {
      practiceBtn.textContent = 'Continue learning →';
    } else {
      practiceBtn.textContent = 'Practice today →';
    }
  }

  const days = ['M','T','W','T','F','S','S'];
  const idx = (new Date().getDay()+6)%7;
  const sd = document.getElementById('streak-dots');
  if (sd) sd.innerHTML = days.map((d,i) => {
    const cls = i < idx ? 'done' : i === idx ? 'today' : 'empty';
    return '<div class="s-dot ' + cls + '">' + d + '</div>';
  }).join('');
  const ks = document.getElementById('kpi-streak');
  if (ks) ks.textContent = idx + 1;

  cats.forEach(c => {
    const pool = QUESTIONS.filter(q=>q.cat===c);
    const n = pool.filter(q=>progress.answered.has(q.id)).length;
    const pct = Math.round(n/pool.length*100);
    const pe = document.getElementById('pct-'+c);
    const fe = document.getElementById('fill-'+c);
    const ce = document.getElementById('count-'+c);
    if (pe) pe.textContent = pct+'%';
    if (fe) fe.style.width = pct+'%';
    if (ce) ce.textContent = n + ' of ' + pool.length + ' answered';
  });
  renderActivity();
}

function smartPractice() {
  const dueCount = getDueCount();
  if (dueCount > 0) {
    goToDueReview();
  } else {
    showView('flash');
  }
}

function goToDueReview() {
  showView('flash');
  setTimeout(() => setStudyMode('due'), 100);
}

function renderActivity() {
  const el = document.getElementById('activity-list');
  if (!el) return;
  if (!progress.activityLog.length) {
    el.innerHTML = '<div style="padding:32px 16px;text-align:center;font-size:12.5px;color:var(--t-3)">No activity yet — start practicing.</div>';
    return;
  }
  const icons = { tech:'📊', beh:'💬', brain:'🧠', deal:'📈' };
  const colors = { tech:'var(--accent-dim)', beh:'var(--green-dim)', brain:'var(--amber-dim)', deal:'var(--blue-dim)' };
  el.innerHTML = progress.activityLog.map(a =>
    '<div class="act-item">' +
    '<div class="act-icon" style="background:' + (colors[a.cat]||'var(--bg-3)') + '">' + (icons[a.cat]||'📋') + '</div>' +
    '<div class="act-text">' + (a.title.length > 55 ? a.title.slice(0,55)+'…' : a.title) + '</div>' +
    '<div class="act-time">' + a.time + '</div></div>'
  ).join('');
}

/* ─── NEWS ───────────────────────────── */
async function loadNews() {
  const el = document.getElementById('news-list');
  if (!el) return;
  try {
    const res = await fetch("https://api.anthropic.com/v1/messages", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({
        model:"claude-sonnet-4-5-20250929",
        max_tokens:800,
        messages:[{role:"user",content:"Generate 5 realistic market news headlines for today (" + new Date().toDateString() + ") relevant to IB candidates. Cover M&A, capital markets, macro, deals. Return ONLY a JSON array: [{tag,headline,time}]. tag: M&A|MARKETS|RATES|DEALS|MACRO. time: Xm ago or Xh ago. No markdown."}]
      })
    });
    const data = await res.json();
    const raw = data.content?.map(c=>c.text||'').join('')||'[]';
    const items = JSON.parse(raw.replace(/```json|```/g,'').trim());
    el.innerHTML = items.map(n =>
      '<div class="news-item-row">' +
      '<span class="news-tag-pill">' + n.tag + '</span>' +
      '<span class="news-hl">' + n.headline + '</span>' +
      '<span class="news-time-sm">' + n.time + '</span></div>'
    ).join('');
  } catch(e) {
    el.innerHTML = '<div style="padding:24px;text-align:center;font-size:12px;color:var(--t-3)">Market news unavailable.</div>';
  }
}

/* ─── QUESTION BANK ──────────────────── */
let bankCat = 'all', bankSub = 'all';

function catLabel(c) {
  return {tech:'Technical',beh:'Behavioral',brain:'Brain Teaser',deal:'Deals & Markets'}[c]||c;
}

function filterBank(cat) {
  bankCat = cat; bankSub = 'all';
  document.querySelectorAll('.bank-pill[data-cat]').forEach(b =>
    b.classList.toggle('active', b.dataset.cat === cat));
  const subRow = document.getElementById('subtopic-row');
  if (subRow) {
    subRow.classList.toggle('show', cat === 'tech');
    document.querySelectorAll('.bank-pill[data-sub]').forEach(b =>
      b.classList.toggle('active', b.dataset.sub === 'all'));
  }
  renderBank();
}

function filterSub(sub) {
  bankSub = sub;
  document.querySelectorAll('.bank-pill[data-sub]').forEach(b =>
    b.classList.toggle('active', b.dataset.sub === sub));
  renderBank();
}

function renderBank() {
  const search = (document.getElementById('bank-search')?.value||'').toLowerCase();
  let qs = bankCat === 'all' ? QUESTIONS : QUESTIONS.filter(q => q.cat === bankCat);
  if (bankCat === 'tech' && bankSub !== 'all') qs = qs.filter(q => q.sub === bankSub);
  if (search) qs = qs.filter(q => q.q.toLowerCase().includes(search)||q.a.toLowerCase().includes(search));
  const el = document.getElementById('q-list');
  if (!el) return;

  if (bankCat === 'tech' && bankSub === 'all' && !search) {
    const acc = qs.filter(q=>q.sub==='accounting');
    const val = qs.filter(q=>q.sub==='valuation');
    const lbo = qs.filter(q=>q.sub==='lbo');
    el.innerHTML = renderGroup('Accounting', acc, 0) + renderGroup('Valuation', val, acc.length) + renderGroup('LBO', lbo, acc.length + val.length);
    return;
  }
  el.innerHTML = qs.map((q,i) => renderQRow(q,i)).join('');
}

function renderGroup(title, qs, offset) {
  if (!qs.length) return '';
  return '<div class="q-group-header"><span class="q-group-title">' + title + '</span><span class="q-group-count">' + qs.length + ' questions</span><div class="q-group-line"></div></div>' +
    qs.map((q,i) => renderQRow(q, offset+i)).join('');
}

function renderQRow(q, i) {
  const pillClass = {tech:'qp-tech',beh:'qp-beh',brain:'qp-brain',deal:'qp-deal'}[q.cat]||'qp-tech';
  const subLabels = {accounting:'Accounting', valuation:'Valuation', lbo:'LBO'};
  const tag = q.sub
    ? '<span class="q-pill ' + pillClass + '">' + (subLabels[q.sub] || q.sub) + '</span>'
    : '<span class="q-pill ' + pillClass + '">' + catLabel(q.cat) + '</span>';
  const masteryClass = getMasteryClass(q.id);
  const masteryDot = '<span class="mastery-dot ' + masteryClass + '" title="' + 
    (masteryClass === 'mastered' ? 'Mastered' : masteryClass === 'learning' ? 'Learning' : 'New') + '"></span>';
  return '<div class="q-row" id="qr-' + q.id + '" onclick="toggleQ(' + q.id + ')">' +
    '<div class="q-head">' + masteryDot + '<span class="q-num">' + String(i+1).padStart(2,'0') + '</span>' +
    '<span class="q-text">' + q.q + '</span>' + tag +
    '<span class="q-caret">⌄</span></div>' +
    '<div class="q-body"><div class="q-body-label">Model Answer</div>' +
    '<div class="q-body-answer">' + q.a + '</div>' +
    '<div class="q-body-tip"><strong>Interview tip:</strong> ' + q.tip + '</div></div></div>';
}

function toggleQ(id) {
  const el = document.getElementById('qr-'+id);
  el.classList.toggle('open');
  if (el.classList.contains('open')) markAnswered(id);
}

/* ─── FLASHCARDS ─────────────────────── */
let flashDeck = [], flashIdx = 0, flashFlipped = false;
let flashCat = 'all';

function setStudyMode(mode) {
  studyMode = mode;
  document.querySelectorAll('.mode-btn').forEach(b => 
    b.classList.toggle('active', b.dataset.mode === mode));
  
  // Reset timer for quick mode
  if (mode === 'quick') {
    startSessionTimer();
  } else {
    stopSessionTimer();
  }
  
  buildFlashDeck();
  flashIdx = 0;
  flashFlipped = false;
  renderCard();
  updateMasteryStats();
}

function buildFlashDeck() {
  let pool = flashCat === 'all' ? [...QUESTIONS] : QUESTIONS.filter(q => q.cat === flashCat);
  
  switch(studyMode) {
    case 'due':
      pool = pool.filter(q => isDue(q.id));
      // Sort by most overdue first
      pool.sort((a, b) => {
        const mA = getMastery(a.id), mB = getMastery(b.id);
        return (mA.nextDue || 0) - (mB.nextDue || 0);
      });
      break;
    case 'weak':
      pool = pool.filter(q => isWeak(q.id));
      // Sort by lowest level first
      pool.sort((a, b) => getMastery(a.id).level - getMastery(b.id).level);
      break;
    case 'quick':
      // Random 10 cards
      for (let i = pool.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [pool[i], pool[j]] = [pool[j], pool[i]];
      }
      pool = pool.slice(0, 10);
      break;
    default:
      // 'all' mode - prioritize due cards, then new, then mastered
      pool.sort((a, b) => {
        const mA = getMastery(a.id), mB = getMastery(b.id);
        const dueA = isDue(a.id) ? 0 : 1;
        const dueB = isDue(b.id) ? 0 : 1;
        if (dueA !== dueB) return dueA - dueB;
        
        const clsA = getMasteryClass(a.id), clsB = getMasteryClass(b.id);
        const order = { 'new': 0, 'learning': 1, 'mastered': 2 };
        return order[clsA] - order[clsB];
      });
  }
  
  flashDeck = pool;
}

function setFlashCat(cat) {
  flashCat = cat;
  document.querySelectorAll('.bank-pill[data-fcat]').forEach(b =>
    b.classList.toggle('active', b.dataset.fcat === cat));
  buildFlashDeck();
  flashIdx = 0;
  flashFlipped = false;
  renderCard();
}

function shuffleFlash() {
  for (let i = flashDeck.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [flashDeck[i], flashDeck[j]] = [flashDeck[j], flashDeck[i]];
  }
  flashIdx = 0;
  flashFlipped = false;
  renderCard();
}

function initFlash() {
  buildFlashDeck();
  updateMasteryStats();
  renderCard();
  
  // Add keyboard listeners
  document.addEventListener('keydown', handleFlashKeyboard);
}

function handleFlashKeyboard(e) {
  // Only handle if flashcard view is active
  const flashView = document.getElementById('view-flash');
  if (!flashView || !flashView.classList.contains('active')) return;
  
  // Don't handle if typing in an input
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
  
  switch(e.code) {
    case 'Space':
      e.preventDefault();
      flipCard();
      break;
    case 'ArrowLeft':
      e.preventDefault();
      prevCard();
      break;
    case 'ArrowRight':
      e.preventDefault();
      nextCard();
      break;
    case 'Digit1':
    case 'Numpad1':
      if (flashFlipped) { e.preventDefault(); rateCard(1); }
      break;
    case 'Digit2':
    case 'Numpad2':
      if (flashFlipped) { e.preventDefault(); rateCard(2); }
      break;
    case 'Digit3':
    case 'Numpad3':
      if (flashFlipped) { e.preventDefault(); rateCard(3); }
      break;
  }
}

function renderCard() {
  const confBar = document.getElementById('confidence-bar');
  if (confBar) confBar.classList.remove('show');
  
  if (!flashDeck.length) {
    // No cards to show
    const cl = document.getElementById('card-cat-label');
    const qt = document.getElementById('card-q-text');
    const bt = document.getElementById('card-back-text');
    const fm = document.getElementById('flash-meta');
    if (cl) cl.textContent = '';
    if (qt) qt.textContent = studyMode === 'due' ? 'No cards due for review!' : 
                            studyMode === 'weak' ? 'No weak spots — keep it up!' : 'No cards available.';
    if (bt) bt.textContent = '';
    if (fm) fm.textContent = '0 cards';
    return;
  }
  
  const q = flashDeck[flashIdx];
  const ci = document.getElementById('card-inner');
  if (ci) { ci.classList.remove('flipped'); flashFlipped = false; }
  
  setTimeout(function() {
    const cl = document.getElementById('card-cat-label');
    const qt = document.getElementById('card-q-text');
    const bt = document.getElementById('card-back-text');
    const fm = document.getElementById('flash-meta');
    const ff = document.getElementById('flash-bar-fill');
    const fp = document.getElementById('flash-prev');
    const fn = document.getElementById('flash-next');
    
    // Show mastery indicator in category label
    const masteryClass = getMasteryClass(q.id);
    const masteryDot = masteryClass === 'mastered' ? '●' : masteryClass === 'learning' ? '◐' : '○';
    const dueIndicator = isDue(q.id) ? ' · DUE' : '';
    
    if (cl) cl.innerHTML = catLabel(q.cat) + (q.sub ? ' — ' + q.sub.charAt(0).toUpperCase() + q.sub.slice(1) : '') + 
      ' <span style="opacity:0.6">' + masteryDot + '</span>' + 
      (dueIndicator ? '<span class="due-badge" style="margin-left:8px">DUE</span>' : '');
    if (qt) qt.textContent = q.q;
    if (bt) bt.textContent = q.a;
    if (fm) fm.textContent = 'Card ' + (flashIdx + 1) + ' of ' + flashDeck.length + 
      (studyMode === 'quick' ? ' · Quick Session' : '');
    if (ff) ff.style.width = ((flashIdx + 1) / flashDeck.length * 100) + '%';
    if (fp) fp.disabled = flashIdx === 0;
    if (fn) fn.disabled = flashIdx === flashDeck.length - 1;
  }, 80);
}

function flipCard() {
  const ci = document.getElementById('card-inner');
  const confBar = document.getElementById('confidence-bar');
  if (!ci || !flashDeck.length) return;
  
  flashFlipped = !flashFlipped;
  ci.classList.toggle('flipped', flashFlipped);
  
  // Show confidence buttons when flipped
  if (confBar) confBar.classList.toggle('show', flashFlipped);
  
  if (flashFlipped && flashDeck[flashIdx]) {
    markAnswered(flashDeck[flashIdx].id);
  }
}

function rateCard(rating) {
  if (!flashDeck.length || !flashFlipped) return;
  
  const q = flashDeck[flashIdx];
  const m = getMastery(q.id);
  
  // Update mastery based on rating
  m.level = rating;
  m.lastSeen = Date.now();
  
  if (rating === 3) {
    // Got it - increase streak, schedule further out
    m.streak = Math.min(m.streak + 1, SRS_INTERVALS.length - 1);
  } else if (rating === 1) {
    // Missed - reset streak
    m.streak = 0;
  } else {
    // Unsure - decrease streak slightly
    m.streak = Math.max(0, m.streak - 1);
  }
  
  // Calculate next due time
  const intervalMinutes = SRS_INTERVALS[m.streak];
  m.nextDue = Date.now() + (intervalMinutes * 60 * 1000);
  
  // Save and move to next card
  saveProgress();
  updateMasteryStats();
  
  // Auto-advance to next card
  if (flashIdx < flashDeck.length - 1) {
    flashIdx++;
    renderCard();
  } else {
    // End of deck
    if (studyMode === 'quick') {
      stopSessionTimer();
      showQuickSessionComplete();
    } else {
      renderCard(); // Just re-render the last card
    }
  }
}

function showQuickSessionComplete() {
  const qt = document.getElementById('card-q-text');
  const cl = document.getElementById('card-cat-label');
  const confBar = document.getElementById('confidence-bar');
  
  if (cl) cl.textContent = 'SESSION COMPLETE';
  if (qt) qt.innerHTML = '🎉 You finished 10 cards!<br><br>' +
    '<button class="btn-primary" onclick="setStudyMode(\'quick\')" style="font-size:13px;padding:10px 20px">Start Another Quick 10</button>';
  if (confBar) confBar.classList.remove('show');
  
  const ci = document.getElementById('card-inner');
  if (ci) ci.classList.remove('flipped');
}

function prevCard() { 
  if (flashIdx > 0) { 
    flashIdx--; 
    renderCard(); 
  } 
}

function nextCard() { 
  if (flashIdx < flashDeck.length - 1) { 
    flashIdx++; 
    renderCard(); 
  } 
}

function startSessionTimer() {
  sessionStartTime = Date.now();
  const timerEl = document.getElementById('session-timer');
  if (timerEl) timerEl.classList.add('show');
  
  sessionTimer = setInterval(() => {
    const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    const timeEl = document.getElementById('session-time');
    if (timeEl) timeEl.textContent = mins + ':' + String(secs).padStart(2, '0');
  }, 1000);
}

function stopSessionTimer() {
  if (sessionTimer) {
    clearInterval(sessionTimer);
    sessionTimer = null;
  }
  const timerEl = document.getElementById('session-timer');
  if (timerEl) timerEl.classList.remove('show');
}

/* ─── MOCK INTERVIEW ─────────────────── */
let mockHistory = [], mockActive = false;

function startMock() {
  mockActive = true;
  const badge = document.getElementById('iv-badge');
  if (badge) { badge.className = 'iv-badge badge-live'; badge.textContent = '● LIVE'; }
  mockHistory = [];
  const cat = document.getElementById('mock-cat').value;
  const firm = document.getElementById('mock-firm').value;
  const chatBody = document.getElementById('chat-body');
  if (chatBody) chatBody.innerHTML = '';
  appendMsg('ai', 'Welcome. I\'m Alex Chen, VP in M&A at ' + firm + '. This is a technical interview — I\'ll ask you questions and score each answer. Ready? Let\'s start.');
  setTimeout(function() { askQuestion(cat); }, 800);
}

function askQuestion(cat) {
  const pool = QUESTIONS.filter(q=>q.cat===cat);
  const q = pool[Math.floor(Math.random()*pool.length)];
  mockHistory.push({role:'assistant', content:q.q});
  appendMsg('ai', q.q);
}

function appendMsg(role, text) {
  const body = document.getElementById('chat-body');
  if (!body) return;
  const div = document.createElement('div');
  div.className = 'chat-msg' + (role==='user'?' user':'');
  div.innerHTML = '<div class="cm-av ' + (role==='ai'?'ai':'usr') + '">' + (role==='ai'?'AC':'Y') + '</div>' +
    '<div class="cm-bubble ' + (role==='ai'?'ai':'usr') + '">' + text + '</div>';
  body.appendChild(div);
  body.scrollTop = body.scrollHeight;
}

function showTyping() {
  const body = document.getElementById('chat-body');
  if (!body) return;
  const div = document.createElement('div');
  div.className = 'chat-msg'; div.id = 'typing-indicator';
  div.innerHTML = '<div class="cm-av ai">AC</div><div class="typing-indicator"><div class="t-dot"></div><div class="t-dot"></div><div class="t-dot"></div></div>';
  body.appendChild(div);
  body.scrollTop = body.scrollHeight;
}

function removeTyping() { document.getElementById('typing-indicator')?.remove(); }

async function sendMsg() {
  if (!mockActive) return;
  const ta = document.getElementById('chat-input');
  const text = ta.value.trim();
  if (!text) return;
  ta.value = ''; ta.style.height = 'auto';
  const sendBtn = document.getElementById('chat-send');
  if (sendBtn) sendBtn.disabled = true;
  appendMsg('user', text);
  mockHistory.push({role:'user', content:text});
  showTyping();
  const cat = document.getElementById('mock-cat').value;
  const firm = document.getElementById('mock-firm').value;
  try {
    const res = await fetch("https://api.anthropic.com/v1/messages", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({
        model:"claude-sonnet-4-5-20250929",
        max_tokens:600,
        system: "You are Alex Chen, VP in M&A at " + firm + ". Conduct a rigorous IB interview. After the candidate's answer, give brief feedback and scores: 'Technical: X/10 | Structure: X/10 | Confidence: X/10'. Then ask a follow-up. Keep it concise and challenging.",
        messages: mockHistory.map(m=>({role:m.role,content:m.content}))
      })
    });
    const data = await res.json();
    removeTyping();
    const reply = data.content?.map(c=>c.text||'').join('')||'Could not get response.';
    mockHistory.push({role:'assistant',content:reply});
    const scoreMatch = reply.match(/Technical:\s*(\d+)\/10.*?Structure:\s*(\d+)\/10.*?Confidence:\s*(\d+)\/10/i);
    let displayReply = reply.replace(/\n/g,'<br>');
    if (scoreMatch) {
      const t=scoreMatch[1], s=scoreMatch[2], c=scoreMatch[3];
      const cc = n => parseInt(n)>=8?'sc-g':parseInt(n)>=6?'sc-y':'sc-r';
      const sh = '<div class="score-block" style="margin-top:8px">' +
        '<div class="score-line"><span class="sc-label">Technical Accuracy</span><span class="sc-val ' + cc(t) + '">' + t + '/10</span></div>' +
        '<div class="score-line"><span class="sc-label">Structure &amp; Clarity</span><span class="sc-val ' + cc(s) + '">' + s + '/10</span></div>' +
        '<div class="score-line"><span class="sc-label">Confidence</span><span class="sc-val ' + cc(c) + '">' + c + '/10</span></div></div>';
      displayReply = reply.replace(/Technical:\s*\d+\/10.*?Confidence:\s*\d+\/10/i,'').replace(/\n/g,'<br>') + sh;
    }
    const body = document.getElementById('chat-body');
    if (body) {
      const div = document.createElement('div');
      div.className = 'chat-msg';
      div.innerHTML = '<div class="cm-av ai">AC</div><div class="cm-bubble ai">' + displayReply + '</div>';
      body.appendChild(div);
      body.scrollTop = body.scrollHeight;
    }
  } catch(e) {
    removeTyping();
    appendMsg('ai', 'Connection error. Please try again.');
  }
  if (sendBtn) sendBtn.disabled = false;
}

/* ─── QUIZ MODE ─────────────────────── */
let quizQuestions = [];
let quizIndex = 0;
let quizCorrect = 0;
let quizAnswered = false;
let quizMistakes = [];

function startQuiz() {
  const cat = document.getElementById('quiz-cat-select').value;
  const countVal = document.getElementById('quiz-count-select').value;
  const diff = document.getElementById('quiz-diff-select').value;
  
  // Filter questions that have MCQ options
  let pool = QUESTIONS.filter(q => q.wrong && q.wrong.length > 0);
  
  if (cat !== 'all') {
    pool = pool.filter(q => q.cat === cat);
  }
  
  if (diff !== 'all') {
    pool = pool.filter(q => q.difficulty === parseInt(diff));
  }
  
  // Shuffle
  for (let i = pool.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [pool[i], pool[j]] = [pool[j], pool[i]];
  }
  
  // Limit count
  const count = countVal === 'all' ? pool.length : Math.min(parseInt(countVal), pool.length);
  quizQuestions = pool.slice(0, count);
  quizIndex = 0;
  quizCorrect = 0;
  quizMistakes = [];
  quizAnswered = false;
  
  document.getElementById('quiz-setup').style.display = 'none';
  document.getElementById('quiz-active').style.display = 'block';
  document.getElementById('quiz-results').style.display = 'none';
  
  renderQuizQuestion();
}

function renderQuizQuestion() {
  if (quizIndex >= quizQuestions.length) {
    showQuizResults();
    return;
  }
  
  const q = quizQuestions[quizIndex];
  quizAnswered = false;
  
  // Update progress
  document.getElementById('quiz-progress-fill').style.width = ((quizIndex) / quizQuestions.length * 100) + '%';
  document.getElementById('quiz-progress-text').textContent = (quizIndex + 1) + ' / ' + quizQuestions.length;
  
  // Category label
  const catLabels = {tech: 'TECHNICAL', beh: 'BEHAVIORAL', deal: 'DEALS & MARKETS', brain: 'BRAIN TEASER'};
  const subLabels = {accounting: ' — ACCOUNTING', valuation: ' — VALUATION', lbo: ' — LBO'};
  document.getElementById('quiz-current-cat').textContent = (catLabels[q.cat] || 'TECHNICAL') + (subLabels[q.sub] || '');
  
  // Question
  document.getElementById('quiz-current-question').textContent = q.q;
  
  // Shuffle answers
  const answers = [
    { text: q.a, correct: true },
    { text: q.wrong[0], correct: false },
    { text: q.wrong[1], correct: false },
    { text: q.wrong[2], correct: false }
  ].filter(a => a.text);
  
  for (let i = answers.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [answers[i], answers[j]] = [answers[j], answers[i]];
  }
  
  const letters = ['A', 'B', 'C', 'D'];
  document.getElementById('quiz-answers').innerHTML = answers.map((a, i) => 
    `<div class="quiz-answer" data-correct="${a.correct}" onclick="selectQuizAnswer(this)">
      <span class="quiz-letter">${letters[i]}</span>
      <span>${a.text}</span>
    </div>`
  ).join('');
  
  // Hide feedback and actions
  document.getElementById('quiz-feedback').className = 'quiz-feedback';
  document.getElementById('quiz-actions').style.display = 'none';
}

function selectQuizAnswer(el) {
  if (quizAnswered) return;
  quizAnswered = true;
  
  const isCorrect = el.dataset.correct === 'true';
  const q = quizQuestions[quizIndex];
  
  // Mark all answers
  document.querySelectorAll('.quiz-answer').forEach(a => {
    a.classList.add('disabled');
    if (a.dataset.correct === 'true') {
      a.classList.add('correct');
    } else if (a === el && !isCorrect) {
      a.classList.add('incorrect');
    }
  });
  
  // Update score and mastery
  if (isCorrect) {
    quizCorrect++;
    rateCardById(q.id, 3); // Got it
  } else {
    quizMistakes.push(q);
    rateCardById(q.id, 1); // Missed
  }
  
  // Show feedback
  const feedback = document.getElementById('quiz-feedback');
  feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'incorrect');
  feedback.innerHTML = `
    <div class="quiz-feedback-title">${isCorrect ? '✓ Correct!' : '✗ Incorrect'}</div>
    <div class="quiz-feedback-text">${isCorrect ? '' : '<strong>Correct answer:</strong> ' + q.a}</div>
  `;
  
  // Show next button
  document.getElementById('quiz-actions').style.display = 'flex';
}

function rateCardById(id, rating) {
  const m = getMastery(id);
  m.level = rating;
  m.lastSeen = Date.now();
  if (rating === 3) {
    m.streak = Math.min(m.streak + 1, SRS_INTERVALS.length - 1);
  } else if (rating === 1) {
    m.streak = 0;
  } else {
    m.streak = Math.max(0, m.streak - 1);
  }
  const intervalMinutes = SRS_INTERVALS[m.streak];
  m.nextDue = Date.now() + (intervalMinutes * 60 * 1000);
  saveProgress();
}

function nextQuizQuestion() {
  quizIndex++;
  renderQuizQuestion();
}

function showQuizResults() {
  document.getElementById('quiz-active').style.display = 'none';
  document.getElementById('quiz-results').style.display = 'block';
  
  const pct = Math.round(quizCorrect / quizQuestions.length * 100);
  document.getElementById('quiz-final-score').textContent = pct + '%';
  document.getElementById('quiz-correct-count').textContent = quizCorrect;
  document.getElementById('quiz-incorrect-count').textContent = quizQuestions.length - quizCorrect;
  document.getElementById('quiz-total-count').textContent = quizQuestions.length;
  
  updateMasteryStats();
  updateDashStats();
}

function showQuizSetup() {
  document.getElementById('quiz-setup').style.display = 'block';
  document.getElementById('quiz-active').style.display = 'none';
  document.getElementById('quiz-results').style.display = 'none';
}

function reviewQuizMistakes() {
  if (!quizMistakes.length) {
    alert('No mistakes to review!');
    return;
  }
  // Go to flashcards with just the mistakes
  flashDeck = [...quizMistakes];
  flashIdx = 0;
  flashFlipped = false;
  showView('flash');
  renderCard();
}

/* ─── KNOWLEDGE MAP ─────────────────── */
const KNOWLEDGE_NODES = [
  // Central node
  { id: 'center', title: 'IB Interview', icon: '🎯', x: 50, y: 50, central: true },
  
  // Main categories (ring 1)
  { id: 'tech', title: 'Technical', icon: '📊', x: 50, y: 15, parent: 'center', cat: 'tech' },
  { id: 'beh', title: 'Behavioral', icon: '💬', x: 85, y: 50, parent: 'center', cat: 'beh' },
  { id: 'deal', title: 'Markets', icon: '📈', x: 50, y: 85, parent: 'center', cat: 'deal' },
  
  // Technical subtopics (ring 2)
  { id: 'accounting', title: 'Accounting', icon: '📋', x: 20, y: 8, parent: 'tech', sub: 'accounting' },
  { id: 'valuation', title: 'Valuation', icon: '💰', x: 50, y: 3, parent: 'tech', sub: 'valuation' },
  { id: 'lbo', title: 'LBO', icon: '🏦', x: 80, y: 8, parent: 'tech', sub: 'lbo' },
  
  // Accounting topics (ring 3)
  { id: 'acc-fs', title: '3 Statements', icon: '📄', x: 5, y: 20, parent: 'accounting', sub: 'accounting' },
  { id: 'acc-wc', title: 'Working Capital', icon: '💵', x: 15, y: 25, parent: 'accounting', sub: 'accounting' },
  
  // Valuation topics (ring 3)
  { id: 'val-dcf', title: 'DCF', icon: '📉', x: 40, y: 18, parent: 'valuation', sub: 'valuation' },
  { id: 'val-comps', title: 'Comps', icon: '📊', x: 55, y: 18, parent: 'valuation', sub: 'valuation' },
  { id: 'val-wacc', title: 'WACC', icon: '⚖️', x: 65, y: 22, parent: 'valuation', sub: 'valuation' },
  
  // LBO topics (ring 3)
  { id: 'lbo-model', title: 'LBO Model', icon: '🔢', x: 85, y: 22, parent: 'lbo', sub: 'lbo' },
  { id: 'lbo-debt', title: 'Debt Structure', icon: '📜', x: 92, y: 30, parent: 'lbo', sub: 'lbo' },
  
  // Behavioral topics (ring 2)
  { id: 'beh-fit', title: 'Why IB', icon: '🎯', x: 92, y: 38, parent: 'beh', cat: 'beh' },
  { id: 'beh-team', title: 'Teamwork', icon: '🤝', x: 95, y: 55, parent: 'beh', cat: 'beh' },
  { id: 'beh-lead', title: 'Leadership', icon: '👔', x: 92, y: 68, parent: 'beh', cat: 'beh' },
  
  // Markets topics (ring 2)
  { id: 'macro', title: 'Macro', icon: '🌍', x: 30, y: 92, parent: 'deal', cat: 'deal' },
  { id: 'rates', title: 'Rates & Bonds', icon: '📈', x: 50, y: 95, parent: 'deal', cat: 'deal' },
  { id: 'ma', title: 'M&A Trends', icon: '🤝', x: 70, y: 92, parent: 'deal', cat: 'deal' },
];

function renderKnowledgeMap() {
  const canvas = document.getElementById('map-canvas');
  const svg = document.getElementById('map-svg');
  if (!canvas || !svg) return;
  
  // Clear existing
  canvas.querySelectorAll('.map-node').forEach(n => n.remove());
  svg.innerHTML = '';
  
  const canvasRect = canvas.getBoundingClientRect();
  const width = canvas.offsetWidth;
  const height = canvas.offsetHeight;
  
  // Draw connections first (SVG lines)
  KNOWLEDGE_NODES.forEach(node => {
    if (node.parent) {
      const parent = KNOWLEDGE_NODES.find(n => n.id === node.parent);
      if (parent) {
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', (parent.x / 100) * width);
        line.setAttribute('y1', (parent.y / 100) * height);
        line.setAttribute('x2', (node.x / 100) * width);
        line.setAttribute('y2', (node.y / 100) * height);
        
        // Check if path is active (both nodes have progress)
        const nodeStatus = getNodeStatus(node);
        const parentStatus = getNodeStatus(parent);
        if (nodeStatus !== 'new' || parentStatus !== 'new') {
          line.classList.add('active');
        }
        
        svg.appendChild(line);
      }
    }
  });
  
  // Draw nodes
  KNOWLEDGE_NODES.forEach(node => {
    const div = document.createElement('div');
    div.className = 'map-node';
    if (node.central) div.classList.add('central');
    
    const status = getNodeStatus(node);
    if (status === 'mastered') div.classList.add('mastered');
    else if (status === 'learning') div.classList.add('learning');
    
    const progress = getNodeProgress(node);
    const color = node.central ? 'var(--accent)' : 
                  status === 'mastered' ? 'var(--green)' : 
                  status === 'learning' ? 'var(--amber)' : 'var(--bg-4)';
    
    div.innerHTML = `
      <div class="map-node-icon">${node.icon}</div>
      <div class="map-node-title">${node.title}</div>
      <div class="map-node-sub">${progress.done}/${progress.total}</div>
      <div class="map-node-progress">
        <div class="map-node-progress-fill" style="width:${progress.pct}%;background:${color}"></div>
      </div>
    `;
    
    // Position
    div.style.left = `calc(${node.x}% - 60px)`;
    div.style.top = `calc(${node.y}% - 40px)`;
    
    // Click handler
    if (!node.central) {
      div.onclick = () => {
        if (node.sub) {
          document.getElementById('quiz-cat-select').value = 'tech';
          showView('quiz');
        } else if (node.cat) {
          document.getElementById('quiz-cat-select').value = node.cat;
          showView('quiz');
        }
      };
    }
    
    canvas.appendChild(div);
  });
}

function getNodeStatus(node) {
  const questions = getNodeQuestions(node);
  if (!questions.length) return 'new';
  
  const mastered = questions.filter(q => getMasteryClass(q.id) === 'mastered').length;
  const learning = questions.filter(q => getMasteryClass(q.id) === 'learning').length;
  
  if (mastered === questions.length) return 'mastered';
  if (mastered > 0 || learning > 0) return 'learning';
  return 'new';
}

function getNodeProgress(node) {
  const questions = getNodeQuestions(node);
  if (!questions.length) return { done: 0, total: 0, pct: 0 };
  
  const mastered = questions.filter(q => getMasteryClass(q.id) === 'mastered').length;
  return {
    done: mastered,
    total: questions.length,
    pct: Math.round((mastered / questions.length) * 100)
  };
}

function getNodeQuestions(node) {
  if (node.central) return QUESTIONS;
  if (node.sub) return QUESTIONS.filter(q => q.sub === node.sub);
  if (node.cat) return QUESTIONS.filter(q => q.cat === node.cat);
  return [];
}

/* ─── DIAGNOSTIC ASSESSMENT ─────────── */
let diagQuestions = [];
let diagIndex = 0;
let diagScores = { tech: 0, beh: 0, deal: 0 };
let diagCounts = { tech: 0, beh: 0, deal: 0 };

function checkFirstVisit() {
  if (!progress.diagnosticDone && currentUser) {
    document.getElementById('diagnostic-overlay').classList.add('show');
  }
}

function startDiagnostic() {
  // Select 10 questions: 4 tech (2 accounting, 2 valuation), 3 beh, 3 deal
  const techAcc = QUESTIONS.filter(q => q.cat === 'tech' && q.sub === 'accounting' && q.wrong).slice(0, 2);
  const techVal = QUESTIONS.filter(q => q.cat === 'tech' && q.sub === 'valuation' && q.wrong).slice(0, 2);
  const beh = QUESTIONS.filter(q => q.cat === 'beh' && q.wrong).slice(0, 3);
  const deal = QUESTIONS.filter(q => q.cat === 'deal' && q.wrong).slice(0, 3);
  
  diagQuestions = [...techAcc, ...techVal, ...beh, ...deal];
  
  // Shuffle
  for (let i = diagQuestions.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [diagQuestions[i], diagQuestions[j]] = [diagQuestions[j], diagQuestions[i]];
  }
  
  diagIndex = 0;
  diagScores = { tech: 0, beh: 0, deal: 0 };
  diagCounts = { tech: 0, beh: 0, deal: 0 };
  
  document.getElementById('diagnostic-welcome').style.display = 'none';
  document.getElementById('diagnostic-active').style.display = 'block';
  document.getElementById('diagnostic-results').style.display = 'none';
  
  renderDiagQuestion();
}

function renderDiagQuestion() {
  if (diagIndex >= diagQuestions.length) {
    showDiagResults();
    return;
  }
  
  const q = diagQuestions[diagIndex];
  
  document.getElementById('diag-progress-fill').style.width = ((diagIndex) / diagQuestions.length * 100) + '%';
  document.getElementById('diag-progress-text').textContent = (diagIndex + 1) + ' / ' + diagQuestions.length;
  
  const catLabels = {tech: 'TECHNICAL', beh: 'BEHAVIORAL', deal: 'MARKETS'};
  document.getElementById('diag-cat').textContent = catLabels[q.cat] || 'QUESTION';
  document.getElementById('diag-question').textContent = q.q;
  
  const answers = [
    { text: q.a, correct: true },
    { text: q.wrong[0], correct: false },
    { text: q.wrong[1], correct: false },
    { text: q.wrong[2], correct: false }
  ].filter(a => a.text);
  
  for (let i = answers.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [answers[i], answers[j]] = [answers[j], answers[i]];
  }
  
  const letters = ['A', 'B', 'C', 'D'];
  document.getElementById('diag-answers').innerHTML = answers.map((a, i) => 
    `<div class="quiz-answer" data-correct="${a.correct}" onclick="selectDiagAnswer(this, '${q.cat}')">
      <span class="quiz-letter">${letters[i]}</span>
      <span>${a.text}</span>
    </div>`
  ).join('');
}

function selectDiagAnswer(el, cat) {
  const isCorrect = el.dataset.correct === 'true';
  
  diagCounts[cat]++;
  if (isCorrect) diagScores[cat]++;
  
  // Brief visual feedback
  el.classList.add(isCorrect ? 'correct' : 'incorrect');
  document.querySelectorAll('#diag-answers .quiz-answer').forEach(a => a.style.pointerEvents = 'none');
  
  setTimeout(() => {
    diagIndex++;
    renderDiagQuestion();
  }, 500);
}

function showDiagResults() {
  document.getElementById('diagnostic-active').style.display = 'none';
  document.getElementById('diagnostic-results').style.display = 'block';
  
  const total = diagScores.tech + diagScores.beh + diagScores.deal;
  const maxTotal = diagCounts.tech + diagCounts.beh + diagCounts.deal;
  const pct = Math.round(total / maxTotal * 100);
  
  // Determine band
  let band, bandClass, recommendation;
  if (pct >= 90) {
    band = 'EXPERT'; bandClass = 'expert';
    recommendation = 'You have strong fundamentals. Focus on edge cases, advanced LBO concepts, and mock interviews to sharpen your delivery.';
  } else if (pct >= 70) {
    band = 'ADVANCED'; bandClass = 'advanced';
    recommendation = 'Solid foundation. Identify your weak spots and drill those areas. Consider more practice with timed quizzes.';
  } else if (pct >= 40) {
    band = 'INTERMEDIATE'; bandClass = 'intermediate';
    recommendation = 'Good start. Focus on building core accounting and valuation knowledge before moving to complex topics.';
  } else {
    band = 'BEGINNER'; bandClass = 'beginner';
    recommendation = 'We recommend starting with the fundamentals. Work through accounting basics, then progress to valuation concepts.';
  }
  
  document.getElementById('diag-band').textContent = band;
  document.getElementById('diag-band').className = 'diagnostic-band ' + bandClass;
  document.getElementById('diag-score').textContent = pct + '%';
  
  const techPct = diagCounts.tech ? Math.round(diagScores.tech / diagCounts.tech * 100) : 0;
  const behPct = diagCounts.beh ? Math.round(diagScores.beh / diagCounts.beh * 100) : 0;
  const dealPct = diagCounts.deal ? Math.round(diagScores.deal / diagCounts.deal * 100) : 0;
  
  document.getElementById('diag-tech-score').textContent = techPct + '%';
  document.getElementById('diag-beh-score').textContent = behPct + '%';
  document.getElementById('diag-deal-score').textContent = dealPct + '%';
  document.getElementById('diag-recommendation').textContent = recommendation;
  
  // Save diagnostic results
  progress.diagnosticDone = true;
  progress.userBand = bandClass;
  progress.diagnosticScores = { tech: techPct, beh: behPct, deal: dealPct, overall: pct };
  saveProgress();
}

function skipDiagnostic() {
  progress.diagnosticDone = true;
  progress.userBand = 'intermediate';
  saveProgress();
  closeDiagnostic();
}

function closeDiagnostic() {
  document.getElementById('diagnostic-overlay').classList.remove('show');
  updateDashStats();
  updateMasteryStats();
}

/* ─── DEADLINE COUNTDOWN ─────────────── */
function updateDeadlineCountdown() {
  // IB recruiting deadlines - approximate next major deadline
  const deadlines = [
    { date: new Date('2025-03-01'), name: 'Summer 2025 SA Applications' },
    { date: new Date('2025-08-15'), name: 'FT 2026 Applications' },
    { date: new Date('2025-09-01'), name: 'Fall Recruiting' },
  ];
  
  const now = new Date();
  let nextDeadline = deadlines.find(d => d.date > now) || deadlines[0];
  
  const diffTime = nextDeadline.date - now;
  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  
  const countdownEl = document.getElementById('deadline-countdown');
  const titleEl = document.querySelector('.deadline-title');
  
  if (countdownEl) {
    if (diffDays <= 0) {
      countdownEl.textContent = 'Now!';
    } else if (diffDays === 1) {
      countdownEl.textContent = '1 day';
    } else {
      countdownEl.textContent = diffDays + ' days';
    }
  }
  
  if (titleEl && nextDeadline) {
    titleEl.textContent = nextDeadline.name;
  }
}

/* ─── INIT ───────────────────────────── */
window.addEventListener('DOMContentLoaded', async function() {
  const d = new Date();
  const el = document.getElementById('dash-date');
  if (el) el.textContent = d.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric',year:'numeric'});
  updateDashStats();
  updateDeadlineCountdown();
  calcROI();
  demoFCRender();

  // Restore existing session
  const { data: { session } } = await sb.auth.getSession();
  if (session?.user) {
    await onSignedIn(session.user);
  }

  // Listen for auth changes
  sb.auth.onAuthStateChange(async (event, session) => {
    if (event === 'SIGNED_IN' && session?.user) {
      await onSignedIn(session.user);
    } else if (event === 'SIGNED_OUT') {
      showScreen('landing');
    }
  });
});
</script>
</body>
</html>
